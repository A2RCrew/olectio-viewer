/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./dist/config/default.js":
/*!********************************!*\
  !*** ./dist/config/default.js ***!
  \********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar defaultConfig = {\n    debugViewerSafeArea: false,\n    initialFixedMode: viewerSettings_1.ViewerMode.WithScroll,\n    initialFitMode: viewerSettings_1.FitMode.Height,\n    initialReadMode: true,\n    initialScrollMode: 'horizontal',\n    initialTextAlign: null,\n    initialTheme: 'light',\n    initialFontSize: 16,\n    initialLineHeight: 1.5,\n    initialZoom: 1,\n    initialSearchTerms: new Array(),\n    showPageSeparation: false,\n    animationFriction: 10,\n    animationSpeed: 300,\n    animationInertia: 20,\n    doubleTapThreshold: 300,\n    clickTimeout: 200,\n    zoom: {\n        max: 4,\n        min: 0.5,\n        steps: [0.1, 0.2, 0.3, 0.4, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4]\n    },\n    loadedContentsNumber: 5,\n    fontSize: {\n        min: 12,\n        max: 36,\n        step: 2\n    },\n    columnGap: 216,\n    minColumnGap: 48,\n    pageChangeThreshold: 40,\n    chapterChangeThreshold: 40,\n    minCharsPerColumn: 50,\n    maxCharsPerColumn: 70,\n    readModeMargin: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n    },\n    uiModeMargin: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 140\n    },\n    paddingTop: 60,\n    paddingBottom: 60,\n    toggleReadModeOnClick: true,\n    fixedViewerPreloadOrder: [0, 1, 2, 3, -1, 4, -2, 5, -3, 6, 7, 8, 9]\n};\nexports[\"default\"] = defaultConfig;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/config/default.js?");

/***/ }),

/***/ "./dist/config/index.js":
/*!******************************!*\
  !*** ./dist/config/index.js ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.setConfig = exports.getConfig = void 0;\nvar config;\nvar getConfig = function () { return config; };\nexports.getConfig = getConfig;\nvar setConfig = function (newConfig) {\n    config = __assign(__assign({}, (config || {})), newConfig);\n    return config;\n};\nexports.setConfig = setConfig;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/config/index.js?");

/***/ }),

/***/ "./dist/index.js":
/*!***********************!*\
  !*** ./dist/index.js ***!
  \***********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar viewer_1 = __importDefault(__webpack_require__(/*! ./viewer */ \"./dist/viewer/index.js\"));\nloglevel_1[\"default\"].setLevel('info');\nif (typeof window !== 'undefined') {\n    window.olectioViewer = viewer_1[\"default\"];\n}\nexports[\"default\"] = viewer_1[\"default\"];\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/index.js?");

/***/ }),

/***/ "./dist/lib/actions/actionDispatchers.js":
/*!***********************************************!*\
  !*** ./dist/lib/actions/actionDispatchers.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar setScrollMode_1 = __importDefault(__webpack_require__(/*! ./setScrollMode */ \"./dist/lib/actions/setScrollMode.js\"));\nvar setDebugViewerSafeArea_1 = __importDefault(__webpack_require__(/*! ./setDebugViewerSafeArea */ \"./dist/lib/actions/setDebugViewerSafeArea.js\"));\nvar appendNewContent_1 = __importDefault(__webpack_require__(/*! ./appendNewContent */ \"./dist/lib/actions/appendNewContent.js\"));\nvar increaseFontSize_1 = __importDefault(__webpack_require__(/*! ./increaseFontSize */ \"./dist/lib/actions/increaseFontSize.js\"));\nvar decreaseFontSize_1 = __importDefault(__webpack_require__(/*! ./decreaseFontSize */ \"./dist/lib/actions/decreaseFontSize.js\"));\nvar setFontSize_1 = __importDefault(__webpack_require__(/*! ./setFontSize */ \"./dist/lib/actions/setFontSize.js\"));\nvar setFontFamily_1 = __importDefault(__webpack_require__(/*! ./setFontFamily */ \"./dist/lib/actions/setFontFamily.js\"));\nvar setTextAlign_1 = __importDefault(__webpack_require__(/*! ./setTextAlign */ \"./dist/lib/actions/setTextAlign.js\"));\nvar resize_1 = __importDefault(__webpack_require__(/*! ./resize */ \"./dist/lib/actions/resize.js\"));\nvar highlightSearchTerms_1 = __importDefault(__webpack_require__(/*! ./highlightSearchTerms */ \"./dist/lib/actions/highlightSearchTerms.js\"));\nvar removeSearchHighlights_1 = __importDefault(__webpack_require__(/*! ./removeSearchHighlights */ \"./dist/lib/actions/removeSearchHighlights.js\"));\nvar setContentsInfo_1 = __importDefault(__webpack_require__(/*! ./setContentsInfo */ \"./dist/lib/actions/setContentsInfo.js\"));\nvar setReadMode_1 = __importDefault(__webpack_require__(/*! ./setReadMode */ \"./dist/lib/actions/setReadMode.js\"));\nvar addOnChangeEvent_1 = __importDefault(__webpack_require__(/*! ./addOnChangeEvent */ \"./dist/lib/actions/addOnChangeEvent.js\"));\nvar removeOnChangeEvent_1 = __importDefault(__webpack_require__(/*! ./removeOnChangeEvent */ \"./dist/lib/actions/removeOnChangeEvent.js\"));\nvar removeAllOnChangeEvents_1 = __importDefault(__webpack_require__(/*! ./removeAllOnChangeEvents */ \"./dist/lib/actions/removeAllOnChangeEvents.js\"));\nvar setTheme_1 = __importDefault(__webpack_require__(/*! ./setTheme */ \"./dist/lib/actions/setTheme.js\"));\nvar navigateToPreviousChapter_1 = __importDefault(__webpack_require__(/*! ./navigateToPreviousChapter */ \"./dist/lib/actions/navigateToPreviousChapter.js\"));\nvar navigateToNextChapter_1 = __importDefault(__webpack_require__(/*! ./navigateToNextChapter */ \"./dist/lib/actions/navigateToNextChapter.js\"));\nvar navigateToPage_1 = __importDefault(__webpack_require__(/*! ./navigateToPage */ \"./dist/lib/actions/navigateToPage.js\"));\nvar setFitMode_1 = __importDefault(__webpack_require__(/*! ./setFitMode */ \"./dist/lib/actions/setFitMode.js\"));\nvar setZoom_1 = __importDefault(__webpack_require__(/*! ./setZoom */ \"./dist/lib/actions/setZoom.js\"));\nvar showSelectionMenu_1 = __importDefault(__webpack_require__(/*! ./showSelectionMenu */ \"./dist/lib/actions/showSelectionMenu.js\"));\nvar showNotesDialog_1 = __importDefault(__webpack_require__(/*! ./showNotesDialog */ \"./dist/lib/actions/showNotesDialog.js\"));\nvar removeSelectionMenu_1 = __importDefault(__webpack_require__(/*! ./removeSelectionMenu */ \"./dist/lib/actions/removeSelectionMenu.js\"));\nvar removeNotesDialog_1 = __importDefault(__webpack_require__(/*! ./removeNotesDialog */ \"./dist/lib/actions/removeNotesDialog.js\"));\nvar clearSelection_1 = __importDefault(__webpack_require__(/*! ./clearSelection */ \"./dist/lib/actions/clearSelection.js\"));\nvar drawHighlights_1 = __importDefault(__webpack_require__(/*! ./drawHighlights */ \"./dist/lib/actions/drawHighlights.js\"));\nvar removeHighlights_1 = __importDefault(__webpack_require__(/*! ./removeHighlights */ \"./dist/lib/actions/removeHighlights.js\"));\nvar setHighlighterColor_1 = __importDefault(__webpack_require__(/*! ./setHighlighterColor */ \"./dist/lib/actions/setHighlighterColor.js\"));\nvar moveNext_1 = __importDefault(__webpack_require__(/*! ./moveNext */ \"./dist/lib/actions/moveNext.js\"));\nvar movePrev_1 = __importDefault(__webpack_require__(/*! ./movePrev */ \"./dist/lib/actions/movePrev.js\"));\nvar setLineHeight_1 = __importDefault(__webpack_require__(/*! ./setLineHeight */ \"./dist/lib/actions/setLineHeight.js\"));\nvar setGapMode_1 = __importDefault(__webpack_require__(/*! ./setGapMode */ \"./dist/lib/actions/setGapMode.js\"));\nvar setLinkProps_1 = __importDefault(__webpack_require__(/*! ./setLinkProps */ \"./dist/lib/actions/setLinkProps.js\"));\n/**\n * List of all action dispatchers\n */\nvar actionDispatchers = {\n    setScrollMode: setScrollMode_1[\"default\"],\n    setDebugViewerSafeArea: setDebugViewerSafeArea_1[\"default\"],\n    appendNewContent: appendNewContent_1[\"default\"],\n    increaseFontSize: increaseFontSize_1[\"default\"],\n    decreaseFontSize: decreaseFontSize_1[\"default\"],\n    setFontSize: setFontSize_1[\"default\"],\n    setFontFamily: setFontFamily_1[\"default\"],\n    setTextAlign: setTextAlign_1[\"default\"],\n    setLineHeight: setLineHeight_1[\"default\"],\n    resize: resize_1[\"default\"],\n    highlightSearchTerms: highlightSearchTerms_1[\"default\"],\n    removeSearchHighlights: removeSearchHighlights_1[\"default\"],\n    setContentsInfo: setContentsInfo_1[\"default\"],\n    setReadMode: setReadMode_1[\"default\"],\n    addOnChangeEvent: addOnChangeEvent_1[\"default\"],\n    removeOnChangeEvent: removeOnChangeEvent_1[\"default\"],\n    removeAllOnChangeEvents: removeAllOnChangeEvents_1[\"default\"],\n    setTheme: setTheme_1[\"default\"],\n    navigateToPreviousChapter: navigateToPreviousChapter_1[\"default\"],\n    navigateToNextChapter: navigateToNextChapter_1[\"default\"],\n    navigateToPage: navigateToPage_1[\"default\"],\n    setFitMode: setFitMode_1[\"default\"],\n    setZoom: setZoom_1[\"default\"],\n    showSelectionMenu: showSelectionMenu_1[\"default\"],\n    showNotesDialog: showNotesDialog_1[\"default\"],\n    removeSelectionMenu: removeSelectionMenu_1[\"default\"],\n    removeNotesDialog: removeNotesDialog_1[\"default\"],\n    clearSelection: clearSelection_1[\"default\"],\n    drawHighlights: drawHighlights_1[\"default\"],\n    removeHighlights: removeHighlights_1[\"default\"],\n    setHighlighterColor: setHighlighterColor_1[\"default\"],\n    moveNext: moveNext_1[\"default\"],\n    movePrev: movePrev_1[\"default\"],\n    setGapMode: setGapMode_1[\"default\"],\n    setLinkProps: setLinkProps_1[\"default\"]\n};\nexports[\"default\"] = actionDispatchers;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/actionDispatchers.js?");

/***/ }),

/***/ "./dist/lib/actions/addOnChangeEvent.js":
/*!**********************************************!*\
  !*** ./dist/lib/actions/addOnChangeEvent.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar stateChangeEvents_1 = __webpack_require__(/*! ../state/stateChangeEvents */ \"./dist/lib/state/stateChangeEvents.js\");\n/**\n * Adds event that fires when the viewer state changes\n * this method must only be used by the API, and not by the viewer\n * @param state.action AddOnChangeEven action\n * @returns\n */\nvar addOnChangeEvent = function (_a) {\n    var action = _a.action, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            (0, stateChangeEvents_1.addOnChangeEventListener)(action.propertyName, action.event);\n            if (action.returnValue) {\n                action.event(state[action.propertyName], undefined);\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = addOnChangeEvent;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/addOnChangeEvent.js?");

/***/ }),

/***/ "./dist/lib/actions/appendNewContent.js":
/*!**********************************************!*\
  !*** ./dist/lib/actions/appendNewContent.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar checkImagesHeight_1 = __importDefault(__webpack_require__(/*! ../../utils/checkImagesHeight */ \"./dist/utils/checkImagesHeight.js\"));\nvar recalculate_1 = __importDefault(__webpack_require__(/*! ../../viewer/recalculate */ \"./dist/viewer/recalculate.js\"));\nvar cssLoaderHandler_1 = __webpack_require__(/*! ../state/changeHandlers/cssLoaderHandler */ \"./dist/lib/state/changeHandlers/cssLoaderHandler.js\");\nvar wrapperReadyHandler_1 = __webpack_require__(/*! ../state/changeHandlers/wrapperReadyHandler */ \"./dist/lib/state/changeHandlers/wrapperReadyHandler.js\");\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar layoutSetup_1 = __importDefault(__webpack_require__(/*! ../../viewer/layoutSetup */ \"./dist/viewer/layoutSetup.js\"));\nvar loadContentsInBackground_1 = __importDefault(__webpack_require__(/*! ../../utils/loadContentsInBackground */ \"./dist/utils/loadContentsInBackground.js\"));\nvar handleFlowCssAndLoad_1 = __importDefault(__webpack_require__(/*! ../../utils/handleFlowCssAndLoad */ \"./dist/utils/handleFlowCssAndLoad.js\"));\nvar removeUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeUserHighlights */ \"./dist/utils/highlights/removeUserHighlights.js\"));\nvar clearUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/clearUserHighlights */ \"./dist/utils/highlights/clearUserHighlights.js\"));\nvar redrawUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/redrawUserHighlights */ \"./dist/utils/highlights/redrawUserHighlights.js\"));\nvar search_1 = __webpack_require__(/*! ../../utils/highlights/search */ \"./dist/utils/highlights/search/index.js\");\nvar handleAnchors_1 = __importDefault(__webpack_require__(/*! ../../utils/handleAnchors */ \"./dist/utils/handleAnchors.js\"));\n/**\n * Appends new content to viewer\n * @param context.state Viewer state\n * @param context.action Viewer action, containing content HTML and CSS URL\n * @returns Partial state with updated properties\n */\nvar appendNewContent = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var ex_1, ex_2;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (!(!state.wrapperReady || state.layout !== action.layout || action.slug !== state.slug)) return [3 /*break*/, 4];\n                    (0, state_1.updateState)({ layout: action.layout, slug: action.slug });\n                    (0, layoutSetup_1[\"default\"])(state);\n                    if (!!state.wrapperReady) return [3 /*break*/, 4];\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, (0, wrapperReadyHandler_1.onWrapperReady)()];\n                case 2:\n                    _b.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    ex_1 = _b.sent();\n                    return [2 /*return*/, {}];\n                case 4:\n                    if (!!state.cssLoaded) return [3 /*break*/, 8];\n                    _b.label = 5;\n                case 5:\n                    _b.trys.push([5, 7, , 8]);\n                    return [4 /*yield*/, (0, cssLoaderHandler_1.onCssLoaded)()];\n                case 6:\n                    _b.sent();\n                    return [3 /*break*/, 8];\n                case 7:\n                    ex_2 = _b.sent();\n                    return [2 /*return*/, {}];\n                case 8:\n                    (0, state_1.updateState)({ cssLoaded: false });\n                    return [2 /*return*/, new Promise(function (resolve) {\n                            var contentPlaceholderNode = state.contentPlaceholderNode, dynamicStyleNode = state.dynamicStyleNode, config = state.config;\n                            if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n                                (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n                                window.requestAnimationFrame(function () {\n                                    (0, search_1.clean)(state);\n                                    (0, removeUserHighlights_1[\"default\"])(state);\n                                    (0, clearUserHighlights_1[\"default\"])(state);\n                                    contentPlaceholderNode.innerHTML = action.htmlContent;\n                                    contentPlaceholderNode.dataset.highlighted = '';\n                                    window.requestAnimationFrame(function () {\n                                        window.requestAnimationFrame(function () {\n                                            var replace = true;\n                                            var newLink = document.createElement('link');\n                                            var done = function () { return __awaiter(void 0, void 0, void 0, function () {\n                                                var recalculateState, finalPartialState, tempState, event_1;\n                                                return __generator(this, function (_a) {\n                                                    switch (_a.label) {\n                                                        case 0: return [4 /*yield*/, (0, recalculate_1[\"default\"])(state)];\n                                                        case 1:\n                                                            recalculateState = _a.sent();\n                                                            (0, handleAnchors_1[\"default\"])(contentPlaceholderNode, state);\n                                                            (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                                                            finalPartialState = __assign(__assign({}, recalculateState), { layout: viewerSettings_1.LayoutTypes.Flow, scrollMode: state.scrollMode, slug: action.slug, contentSlug: action.contentSlug, chapterNumber: action.chapterNumber, cssLoaded: true });\n                                                            if (replace) {\n                                                                finalPartialState.dynamicStyleNode = newLink;\n                                                            }\n                                                            if (action.goToEnd) {\n                                                                tempState = recalculateState;\n                                                                if (state.scrollMode === 'horizontal') {\n                                                                    finalPartialState.forceScroll =\n                                                                        tempState.lastPosition - (tempState.lastPosition % tempState.containerWidth);\n                                                                }\n                                                                else {\n                                                                    finalPartialState.forceScroll = Math.max(tempState.totalHeight + config.paddingTop - tempState.containerHeight, 0);\n                                                                }\n                                                            }\n                                                            resolve(finalPartialState);\n                                                            if (state.config.eventHandler) {\n                                                                event_1 = {\n                                                                    type: 'contentLoaded',\n                                                                    contentSlug: action.contentSlug,\n                                                                    slug: action.slug,\n                                                                    productSlug: state.productSlug\n                                                                };\n                                                                state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                                                                    var _a = ex, stack = _a.stack, message = _a.message;\n                                                                    console.error('Error at event handler', stack || message);\n                                                                });\n                                                            }\n                                                            return [4 /*yield*/, (0, redrawUserHighlights_1[\"default\"])(state)];\n                                                        case 2:\n                                                            _a.sent();\n                                                            setTimeout(function () {\n                                                                (0, search_1.highlightTerms)(state.searchTerms);\n                                                            }, 0);\n                                                            return [2 /*return*/];\n                                                    }\n                                                });\n                                            }); };\n                                            var onStylesLoad = function () {\n                                                newLink.removeEventListener('load', onStylesLoad);\n                                                newLink.removeEventListener('error', onStylesLoad);\n                                                var checkFonts = function () {\n                                                    window.requestAnimationFrame(function () {\n                                                        window.requestAnimationFrame(function () {\n                                                            var checkStatus = function () {\n                                                                if (document.fonts.status === 'loaded') {\n                                                                    done()[\"catch\"](function (ex) {\n                                                                        var _a = ex, stack = _a.stack, message = _a.message;\n                                                                        console.error('Error at styles loaded', stack || message);\n                                                                    });\n                                                                }\n                                                                else {\n                                                                    setTimeout(checkStatus, 16);\n                                                                }\n                                                            };\n                                                            checkStatus();\n                                                        });\n                                                    });\n                                                };\n                                                var images = contentPlaceholderNode.querySelectorAll('img');\n                                                if (!images.length) {\n                                                    checkFonts();\n                                                    return;\n                                                }\n                                                Promise.all(Array.from(images).map(function (i) {\n                                                    return (0, checkImagesHeight_1[\"default\"])([i], state);\n                                                }))\n                                                    .then(checkFonts)[\"catch\"](function (ex) {\n                                                    var _a = ex, stack = _a.stack, message = _a.message;\n                                                    console.error('Error checking images', stack || message);\n                                                });\n                                            };\n                                            if (!action.cssURL || action.cssURL === dynamicStyleNode.href) {\n                                                replace = false;\n                                                onStylesLoad();\n                                                return;\n                                            }\n                                            newLink.rel = 'stylesheet';\n                                            newLink.type = 'text/css';\n                                            newLink.addEventListener('load', onStylesLoad);\n                                            newLink.addEventListener('error', onStylesLoad);\n                                            dynamicStyleNode.removeEventListener('load', onStylesLoad);\n                                            dynamicStyleNode.removeEventListener('error', onStylesLoad);\n                                            dynamicStyleNode.replaceWith(newLink);\n                                            newLink.href = action.cssURL;\n                                        });\n                                    });\n                                });\n                            }\n                            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                                var contentsBySlug = state.contentsBySlug;\n                                var content = contentsBySlug.get(action.contentSlug);\n                                if (!content) {\n                                    console.warn(\"Something went wrong, no content for slug: \".concat(action.contentSlug));\n                                }\n                                var container_1 = content.container;\n                                content.html = action.htmlContent;\n                                content.cssURL = action.cssURL;\n                                container_1.classList.add('olectio-loading');\n                                container_1.innerHTML = action.htmlContent;\n                                setTimeout(function () {\n                                    var done = function () {\n                                        container_1.classList.remove('olectio-loading');\n                                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                                        (0, handleAnchors_1[\"default\"])(container_1, state);\n                                        var finalPartialState = {\n                                            slug: action.slug,\n                                            cssLoaded: true\n                                        };\n                                        if (state.loadingContent === action.contentSlug) {\n                                            (0, state_1.updateState)({ loadingContent: '' });\n                                            (0, loadContentsInBackground_1[\"default\"])(state);\n                                        }\n                                        resolve(finalPartialState);\n                                        if (state.config.eventHandler) {\n                                            var event_2 = {\n                                                type: 'contentLoaded',\n                                                contentSlug: action.contentSlug,\n                                                slug: action.slug,\n                                                productSlug: state.productSlug\n                                            };\n                                            state.config.eventHandler(event_2)[\"catch\"](function (ex) {\n                                                var _a = ex, stack = _a.stack, message = _a.message;\n                                                console.error('Error at event handler', stack || message);\n                                            });\n                                        }\n                                        setTimeout(function () {\n                                            (0, search_1.highlightTerms)(state.searchTerms);\n                                        }, 0);\n                                    };\n                                    var checkFonts = function () {\n                                        dynamicStyleNode.removeEventListener('load', checkFonts);\n                                        setTimeout(function () {\n                                            var checkStatus = function () {\n                                                if (document.fonts.status === 'loaded') {\n                                                    done();\n                                                }\n                                                else {\n                                                    setTimeout(checkStatus, 16);\n                                                }\n                                            };\n                                            checkStatus();\n                                        }, 0);\n                                    };\n                                    if (!action.cssURL) {\n                                        checkFonts();\n                                        return;\n                                    }\n                                    (0, handleFlowCssAndLoad_1[\"default\"])(action.cssURL, checkFonts);\n                                }, 0);\n                            }\n                        })];\n            }\n        });\n    });\n};\nexports[\"default\"] = appendNewContent;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/appendNewContent.js?");

/***/ }),

/***/ "./dist/lib/actions/clearSelection.js":
/*!********************************************!*\
  !*** ./dist/lib/actions/clearSelection.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar clearSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/clearSelection */ \"./dist/utils/highlights/clearSelection.js\"));\n// eslint-disable-next-line @typescript-eslint/require-await\nvar clearSelection = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            (0, clearSelection_1[\"default\"])(state);\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = clearSelection;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/clearSelection.js?");

/***/ }),

/***/ "./dist/lib/actions/decreaseFontSize.js":
/*!**********************************************!*\
  !*** ./dist/lib/actions/decreaseFontSize.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar setFontSize_1 = __webpack_require__(/*! ./setFontSize */ \"./dist/lib/actions/setFontSize.js\");\n/**\n * Decreases font size (if min is not reached) by the step value provided in config\n * @param context.state Viewer state\n * @returns Update state\n */\nvar decreaseFontSize = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var newSize;\n        return __generator(this, function (_b) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                throw new Error('Action not allowed in fixed mode');\n            }\n            newSize = Math.max(state.fontSize - state.config.fontSize.step, state.config.fontSize.min);\n            if (newSize !== state.fontSize) {\n                return [2 /*return*/, (0, setFontSize_1.setSize)(newSize, state)];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = decreaseFontSize;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/decreaseFontSize.js?");

/***/ }),

/***/ "./dist/lib/actions/drawHighlights.js":
/*!********************************************!*\
  !*** ./dist/lib/actions/drawHighlights.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar model_1 = __webpack_require__(/*! ../../model */ \"./dist/model/index.js\");\nvar getRangesFromSelectionRanges_1 = __importDefault(__webpack_require__(/*! ../../utils/getRangesFromSelectionRanges */ \"./dist/utils/getRangesFromSelectionRanges.js\"));\nvar highlights_1 = __webpack_require__(/*! ../../utils/highlights */ \"./dist/utils/highlights/index.js\");\nvar removeLayerHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeLayerHighlights */ \"./dist/utils/highlights/removeLayerHighlights.js\"));\n// eslint-disable-next-line @typescript-eslint/require-await\nvar drawHighlights = function (_a) {\n    var action = _a.action, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var layer, i, l, highlights, key, selectionRange, ranges, existing, existingHighlight, domHighlights;\n        return __generator(this, function (_b) {\n            if (!state.cssLoaded || !state.wrapperReady) {\n                setTimeout(function () {\n                    drawHighlights({ action: action, state: state })[\"catch\"](function (ex) {\n                        var _a = ex, stack = _a.stack, message = _a.message;\n                        console.error('Error at drawHighlights', stack || message);\n                    });\n                }, 64);\n                return [2 /*return*/, {}];\n            }\n            layer = state.highlightersLayers.get(action.key);\n            if (!layer) {\n                layer = document.createElement('div');\n                layer.classList.add('olectio-highlights-layer');\n                layer.setAttribute('style', \"--highlighter-color: \".concat(action.color));\n                state.olectioViewerNode.appendChild(layer);\n                state.highlightersLayers.set(action.key, layer);\n            }\n            if (action.clear) {\n                (0, removeLayerHighlights_1[\"default\"])(layer);\n            }\n            for (i = 0, l = action.highlights.length; i < l; i++) {\n                highlights = action.highlights[i];\n                key = highlights.key, selectionRange = __rest(highlights, [\"key\"]);\n                ranges = (0, getRangesFromSelectionRanges_1[\"default\"])([selectionRange]);\n                existing = false;\n                if (key) {\n                    existingHighlight = layer.querySelectorAll(\"[data-key=\\\"\".concat(key, \"\\\"\"));\n                    if (existingHighlight.length) {\n                        existing = true;\n                        if (state.layout === model_1.LayoutTypes.Flow) {\n                            existingHighlight.forEach(function (item) { return item.remove(); });\n                        }\n                    }\n                    state.currentUserHighlights.set(key, __assign(__assign({}, selectionRange), { key: key, highlighterKey: action.key, color: action.color }));\n                }\n                if (!existing && ranges.length) {\n                    domHighlights = (0, highlights_1.drawHighlights)(layer, ranges, true, key);\n                    if (domHighlights.length) {\n                        state.currentUserDomHighlights.set(key, domHighlights);\n                    }\n                }\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = drawHighlights;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/drawHighlights.js?");

/***/ }),

/***/ "./dist/lib/actions/highlightSearchTerms.js":
/*!**************************************************!*\
  !*** ./dist/lib/actions/highlightSearchTerms.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar search_1 = __webpack_require__(/*! ../../utils/highlights/search */ \"./dist/utils/highlights/search/index.js\");\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\n/**\n * Highlights search terms in content\n * @param state.action Viewer action\n * @returns Partial state update\n */\n// eslint-disable-next-line @typescript-eslint/require-await\nvar highlightSearchTerms = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var terms;\n        return __generator(this, function (_b) {\n            terms = action.terms;\n            (0, search_1.clean)(state);\n            (0, state_1.updateState)({ searchRanges: [] });\n            (0, search_1.highlightTerms)(terms);\n            return [2 /*return*/, { searchTerms: terms }];\n        });\n    });\n};\nexports[\"default\"] = highlightSearchTerms;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/highlightSearchTerms.js?");

/***/ }),

/***/ "./dist/lib/actions/increaseFontSize.js":
/*!**********************************************!*\
  !*** ./dist/lib/actions/increaseFontSize.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar setFontSize_1 = __webpack_require__(/*! ./setFontSize */ \"./dist/lib/actions/setFontSize.js\");\n/**\n * Increases font size (if max is not reached) by the step value provided in config\n * @param context.state Viewer state\n * @returns Update state\n */\nvar increaseFontSize = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var newSize;\n        return __generator(this, function (_b) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                throw new Error('Action not allowed in fixed mode');\n            }\n            newSize = Math.min(state.fontSize + state.config.fontSize.step, state.config.fontSize.max);\n            if (newSize !== state.fontSize) {\n                return [2 /*return*/, (0, setFontSize_1.setSize)(newSize, state)];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = increaseFontSize;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/increaseFontSize.js?");

/***/ }),

/***/ "./dist/lib/actions/moveNext.js":
/*!**************************************!*\
  !*** ./dist/lib/actions/moveNext.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar model_1 = __webpack_require__(/*! ../../model */ \"./dist/model/index.js\");\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar navigateToNextChapter_1 = __importDefault(__webpack_require__(/*! ./navigateToNextChapter */ \"./dist/lib/actions/navigateToNextChapter.js\"));\nvar moveNext = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var scrollLeft, lastPosition, totalColumnWidth, columnsInViewport, slugByPosition, movementWidth, rawPosition, position, desiredPosition, contentSlug, contentsBySlug, content;\n        return __generator(this, function (_b) {\n            if (state.scrollMode !== 'fixed') {\n                if (state.layout === model_1.LayoutTypes.Flow) {\n                    if (state.scrollMode === 'horizontal') {\n                        scrollLeft = state.scrollLeft, lastPosition = state.lastPosition, totalColumnWidth = state.totalColumnWidth, columnsInViewport = state.columnsInViewport, slugByPosition = state.slugByPosition;\n                        movementWidth = totalColumnWidth * columnsInViewport;\n                        rawPosition = (scrollLeft * -1) / state.scale;\n                        position = Math.round(rawPosition / movementWidth) * movementWidth;\n                        desiredPosition = position + movementWidth;\n                        if (desiredPosition > lastPosition) {\n                            return [2 /*return*/, (0, navigateToNextChapter_1[\"default\"])({\n                                    action: {\n                                        type: 'navigateToNextChapter'\n                                    },\n                                    state: state\n                                })];\n                        }\n                        if (slugByPosition.has(desiredPosition)) {\n                            (0, state_1.updateState)({\n                                animateToScroll: desiredPosition\n                            });\n                        }\n                    }\n                    if (state.scrollMode === 'vertical') {\n                        return [2 /*return*/, (0, navigateToNextChapter_1[\"default\"])({\n                                action: {\n                                    type: 'navigateToNextChapter'\n                                },\n                                state: state\n                            })];\n                    }\n                }\n                if (state.layout === model_1.LayoutTypes.Fixed) {\n                    contentSlug = state.contentSlug, contentsBySlug = state.contentsBySlug;\n                    content = contentsBySlug.get(contentSlug);\n                    if (content && content.next) {\n                        (0, state_1.updateState)({\n                            contentSlug: content.next\n                        });\n                    }\n                }\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = moveNext;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/moveNext.js?");

/***/ }),

/***/ "./dist/lib/actions/movePrev.js":
/*!**************************************!*\
  !*** ./dist/lib/actions/movePrev.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar model_1 = __webpack_require__(/*! ../../model */ \"./dist/model/index.js\");\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar navigateToPreviousChapter_1 = __importDefault(__webpack_require__(/*! ./navigateToPreviousChapter */ \"./dist/lib/actions/navigateToPreviousChapter.js\"));\nvar movePrev = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var scrollLeft, totalColumnWidth, columnsInViewport, slugByPosition, movementWidth, rawPosition, position, desiredPosition, contentSlug, contentsBySlug, content;\n        return __generator(this, function (_b) {\n            if (state.scrollMode !== 'fixed') {\n                if (state.layout === model_1.LayoutTypes.Flow) {\n                    if (state.scrollMode === 'horizontal') {\n                        scrollLeft = state.scrollLeft, totalColumnWidth = state.totalColumnWidth, columnsInViewport = state.columnsInViewport, slugByPosition = state.slugByPosition;\n                        movementWidth = totalColumnWidth * columnsInViewport;\n                        rawPosition = (scrollLeft * -1) / state.scale;\n                        position = Math.round(rawPosition / movementWidth) * movementWidth;\n                        if (position === 0) {\n                            return [2 /*return*/, (0, navigateToPreviousChapter_1[\"default\"])({\n                                    action: {\n                                        type: 'navigateToPreviousChapter',\n                                        goToEnd: true\n                                    },\n                                    state: state\n                                })];\n                        }\n                        desiredPosition = position - movementWidth;\n                        if (slugByPosition.has(desiredPosition)) {\n                            (0, state_1.updateState)({\n                                animateToScroll: desiredPosition\n                            });\n                        }\n                    }\n                    if (state.scrollMode === 'vertical') {\n                        return [2 /*return*/, (0, navigateToPreviousChapter_1[\"default\"])({\n                                action: {\n                                    type: 'navigateToPreviousChapter'\n                                },\n                                state: state\n                            })];\n                    }\n                }\n                if (state.layout === model_1.LayoutTypes.Fixed) {\n                    contentSlug = state.contentSlug, contentsBySlug = state.contentsBySlug;\n                    content = contentsBySlug.get(contentSlug);\n                    if (content && content.prev) {\n                        (0, state_1.updateState)({\n                            contentSlug: content.prev\n                        });\n                    }\n                }\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = movePrev;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/movePrev.js?");

/***/ }),

/***/ "./dist/lib/actions/navigateToNextChapter.js":
/*!***************************************************!*\
  !*** ./dist/lib/actions/navigateToNextChapter.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\n// eslint-disable-next-line @typescript-eslint/require-await\nvar navigateToNextChapter = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var currentContentSlug, event_1;\n        return __generator(this, function (_b) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                throw new Error('Action not allowed in fixed mode');\n            }\n            if (state.config.eventHandler) {\n                currentContentSlug = Array.from(state.positionBySlug.keys()).slice(-1)[0];\n                event_1 = {\n                    type: 'loadNextChapter',\n                    slug: state.slug,\n                    productSlug: state.productSlug,\n                    currentContentSlug: currentContentSlug\n                };\n                state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                    var _a = ex, stack = _a.stack, message = _a.message;\n                    console.error('Error at event handler', stack || message);\n                });\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = navigateToNextChapter;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/navigateToNextChapter.js?");

/***/ }),

/***/ "./dist/lib/actions/navigateToPage.js":
/*!********************************************!*\
  !*** ./dist/lib/actions/navigateToPage.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar navigateToContentSlug_1 = __importDefault(__webpack_require__(/*! ../../utils/navigateToContentSlug */ \"./dist/utils/navigateToContentSlug.js\"));\n/**\n * Navigate to a specific page (by label)\n * @param context.state Viewer state\n * @param context.action Viewer action\n * @returns\n */\n// eslint-disable-next-line @typescript-eslint/require-await\nvar navigateToPage = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            if (action.contentSlug !== state.contentSlug) {\n                (0, navigateToContentSlug_1[\"default\"])(action.contentSlug);\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = navigateToPage;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/navigateToPage.js?");

/***/ }),

/***/ "./dist/lib/actions/navigateToPreviousChapter.js":
/*!*******************************************************!*\
  !*** ./dist/lib/actions/navigateToPreviousChapter.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar navigateToPreviousChapter = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var currentContentSlug, event_1;\n        return __generator(this, function (_b) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                throw new Error('Action not allowed in fixed mode');\n            }\n            if (state.config.eventHandler) {\n                currentContentSlug = Array.from(state.positionBySlug.keys())[0];\n                event_1 = {\n                    type: 'loadPreviousChapter',\n                    slug: state.slug,\n                    productSlug: state.productSlug,\n                    currentContentSlug: currentContentSlug,\n                    goToEnd: action.goToEnd\n                };\n                state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                    var _a = ex, stack = _a.stack, message = _a.message;\n                    console.error('Error at event handler', stack || message);\n                });\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = navigateToPreviousChapter;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/navigateToPreviousChapter.js?");

/***/ }),

/***/ "./dist/lib/actions/removeAllOnChangeEvents.js":
/*!*****************************************************!*\
  !*** ./dist/lib/actions/removeAllOnChangeEvents.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar stateChangeEvents_1 = __webpack_require__(/*! ../state/stateChangeEvents */ \"./dist/lib/state/stateChangeEvents.js\");\n/**\n * Removes all event listener stop notifying events\n * typically when the user interface is unmounted.\n * This method must only be used by the API, and not by the viewer\n * @param state.action RemoveOnChangeEven action\n * @returns\n */\nvar removeAllOnChangeEvents = function () { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        (0, stateChangeEvents_1.removeAllChangeEvents)();\n        return [2 /*return*/, {}];\n    });\n}); };\nexports[\"default\"] = removeAllOnChangeEvents;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/removeAllOnChangeEvents.js?");

/***/ }),

/***/ "./dist/lib/actions/removeHighlights.js":
/*!**********************************************!*\
  !*** ./dist/lib/actions/removeHighlights.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\n// eslint-disable-next-line @typescript-eslint/require-await\nvar removeHighlights = function (_a) {\n    var action = _a.action, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            action.keys.forEach(function (key) {\n                var highlights = state.currentUserDomHighlights.get(key);\n                if (highlights) {\n                    highlights.forEach(function (hl) {\n                        hl.remove();\n                    });\n                }\n                state.currentUserHighlights[\"delete\"](key);\n                state.currentUserDomHighlights[\"delete\"](key);\n            });\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = removeHighlights;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/removeHighlights.js?");

/***/ }),

/***/ "./dist/lib/actions/removeNotesDialog.js":
/*!***********************************************!*\
  !*** ./dist/lib/actions/removeNotesDialog.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar removeNotesDialog_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeNotesDialog */ \"./dist/utils/highlights/removeNotesDialog.js\"));\n// eslint-disable-next-line @typescript-eslint/require-await\nvar removeNotesDialog = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            (0, removeNotesDialog_1[\"default\"])(state);\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = removeNotesDialog;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/removeNotesDialog.js?");

/***/ }),

/***/ "./dist/lib/actions/removeOnChangeEvent.js":
/*!*************************************************!*\
  !*** ./dist/lib/actions/removeOnChangeEvent.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar stateChangeEvents_1 = __webpack_require__(/*! ../state/stateChangeEvents */ \"./dist/lib/state/stateChangeEvents.js\");\n/**\n * Removes event that fires when the viewer state changes\n * this method must only be used by the API, and not by the viewer\n * @param state.action RemoveOnChangeEven action\n * @returns\n */\nvar removeOnChangeEvent = function (_a) {\n    var action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            (0, stateChangeEvents_1.removeOnChangeEventListener)(action.propertyName, action.event);\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = removeOnChangeEvent;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/removeOnChangeEvent.js?");

/***/ }),

/***/ "./dist/lib/actions/removeSearchHighlights.js":
/*!****************************************************!*\
  !*** ./dist/lib/actions/removeSearchHighlights.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar removeLayerHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeLayerHighlights */ \"./dist/utils/highlights/removeLayerHighlights.js\"));\n// eslint-disable-next-line @typescript-eslint/require-await\nvar removeSearchHighlights = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var searchTermsHighlightsNode, contentWrapperNode;\n        return __generator(this, function (_b) {\n            searchTermsHighlightsNode = state.searchTermsHighlightsNode, contentWrapperNode = state.contentWrapperNode;\n            if (searchTermsHighlightsNode) {\n                (0, removeLayerHighlights_1[\"default\"])(searchTermsHighlightsNode);\n            }\n            if (contentWrapperNode) {\n                contentWrapperNode.querySelectorAll('[data-highlighted]').forEach(function (element) {\n                    element.setAttribute('data-highlighted', '');\n                });\n            }\n            return [2 /*return*/, {\n                    searchRanges: [],\n                    searchTerms: []\n                }];\n        });\n    });\n};\nexports[\"default\"] = removeSearchHighlights;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/removeSearchHighlights.js?");

/***/ }),

/***/ "./dist/lib/actions/removeSelectionMenu.js":
/*!*************************************************!*\
  !*** ./dist/lib/actions/removeSelectionMenu.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar removeSelectionMenu_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeSelectionMenu */ \"./dist/utils/highlights/removeSelectionMenu.js\"));\n// eslint-disable-next-line @typescript-eslint/require-await\nvar removeSelectionMenu = function () { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        (0, removeSelectionMenu_1[\"default\"])();\n        return [2 /*return*/, {\n                selectionMenu: undefined\n            }];\n    });\n}); };\nexports[\"default\"] = removeSelectionMenu;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/removeSelectionMenu.js?");

/***/ }),

/***/ "./dist/lib/actions/resize.js":
/*!************************************!*\
  !*** ./dist/lib/actions/resize.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar model_1 = __webpack_require__(/*! ../../model */ \"./dist/model/index.js\");\nvar highlights_1 = __webpack_require__(/*! ../../utils/highlights */ \"./dist/utils/highlights/index.js\");\nvar redrawUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/redrawUserHighlights */ \"./dist/utils/highlights/redrawUserHighlights.js\"));\nvar removeUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeUserHighlights */ \"./dist/utils/highlights/removeUserHighlights.js\"));\nvar search_1 = __webpack_require__(/*! ../../utils/highlights/search */ \"./dist/utils/highlights/search/index.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar recalculate_1 = __importDefault(__webpack_require__(/*! ../../viewer/recalculate */ \"./dist/viewer/recalculate.js\"));\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\n/**\n * Resize action\n * @param context.state Viewer state\n */\nvar resize = function (_a) {\n    var state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var recalculateUpdate, olectioContainerNode, _b, containerWidth, containerHeight, fitMode;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    if (!(state.layout === model_1.LayoutTypes.Flow)) return [3 /*break*/, 3];\n                    (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n                    (0, search_1.clean)(state);\n                    (0, removeUserHighlights_1[\"default\"])(state);\n                    return [4 /*yield*/, (0, recalculate_1[\"default\"])(state)];\n                case 1:\n                    recalculateUpdate = _c.sent();\n                    if (recalculateUpdate.recalculating === false) {\n                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                    }\n                    if (state.searchRanges.length && state.searchTermsHighlightsNode) {\n                        (0, highlights_1.drawHighlights)(state.searchTermsHighlightsNode, state.searchRanges);\n                    }\n                    return [4 /*yield*/, (0, redrawUserHighlights_1[\"default\"])(state)];\n                case 2:\n                    _c.sent();\n                    return [2 /*return*/, recalculateUpdate];\n                case 3:\n                    if (state.layout === model_1.LayoutTypes.Fixed) {\n                        olectioContainerNode = state.olectioContainerNode;\n                        if (olectioContainerNode) {\n                            _b = olectioContainerNode.getBoundingClientRect(), containerWidth = _b.width, containerHeight = _b.height;\n                            (0, state_1.updateState)({ containerWidth: containerWidth, containerHeight: containerHeight });\n                            fitMode = state.fitMode;\n                            if (fitMode) {\n                                (0, state_1.updateState)({ fitMode: undefined });\n                                (0, state_1.updateState)({ fitMode: fitMode });\n                            }\n                        }\n                    }\n                    return [2 /*return*/, {}];\n            }\n        });\n    });\n};\nexports[\"default\"] = resize;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/resize.js?");

/***/ }),

/***/ "./dist/lib/actions/setContentsInfo.js":
/*!*********************************************!*\
  !*** ./dist/lib/actions/setContentsInfo.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar processFixedContents_1 = __importDefault(__webpack_require__(/*! ../../utils/processFixedContents */ \"./dist/utils/processFixedContents.js\"));\n/**\n * Sets contents info and setups needed DOM elements\n * @param context.state Viewer state\n * @param context.action Viewer action\n * @returns Partial state update\n */\nvar setContentsInfo = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n                throw new Error('Action not allowed in flow mode');\n            }\n            return [2 /*return*/, (0, processFixedContents_1[\"default\"])(action.info, state)];\n        });\n    });\n};\nexports[\"default\"] = setContentsInfo;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setContentsInfo.js?");

/***/ }),

/***/ "./dist/lib/actions/setDebugViewerSafeArea.js":
/*!****************************************************!*\
  !*** ./dist/lib/actions/setDebugViewerSafeArea.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\n/**\n * Draws a red border around the viewer\n * @param context.action Viewer action\n * @returns state update\n */\n// eslint-disable-next-line @typescript-eslint/require-await\nvar setDebugViewerSafeArea = function (_a) {\n    var action = _a.action, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var areas, safeAreaReadMode, safeAreaUIMode;\n        return __generator(this, function (_b) {\n            if (action.value && state.olectioContainerNode) {\n                areas = document.getElementsByClassName('olectio-viewer-safe-area');\n                if (!areas.length) {\n                    safeAreaReadMode = document.createElement('div');\n                    safeAreaReadMode.classList.add('olectio-viewer-safe-area', 'olectio-read-mode-safe');\n                    safeAreaUIMode = document.createElement('div');\n                    safeAreaUIMode.classList.add('olectio-viewer-safe-area', 'olectio-ui-mode-safe');\n                    state.olectioContainerNode.appendChild(safeAreaReadMode);\n                    state.olectioContainerNode.appendChild(safeAreaUIMode);\n                }\n            }\n            (0, setCSSProperty_1[\"default\"])('debug-viewer-safe-area', \"\".concat(action.value ? 1 : 0));\n            return [2 /*return*/, {\n                    debugViewerSafeArea: action.value\n                }];\n        });\n    });\n};\nexports[\"default\"] = setDebugViewerSafeArea;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setDebugViewerSafeArea.js?");

/***/ }),

/***/ "./dist/lib/actions/setFitMode.js":
/*!****************************************!*\
  !*** ./dist/lib/actions/setFitMode.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar model_1 = __webpack_require__(/*! ../../model */ \"./dist/model/index.js\");\nvar getScrollFromContentSlug_1 = __importDefault(__webpack_require__(/*! ../animation/getScrollFromContentSlug */ \"./dist/lib/animation/getScrollFromContentSlug.js\"));\n// eslint-disable-next-line @typescript-eslint/require-await\nvar setFitMode = function (_a) {\n    var _b = _a.action, fitMode = _b.fitMode, center = _b.center, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var partialState;\n        var _c;\n        return __generator(this, function (_d) {\n            if (state.layout === model_1.LayoutTypes.Fixed) {\n                partialState = { fitMode: fitMode };\n                if (center) {\n                    partialState.forceScroll = -((_c = (0, getScrollFromContentSlug_1[\"default\"])(state)) !== null && _c !== void 0 ? _c : 0);\n                }\n                return [2 /*return*/, partialState];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = setFitMode;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setFitMode.js?");

/***/ }),

/***/ "./dist/lib/actions/setFontFamily.js":
/*!*******************************************!*\
  !*** ./dist/lib/actions/setFontFamily.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar highlights_1 = __webpack_require__(/*! ../../utils/highlights */ \"./dist/utils/highlights/index.js\");\nvar clearSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/clearSelection */ \"./dist/utils/highlights/clearSelection.js\"));\nvar drawExtensors_1 = __webpack_require__(/*! ../../utils/highlights/drawExtensors */ \"./dist/utils/highlights/drawExtensors.js\");\nvar redrawUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/redrawUserHighlights */ \"./dist/utils/highlights/redrawUserHighlights.js\"));\nvar removeNotesDialog_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeNotesDialog */ \"./dist/utils/highlights/removeNotesDialog.js\"));\nvar removeSelectionMenu_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeSelectionMenu */ \"./dist/utils/highlights/removeSelectionMenu.js\"));\nvar removeUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeUserHighlights */ \"./dist/utils/highlights/removeUserHighlights.js\"));\nvar search_1 = __webpack_require__(/*! ../../utils/highlights/search */ \"./dist/utils/highlights/search/index.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar recalculate_1 = __importDefault(__webpack_require__(/*! ../../viewer/recalculate */ \"./dist/viewer/recalculate.js\"));\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar securityTime = 10000;\n/**\n * Sets font family to provided value and recalculates\n * @param context.state  Viewer state\n * @param context.action  Viewer action, containing desired new font family\n * @returns State update\n */\nvar setFontFamily = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var fontFamily;\n        return __generator(this, function (_b) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                throw new Error('Action not allowed in fixed mode');\n            }\n            fontFamily = action.fontFamily;\n            if (state.config.availableFontFamilies.indexOf(fontFamily) === -1) {\n                throw new Error('Desired font family is not among the available font families provided in config');\n            }\n            if (fontFamily !== state.fontFamily) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var securityTimeout = setTimeout(function () {\n                            reject(new Error(\"Couldn't resolve font family change and font load after \".concat(securityTime / 1000, \" seconds\")));\n                        }, securityTime);\n                        var changeFontFamily = function () { return __awaiter(void 0, void 0, void 0, function () {\n                            var newState, recalculateUpdate;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        clearTimeout(securityTimeout);\n                                        (0, state_1.updateState)({ fontFamily: fontFamily });\n                                        newState = (0, state_1.getState)();\n                                        return [4 /*yield*/, (0, recalculate_1[\"default\"])(newState)];\n                                    case 1:\n                                        recalculateUpdate = _a.sent();\n                                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                                        resolve(__assign(__assign({}, recalculateUpdate), { layout: state.layout, scrollMode: state.scrollMode, fontFamily: fontFamily }));\n                                        return [4 /*yield*/, (0, redrawUserHighlights_1[\"default\"])(state)];\n                                    case 2:\n                                        _a.sent();\n                                        if (state.searchRanges.length && state.searchTermsHighlightsNode) {\n                                            (0, highlights_1.drawHighlights)(state.searchTermsHighlightsNode, state.searchRanges);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); };\n                        var checkFonts = function () {\n                            if (document.fonts.status === 'loaded') {\n                                changeFontFamily()[\"catch\"](function (ex) {\n                                    var _a = ex, stack = _a.stack, message = _a.message;\n                                    console.error('Error changing font family', stack || message);\n                                });\n                                return;\n                            }\n                            document.fonts.onloadingdone = function () {\n                                document.fonts.onloadingdone = null;\n                                changeFontFamily()[\"catch\"](function (ex) {\n                                    var _a = ex, stack = _a.stack, message = _a.message;\n                                    console.error('Error changing font family', stack || message);\n                                });\n                            };\n                        };\n                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n                        (0, search_1.clean)(state);\n                        (0, clearSelection_1[\"default\"])(state);\n                        (0, drawExtensors_1.removeExtensors)(state);\n                        (0, removeSelectionMenu_1[\"default\"])(state);\n                        (0, removeNotesDialog_1[\"default\"])(state);\n                        (0, removeUserHighlights_1[\"default\"])(state);\n                        (0, setCSSProperty_1[\"default\"])('font-family', fontFamily);\n                        window.requestAnimationFrame(function () {\n                            window.requestAnimationFrame(checkFonts);\n                        });\n                    })];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = setFontFamily;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setFontFamily.js?");

/***/ }),

/***/ "./dist/lib/actions/setFontSize.js":
/*!*****************************************!*\
  !*** ./dist/lib/actions/setFontSize.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.setSize = void 0;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar highlights_1 = __webpack_require__(/*! ../../utils/highlights */ \"./dist/utils/highlights/index.js\");\nvar clearSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/clearSelection */ \"./dist/utils/highlights/clearSelection.js\"));\nvar drawExtensors_1 = __webpack_require__(/*! ../../utils/highlights/drawExtensors */ \"./dist/utils/highlights/drawExtensors.js\");\nvar redrawUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/redrawUserHighlights */ \"./dist/utils/highlights/redrawUserHighlights.js\"));\nvar removeNotesDialog_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeNotesDialog */ \"./dist/utils/highlights/removeNotesDialog.js\"));\nvar removeSelectionMenu_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeSelectionMenu */ \"./dist/utils/highlights/removeSelectionMenu.js\"));\nvar removeUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeUserHighlights */ \"./dist/utils/highlights/removeUserHighlights.js\"));\nvar search_1 = __webpack_require__(/*! ../../utils/highlights/search */ \"./dist/utils/highlights/search/index.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar recalculate_1 = __importDefault(__webpack_require__(/*! ../../viewer/recalculate */ \"./dist/viewer/recalculate.js\"));\n/**\n * Sets font size to provided value and recalculates\n * @param size New font size\n * @param state Viewer state\n * @returns Update state\n */\nvar setSize = function (size, state) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            throw new Error('Action not allowed in fixed mode');\n        }\n        return [2 /*return*/, new Promise(function (resolve) {\n                (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n                (0, search_1.clean)(state);\n                (0, clearSelection_1[\"default\"])(state);\n                (0, drawExtensors_1.removeExtensors)(state);\n                (0, removeSelectionMenu_1[\"default\"])(state);\n                (0, removeNotesDialog_1[\"default\"])(state);\n                (0, removeUserHighlights_1[\"default\"])(state);\n                (0, setCSSProperty_1[\"default\"])('font-size', \"\".concat(size, \"px\"));\n                (0, recalculate_1[\"default\"])(state)\n                    .then(function (recalculateUpdate) { return __awaiter(void 0, void 0, void 0, function () {\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                                resolve(__assign(__assign({}, recalculateUpdate), { layout: state.layout, scrollMode: state.scrollMode, fontSize: size }));\n                                return [4 /*yield*/, (0, redrawUserHighlights_1[\"default\"])(state)];\n                            case 1:\n                                _a.sent();\n                                if (state.searchRanges.length && state.searchTermsHighlightsNode) {\n                                    (0, highlights_1.drawHighlights)(state.searchTermsHighlightsNode, state.searchRanges);\n                                }\n                                return [2 /*return*/];\n                        }\n                    });\n                }); })[\"catch\"](function (ex) {\n                    var _a = ex, stack = _a.stack, message = _a.message;\n                    console.error('Error at recalculate', stack || message);\n                });\n            })];\n    });\n}); };\nexports.setSize = setSize;\n/**\n * Sets font size to specific provided value (after normalizing with max and min)\n * @param context.state Viewer state\n * @param context.action Viewer action, containing desired new font size\n * @returns Update state\n */\nvar setFontSize = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var _b, max, min, step, desiredSize, newSize;\n        return __generator(this, function (_c) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                throw new Error('Action not allowed in fixed mode');\n            }\n            _b = state.config.fontSize, max = _b.max, min = _b.min, step = _b.step;\n            desiredSize = step * Math.round(action.size / step);\n            newSize = Math.min(Math.max(desiredSize, min), max);\n            if (newSize !== state.fontSize) {\n                return [2 /*return*/, (0, exports.setSize)(newSize, state)];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = setFontSize;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setFontSize.js?");

/***/ }),

/***/ "./dist/lib/actions/setGapMode.js":
/*!****************************************!*\
  !*** ./dist/lib/actions/setGapMode.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar processFixedContents_1 = __importDefault(__webpack_require__(/*! ../../utils/processFixedContents */ \"./dist/utils/processFixedContents.js\"));\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar recalculateCurrentPage_1 = __importDefault(__webpack_require__(/*! ../animation/recalculateCurrentPage */ \"./dist/lib/animation/recalculateCurrentPage.js\"));\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar setGapMode = function (_a) {\n    var gapMode = _a.action.gapMode, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            return [2 /*return*/, new Promise(function (resolve) {\n                    (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n                    (0, state_1.updateState)({ gapMode: gapMode, avoidReset: true });\n                    var contentSlug = state.contentSlug;\n                    (0, processFixedContents_1[\"default\"])(state.fixedInfo, state)\n                        .then(function (partialUpdate) {\n                        var content = partialUpdate.contentsBySlug.get(contentSlug);\n                        (0, state_1.updateState)(partialUpdate);\n                        var scroll = state.scrollMode === 'horizontal' ? content.left : content.top;\n                        resolve({\n                            avoidReset: false,\n                            forceScroll: scroll\n                        });\n                        (0, recalculateCurrentPage_1[\"default\"])(state, scroll, true);\n                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                    })[\"catch\"](function (ex) {\n                        var _a = ex, stack = _a.stack, message = _a.message;\n                        console.error('Error processing fixed contents', stack || message);\n                    });\n                })];\n        });\n    });\n};\nexports[\"default\"] = setGapMode;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setGapMode.js?");

/***/ }),

/***/ "./dist/lib/actions/setHighlighterColor.js":
/*!*************************************************!*\
  !*** ./dist/lib/actions/setHighlighterColor.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\n// eslint-disable-next-line @typescript-eslint/require-await\nvar setHighlighterColor = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var highlightersLayers, currentUserHighlights, highlighterLayer, newUserHighlights;\n        return __generator(this, function (_b) {\n            highlightersLayers = state.highlightersLayers, currentUserHighlights = state.currentUserHighlights;\n            highlighterLayer = highlightersLayers.get(action.key);\n            if (highlighterLayer) {\n                highlighterLayer.setAttribute('style', \"--highlighter-color: #\".concat(action.color));\n            }\n            newUserHighlights = new Map();\n            currentUserHighlights.forEach(function (highlight, key) {\n                if (highlight.highlighterKey === action.key) {\n                    newUserHighlights.set(key, __assign(__assign({}, highlight), { color: \"#\".concat(action.color) }));\n                }\n                else {\n                    newUserHighlights.set(key, highlight);\n                }\n            });\n            return [2 /*return*/, {\n                    currentUserHighlights: newUserHighlights\n                }];\n        });\n    });\n};\nexports[\"default\"] = setHighlighterColor;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setHighlighterColor.js?");

/***/ }),

/***/ "./dist/lib/actions/setLineHeight.js":
/*!*******************************************!*\
  !*** ./dist/lib/actions/setLineHeight.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar model_1 = __webpack_require__(/*! ../../model */ \"./dist/model/index.js\");\nvar highlights_1 = __webpack_require__(/*! ../../utils/highlights */ \"./dist/utils/highlights/index.js\");\nvar clearSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/clearSelection */ \"./dist/utils/highlights/clearSelection.js\"));\nvar drawExtensors_1 = __webpack_require__(/*! ../../utils/highlights/drawExtensors */ \"./dist/utils/highlights/drawExtensors.js\");\nvar redrawUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/redrawUserHighlights */ \"./dist/utils/highlights/redrawUserHighlights.js\"));\nvar removeNotesDialog_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeNotesDialog */ \"./dist/utils/highlights/removeNotesDialog.js\"));\nvar removeSelectionMenu_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeSelectionMenu */ \"./dist/utils/highlights/removeSelectionMenu.js\"));\nvar removeUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeUserHighlights */ \"./dist/utils/highlights/removeUserHighlights.js\"));\nvar search_1 = __webpack_require__(/*! ../../utils/highlights/search */ \"./dist/utils/highlights/search/index.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar recalculate_1 = __importDefault(__webpack_require__(/*! ../../viewer/recalculate */ \"./dist/viewer/recalculate.js\"));\nvar setLineHeight = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            if (state.layout === model_1.LayoutTypes.Fixed) {\n                throw new Error('Action not allowed in fixed mode');\n            }\n            if (action.lineHeight !== state.lineHeight) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n                        (0, search_1.clean)(state);\n                        (0, clearSelection_1[\"default\"])(state);\n                        (0, drawExtensors_1.removeExtensors)(state);\n                        (0, removeSelectionMenu_1[\"default\"])(state);\n                        (0, removeNotesDialog_1[\"default\"])(state);\n                        (0, removeUserHighlights_1[\"default\"])(state);\n                        (0, setCSSProperty_1[\"default\"])('line-height', \"\".concat(action.lineHeight, \"em\"));\n                        (0, recalculate_1[\"default\"])(state)\n                            .then(function (recalculateUpdate) { return __awaiter(void 0, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                                        resolve(__assign(__assign({}, recalculateUpdate), { layout: state.layout, scrollMode: state.scrollMode, lineHeight: action.lineHeight }));\n                                        return [4 /*yield*/, (0, redrawUserHighlights_1[\"default\"])(state)];\n                                    case 1:\n                                        _a.sent();\n                                        if (state.searchRanges.length && state.searchTermsHighlightsNode) {\n                                            (0, highlights_1.drawHighlights)(state.searchTermsHighlightsNode, state.searchRanges);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })[\"catch\"](function (ex) {\n                            var _a = ex, stack = _a.stack, message = _a.message;\n                            console.error('Error at recalculate', stack || message);\n                        });\n                    })];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = setLineHeight;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setLineHeight.js?");

/***/ }),

/***/ "./dist/lib/actions/setLinkProps.js":
/*!******************************************!*\
  !*** ./dist/lib/actions/setLinkProps.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\n/**\n * Sets custom link info to override original info\n * @param context.state Viewer state\n * @param context.action Viewer action, containing link props\n * @returns\n */\n// eslint-disable-next-line @typescript-eslint/require-await\nvar setLinkProps = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var linksCustomProps, info;\n        return __generator(this, function (_b) {\n            linksCustomProps = state.linksCustomProps;\n            info = {\n                href: action.href\n            };\n            if (action.target) {\n                info.target = action.target;\n            }\n            linksCustomProps.set(action.link, info);\n            return [2 /*return*/, {\n                    linksCustomProps: linksCustomProps\n                }];\n        });\n    });\n};\nexports[\"default\"] = setLinkProps;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setLinkProps.js?");

/***/ }),

/***/ "./dist/lib/actions/setReadMode.js":
/*!*****************************************!*\
  !*** ./dist/lib/actions/setReadMode.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\n/**\n * Changes de Read Mode of the viewport\n * @param context.action.readModeActive will be true for read mode and false for UI mode\n * @returns Update state\n */\n// eslint-disable-next-line @typescript-eslint/require-await\nvar setReadMode = function (_a) {\n    var action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            return [2 /*return*/, ({\n                    readMode: action.readModeActive\n                })];\n        });\n    });\n};\nexports[\"default\"] = setReadMode;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setReadMode.js?");

/***/ }),

/***/ "./dist/lib/actions/setScrollMode.js":
/*!*******************************************!*\
  !*** ./dist/lib/actions/setScrollMode.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar highlights_1 = __webpack_require__(/*! ../../utils/highlights */ \"./dist/utils/highlights/index.js\");\nvar redrawUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/redrawUserHighlights */ \"./dist/utils/highlights/redrawUserHighlights.js\"));\nvar removeUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeUserHighlights */ \"./dist/utils/highlights/removeUserHighlights.js\"));\nvar search_1 = __webpack_require__(/*! ../../utils/highlights/search */ \"./dist/utils/highlights/search/index.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar recalculate_1 = __importDefault(__webpack_require__(/*! ../../viewer/recalculate */ \"./dist/viewer/recalculate.js\"));\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\n/**\n * Sets scroll mode to provided mode and recalculates\n * @param context.state  Viewer state\n * @param context.action  Viewer action, containing desired new font family\n * @returns State update\n */\nvar setScrollMode = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var scrollMode;\n        return __generator(this, function (_b) {\n            scrollMode = action.scrollMode;\n            if (state.scrollMode !== scrollMode) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n                        (0, removeUserHighlights_1[\"default\"])(state);\n                        (0, search_1.clean)(state);\n                        document.body.classList.remove(\"olectio-\".concat(state.scrollMode, \"-scroll\"));\n                        document.body.classList.add(\"olectio-\".concat(scrollMode, \"-scroll\"));\n                        (0, state_1.updateState)({ scrollMode: scrollMode });\n                        (0, recalculate_1[\"default\"])(state)\n                            .then(function (recalculateUpdate) { return __awaiter(void 0, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                                        resolve(__assign(__assign({}, recalculateUpdate), { layout: state.layout, scrollMode: scrollMode }));\n                                        (0, removeUserHighlights_1[\"default\"])(state);\n                                        return [4 /*yield*/, (0, redrawUserHighlights_1[\"default\"])(state)];\n                                    case 1:\n                                        _a.sent();\n                                        if (state.searchRanges.length && state.searchTermsHighlightsNode) {\n                                            (0, highlights_1.drawHighlights)(state.searchTermsHighlightsNode, state.searchRanges);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })[\"catch\"](function (ex) {\n                            var _a = ex, stack = _a.stack, message = _a.message;\n                            console.error('Error recalculating', stack || message);\n                        });\n                    })];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = setScrollMode;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setScrollMode.js?");

/***/ }),

/***/ "./dist/lib/actions/setTextAlign.js":
/*!******************************************!*\
  !*** ./dist/lib/actions/setTextAlign.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar highlights_1 = __webpack_require__(/*! ../../utils/highlights */ \"./dist/utils/highlights/index.js\");\nvar removeCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/removeCSSProperty */ \"./dist/utils/removeCSSProperty.js\"));\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar recalculate_1 = __importDefault(__webpack_require__(/*! ../../viewer/recalculate */ \"./dist/viewer/recalculate.js\"));\nvar search_1 = __webpack_require__(/*! ../../utils/highlights/search */ \"./dist/utils/highlights/search/index.js\");\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar removeUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeUserHighlights */ \"./dist/utils/highlights/removeUserHighlights.js\"));\nvar redrawUserHighlights_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/redrawUserHighlights */ \"./dist/utils/highlights/redrawUserHighlights.js\"));\nvar clearSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/clearSelection */ \"./dist/utils/highlights/clearSelection.js\"));\nvar drawExtensors_1 = __webpack_require__(/*! ../../utils/highlights/drawExtensors */ \"./dist/utils/highlights/drawExtensors.js\");\nvar removeSelectionMenu_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeSelectionMenu */ \"./dist/utils/highlights/removeSelectionMenu.js\"));\nvar removeNotesDialog_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeNotesDialog */ \"./dist/utils/highlights/removeNotesDialog.js\"));\n/**\n * Sets viewer text align mode\n * @param context.state Viewer state\n * @param context.action Viewer action\n * @returns Viewer partial state update\n */\nvar setTextAlign = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var textAlign, contentWrapperNode_1;\n        return __generator(this, function (_b) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                throw new Error('Action not allowed in fixed mode');\n            }\n            textAlign = action.textAlign;\n            if (textAlign !== state.textAlign) {\n                contentWrapperNode_1 = state.contentWrapperNode;\n                return [2 /*return*/, new Promise(function (resolve) {\n                        (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n                        (0, search_1.clean)(state);\n                        (0, clearSelection_1[\"default\"])(state);\n                        (0, drawExtensors_1.removeExtensors)(state);\n                        (0, removeSelectionMenu_1[\"default\"])(state);\n                        (0, removeNotesDialog_1[\"default\"])(state);\n                        (0, removeUserHighlights_1[\"default\"])(state);\n                        window.requestAnimationFrame(function () {\n                            if (textAlign) {\n                                contentWrapperNode_1.classList.add('olectio-force-text-align');\n                                (0, setCSSProperty_1[\"default\"])('text-align', textAlign);\n                            }\n                            else {\n                                contentWrapperNode_1.classList.remove('olectio-force-text-align');\n                                (0, removeCSSProperty_1[\"default\"])('text-align');\n                            }\n                            window.requestAnimationFrame(function () { return __awaiter(void 0, void 0, void 0, function () {\n                                var newState, recalculateUpdate;\n                                return __generator(this, function (_a) {\n                                    switch (_a.label) {\n                                        case 0:\n                                            (0, state_1.updateState)({ textAlign: textAlign });\n                                            newState = (0, state_1.getState)();\n                                            return [4 /*yield*/, (0, recalculate_1[\"default\"])(newState)];\n                                        case 1:\n                                            recalculateUpdate = _a.sent();\n                                            (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '0');\n                                            resolve(__assign(__assign({}, recalculateUpdate), { layout: state.layout, scrollMode: state.scrollMode, textAlign: textAlign }));\n                                            return [4 /*yield*/, (0, redrawUserHighlights_1[\"default\"])(state)];\n                                        case 2:\n                                            _a.sent();\n                                            if (state.searchRanges.length && state.searchTermsHighlightsNode) {\n                                                (0, highlights_1.drawHighlights)(state.searchTermsHighlightsNode, state.searchRanges);\n                                            }\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); });\n                        });\n                    })];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = setTextAlign;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setTextAlign.js?");

/***/ }),

/***/ "./dist/lib/actions/setTheme.js":
/*!**************************************!*\
  !*** ./dist/lib/actions/setTheme.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar removeCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/removeCSSProperty */ \"./dist/utils/removeCSSProperty.js\"));\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\n// eslint-disable-next-line @typescript-eslint/require-await\nvar setTheme = function (_a) {\n    var state = _a.state, action = _a.action;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var theme;\n        return __generator(this, function (_b) {\n            theme = action.theme;\n            if (state.theme !== theme) {\n                if (theme === 'dark') {\n                    (0, setCSSProperty_1[\"default\"])('theme-filter', 'invert(1)');\n                }\n                else {\n                    (0, removeCSSProperty_1[\"default\"])('theme-filter');\n                }\n                document.body.classList.remove(\"olectio-\".concat(state.theme, \"-theme\"));\n                document.body.classList.add(\"olectio-\".concat(theme, \"-theme\"));\n                return [2 /*return*/, { theme: theme }];\n            }\n            return [2 /*return*/, {}];\n        });\n    });\n};\nexports[\"default\"] = setTheme;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setTheme.js?");

/***/ }),

/***/ "./dist/lib/actions/setZoom.js":
/*!*************************************!*\
  !*** ./dist/lib/actions/setZoom.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\n// eslint-disable-next-line @typescript-eslint/require-await\nvar setZoom = function (_a) {\n    var action = _a.action, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_b) {\n            if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n                throw new Error('Action not allowed in flow mode');\n            }\n            return [2 /*return*/, {\n                    zoom: Math.max(Math.min(action.zoom, state.config.zoom.max), state.config.zoom.min),\n                    fitMode: undefined\n                }];\n        });\n    });\n};\nexports[\"default\"] = setZoom;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/setZoom.js?");

/***/ }),

/***/ "./dist/lib/actions/showNotesDialog.js":
/*!*********************************************!*\
  !*** ./dist/lib/actions/showNotesDialog.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar getSelectionRangeFromSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/getSelectionRangeFromSelection */ \"./dist/utils/getSelectionRangeFromSelection.js\"));\nvar getConfirmationDialog_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/getConfirmationDialog */ \"./dist/utils/highlights/getConfirmationDialog.js\"));\nvar getMenuPositions_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/getMenuPositions */ \"./dist/utils/highlights/getMenuPositions.js\"));\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\n// eslint-disable-next-line @typescript-eslint/require-await\nvar showNotesDialog = function (_a) {\n    var action = _a.action, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var key, highlightKey, currentSelection, notesDialog, confirmationDialog_1, editing_1, _b, left, top_1, arrowDown, onMouseDown, menu_1, wrapper, holder, form, onSubmit, fieldset, header, headerTitle_1, headerButtons, saveButton_1, editButton_1, separator, cancelButton_1, deleteButton_1, textHolder, textarea_1, noteDiv_1, title, onSave, onCancel, onEdit, onDelete;\n        return __generator(this, function (_c) {\n            key = action.key, highlightKey = action.highlightKey;\n            currentSelection = state.currentSelection;\n            notesDialog = state.notesDialog;\n            if (notesDialog) {\n                notesDialog.remove();\n            }\n            if (highlightKey || currentSelection) {\n                confirmationDialog_1 = null;\n                editing_1 = !!action.editing;\n                _b = (0, getMenuPositions_1[\"default\"])(state, 180, highlightKey, currentSelection), left = _b.left, top_1 = _b.top, arrowDown = _b.arrowDown;\n                onMouseDown = function (e) {\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                };\n                menu_1 = document.createElement('div');\n                menu_1.onmousedown = onMouseDown;\n                menu_1.ontouchstart = onMouseDown;\n                menu_1.onclick = onMouseDown;\n                menu_1.classList.add('olectio-notes-dialog');\n                menu_1.classList.add(\"olectio-\".concat(arrowDown ? 'bottom' : 'top', \"-arrow\"));\n                menu_1.style.top = \"\".concat(top_1, \"px\");\n                menu_1.style.left = \"\".concat(left, \"px\");\n                wrapper = document.createElement('div');\n                wrapper.classList.add('olectio-notes-dialog-wrapper');\n                menu_1.appendChild(wrapper);\n                holder = document.createElement('div');\n                holder.classList.add('olectio-notes-dialog-holder');\n                wrapper.appendChild(holder);\n                form = document.createElement('form');\n                form.setAttribute('novalidate', '');\n                holder.appendChild(form);\n                onSubmit = function (e) {\n                    e.preventDefault();\n                };\n                form.onsubmit = onSubmit;\n                fieldset = document.createElement('fieldset');\n                form.appendChild(fieldset);\n                header = document.createElement('div');\n                header.classList.add('olectio-notes-dialog-header');\n                fieldset.appendChild(header);\n                headerTitle_1 = document.createElement('div');\n                headerTitle_1.classList.add('olectio-notes-dialog-header-title');\n                header.appendChild(headerTitle_1);\n                headerButtons = document.createElement('div');\n                headerButtons.classList.add('olectio-notes-dialog-header-buttons');\n                header.appendChild(headerButtons);\n                saveButton_1 = document.createElement('button');\n                saveButton_1.classList.add('olectio-notes-save');\n                saveButton_1.title = 'Guardar';\n                editButton_1 = document.createElement('button');\n                editButton_1.classList.add('olectio-notes-edit');\n                editButton_1.title = 'Editar';\n                separator = document.createElement('span');\n                separator.classList.add('olectio-separator');\n                cancelButton_1 = document.createElement('button');\n                cancelButton_1.classList.add('olectio-notes-cancel');\n                cancelButton_1.title = 'Cancelar';\n                deleteButton_1 = document.createElement('button');\n                deleteButton_1.classList.add('olectio-notes-delete');\n                deleteButton_1.title = 'Eliminar';\n                textHolder = document.createElement('div');\n                textHolder.classList.add('olectio-notes-dialog-text-holder');\n                fieldset.appendChild(textHolder);\n                textarea_1 = document.createElement('textarea');\n                noteDiv_1 = document.createElement('div');\n                noteDiv_1.classList.add('olectio-notes-dialog-note');\n                if (action.highlightKey) {\n                    noteDiv_1.innerText = action.note || '';\n                    textarea_1.value = action.note || '';\n                    (action.options || []).forEach(function (option) {\n                        var button = document.createElement('button');\n                        button.classList.add('olectio-notes-option');\n                        button.title = option.title;\n                        button.innerText = option.title;\n                        if (option.className) {\n                            button.classList.add(option.className);\n                        }\n                        if (option.selected) {\n                            button.classList.add('olectio-selected');\n                        }\n                        if (option.style) {\n                            button.setAttribute('style', option.style);\n                        }\n                        var onClick = function () {\n                            if (state.config.eventHandler) {\n                                var event_1 = {\n                                    type: 'onChangeNote',\n                                    key: option.key,\n                                    slug: state.slug,\n                                    productSlug: state.productSlug,\n                                    highlightKey: action.highlightKey,\n                                    selectionInfo: action.selectionInfo,\n                                    editing: editing_1\n                                };\n                                if (editing_1) {\n                                    event_1.note = textarea_1.value;\n                                }\n                                state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                                    var _a = ex, stack = _a.stack, message = _a.message;\n                                    console.error('Error at event handler', stack || message);\n                                });\n                            }\n                        };\n                        button.onclick = onClick;\n                        headerTitle_1.appendChild(button);\n                    });\n                }\n                if (action.title) {\n                    title = document.createElement('p');\n                    title.innerText = action.title;\n                    headerTitle_1.appendChild(title);\n                }\n                if (action.color) {\n                    headerTitle_1.style.color = action.color;\n                }\n                if (action.highlightKey && !action.editing) {\n                    headerButtons.appendChild(editButton_1);\n                    headerButtons.appendChild(separator);\n                    headerButtons.appendChild(deleteButton_1);\n                    textHolder.appendChild(noteDiv_1);\n                }\n                else {\n                    headerButtons.appendChild(saveButton_1);\n                    headerButtons.appendChild(separator);\n                    headerButtons.appendChild(cancelButton_1);\n                    textHolder.appendChild(textarea_1);\n                }\n                onSave = function (e) {\n                    e.preventDefault();\n                    if (textarea_1.value.trim() && state.config.eventHandler) {\n                        var event_2 = {\n                            type: 'onSaveNote',\n                            slug: state.slug,\n                            productSlug: state.productSlug,\n                            note: textarea_1.value,\n                            key: key,\n                            highlightKey: highlightKey\n                        };\n                        if (!highlightKey && state.currentSelection) {\n                            event_2.selectionInfo = (0, getSelectionRangeFromSelection_1[\"default\"])(state.currentSelection);\n                        }\n                        state.config.eventHandler(event_2)[\"catch\"](function (ex) {\n                            var _a = ex, stack = _a.stack, message = _a.message;\n                            console.error('Error at event handler', stack || message);\n                        });\n                    }\n                    else if (!textarea_1.value.trim()) {\n                        textarea_1.focus();\n                    }\n                };\n                saveButton_1.onclick = onSave;\n                onCancel = function (e) {\n                    e.preventDefault();\n                    if (editing_1) {\n                        textarea_1.replaceWith(noteDiv_1);\n                        saveButton_1.replaceWith(editButton_1);\n                        cancelButton_1.replaceWith(deleteButton_1);\n                        editing_1 = false;\n                    }\n                    else if (!highlightKey && state.config.eventHandler) {\n                        var event_3 = {\n                            type: 'onCancelNewNote',\n                            slug: state.slug,\n                            productSlug: state.productSlug\n                        };\n                        state.config.eventHandler(event_3)[\"catch\"](function (ex) {\n                            var _a = ex, stack = _a.stack, message = _a.message;\n                            console.error('Error at event handler', stack || message);\n                        });\n                    }\n                };\n                cancelButton_1.onclick = onCancel;\n                onEdit = function (e) {\n                    e.preventDefault();\n                    noteDiv_1.replaceWith(textarea_1);\n                    editButton_1.replaceWith(saveButton_1);\n                    deleteButton_1.replaceWith(cancelButton_1);\n                    textarea_1.focus();\n                    editing_1 = true;\n                };\n                editButton_1.onclick = onEdit;\n                onDelete = function (ev) {\n                    ev.preventDefault();\n                    var onConfirmDelete = function (e) {\n                        e.preventDefault();\n                        if (state.config.eventHandler) {\n                            var deleteEvent = {\n                                type: 'onDeleteOptionClick',\n                                slug: state.slug,\n                                productSlug: state.productSlug,\n                                key: action.highlightKey\n                            };\n                            state.config.eventHandler(deleteEvent)[\"catch\"](function (ex) {\n                                var _a = ex, stack = _a.stack, message = _a.message;\n                                console.error('Error at event handler', stack || message);\n                            });\n                        }\n                    };\n                    var onCancelDelete = function (e) {\n                        e.preventDefault();\n                        state.contentWrapperNode.removeChild(confirmationDialog_1);\n                        state.contentWrapperNode.appendChild(menu_1);\n                    };\n                    if (!confirmationDialog_1) {\n                        confirmationDialog_1 = (0, getConfirmationDialog_1[\"default\"])(onConfirmDelete, onCancelDelete, state, highlightKey, currentSelection, action.confirmationMessage, action.confirmationOkText, action.confirmationCancelText);\n                        (0, state_1.updateState)({\n                            confirmationDialog: confirmationDialog_1\n                        });\n                    }\n                    state.contentWrapperNode.removeChild(menu_1);\n                    state.contentWrapperNode.appendChild(confirmationDialog_1);\n                };\n                deleteButton_1.onclick = onDelete;\n                notesDialog = menu_1;\n                state.contentWrapperNode.appendChild(menu_1);\n                textarea_1.focus();\n            }\n            else {\n                loglevel_1[\"default\"].warn(\"No current selection nor user selection info at 'showNotesDialog'\");\n                notesDialog = null;\n            }\n            return [2 /*return*/, {\n                    notesDialog: notesDialog\n                }];\n        });\n    });\n};\nexports[\"default\"] = showNotesDialog;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/showNotesDialog.js?");

/***/ }),

/***/ "./dist/lib/actions/showSelectionMenu.js":
/*!***********************************************!*\
  !*** ./dist/lib/actions/showSelectionMenu.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar getSelectionRangeFromSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/getSelectionRangeFromSelection */ \"./dist/utils/getSelectionRangeFromSelection.js\"));\nvar drawExtensors_1 = __webpack_require__(/*! ../../utils/highlights/drawExtensors */ \"./dist/utils/highlights/drawExtensors.js\");\nvar getMenuPositions_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/getMenuPositions */ \"./dist/utils/highlights/getMenuPositions.js\"));\nvar removeAllChildren_1 = __importDefault(__webpack_require__(/*! ../../utils/removeAllChildren */ \"./dist/utils/removeAllChildren.js\"));\nvar menu;\nvar getMenu = function () {\n    if (!menu) {\n        menu = document.createElement('div');\n        menu.classList.add('olectio-selection-menu');\n    }\n    (0, removeAllChildren_1[\"default\"])(menu);\n    return menu;\n};\n// eslint-disable-next-line @typescript-eslint/require-await\nvar showSelectionMenu = function (_a) {\n    var action = _a.action, state = _a.state;\n    return __awaiter(void 0, void 0, void 0, function () {\n        var key, currentSelection, selectionMenu, _b, left, top_1, arrowDown, currentMenu, wrapper, holder_1, onMouseDown, separator, button, onClick, separator, button, onClick;\n        return __generator(this, function (_c) {\n            key = action.key;\n            currentSelection = state.currentSelection;\n            selectionMenu = state.selectionMenu;\n            if (key || currentSelection) {\n                _b = (0, getMenuPositions_1[\"default\"])(state, 70, key, currentSelection), left = _b.left, top_1 = _b.top, arrowDown = _b.arrowDown;\n                currentMenu = getMenu();\n                currentMenu.classList.add(\"olectio-\".concat(arrowDown ? 'bottom' : 'top', \"-arrow\"));\n                currentMenu.style.top = \"\".concat(top_1, \"px\");\n                currentMenu.style.left = \"\".concat(left, \"px\");\n                wrapper = document.createElement('div');\n                wrapper.classList.add('olectio-selection-menu-wrapper');\n                currentMenu.appendChild(wrapper);\n                holder_1 = document.createElement('div');\n                holder_1.classList.add('olectio-selection-menu-holder');\n                wrapper.appendChild(holder_1);\n                onMouseDown = function (e) {\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                };\n                currentMenu.onmousedown = onMouseDown;\n                currentMenu.ontouchstart = onMouseDown;\n                currentMenu.onclick = onMouseDown;\n                action.options.forEach(function (option) {\n                    var button = document.createElement('button');\n                    button.classList.add('olectio-selection-option');\n                    button.title = option.title;\n                    button.innerText = option.title;\n                    if (option.className) {\n                        button.classList.add(option.className);\n                    }\n                    if (option.selected) {\n                        button.classList.add('olectio-selected');\n                    }\n                    if (option.style) {\n                        button.setAttribute('style', option.style);\n                    }\n                    var onClick = function () {\n                        if (state.config.eventHandler) {\n                            var event_1 = {\n                                type: 'onSelectionMenuOptionClick',\n                                key: option.key,\n                                slug: state.slug,\n                                productSlug: state.productSlug\n                            };\n                            if (action.key) {\n                                event_1.highlightKey = action.key;\n                                var userHighlightInfo = state.currentUserHighlights.get(action.key);\n                                if (userHighlightInfo) {\n                                    var start = userHighlightInfo.start, end = userHighlightInfo.end, obfuscatedText = userHighlightInfo.obfuscatedText;\n                                    event_1.selectionInfo = { start: start, end: end, obfuscatedText: obfuscatedText };\n                                }\n                            }\n                            else if (state.currentSelection) {\n                                event_1.selectionInfo = (0, getSelectionRangeFromSelection_1[\"default\"])(state.currentSelection);\n                            }\n                            else {\n                                loglevel_1[\"default\"].warn('Clicked on selection menu option without key nor state.currentSelection');\n                            }\n                            state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                                var _a = ex, stack = _a.stack, message = _a.message;\n                                console.error('Error at event handler', stack || message);\n                            });\n                        }\n                        (0, drawExtensors_1.removeExtensors)(state);\n                    };\n                    button.onclick = onClick;\n                    holder_1.appendChild(button);\n                });\n                if (action.copyOption) {\n                    separator = document.createElement('span');\n                    separator.classList.add('olectio-separator');\n                    holder_1.appendChild(separator);\n                    button = document.createElement('button');\n                    button.disabled = !!action.copyOption.disabled;\n                    button.title = action.copyOption.title;\n                    button.innerText = action.copyOption.title;\n                    button.classList.add('olectio-selection-option', 'olectio-copy');\n                    if (action.copyOption.className) {\n                        button.classList.add(action.copyOption.className);\n                    }\n                    if (action.copyOption.style) {\n                        button.setAttribute('style', action.copyOption.style);\n                    }\n                    onClick = function () {\n                        var _a;\n                        if (state.config.eventHandler && state.currentSelection) {\n                            var event_2 = {\n                                type: 'onCopyOptionClick',\n                                slug: state.slug,\n                                productSlug: state.productSlug,\n                                obfuscatedText: ((_a = state.currentSelection) === null || _a === void 0 ? void 0 : _a.toString()) || ''\n                            };\n                            state.config.eventHandler(event_2)[\"catch\"](function (ex) {\n                                var _a = ex, stack = _a.stack, message = _a.message;\n                                console.error('Error at event handler', stack || message);\n                            });\n                        }\n                    };\n                    button.onclick = onClick;\n                    holder_1.appendChild(button);\n                }\n                if (action.key && action.deleteOption) {\n                    separator = document.createElement('span');\n                    separator.classList.add('olectio-separator');\n                    holder_1.appendChild(separator);\n                    button = document.createElement('button');\n                    button.title = action.deleteOption.title;\n                    button.innerText = action.deleteOption.title;\n                    button.classList.add('olectio-selection-option', 'olectio-delete');\n                    if (action.deleteOption.className) {\n                        button.classList.add(action.deleteOption.className);\n                    }\n                    if (action.deleteOption.style) {\n                        button.setAttribute('style', action.deleteOption.style);\n                    }\n                    onClick = function () {\n                        if (state.config.eventHandler && action.key) {\n                            var event_3 = {\n                                type: 'onDeleteOptionClick',\n                                key: action.key,\n                                slug: state.slug,\n                                productSlug: state.productSlug\n                            };\n                            state.config.eventHandler(event_3)[\"catch\"](function (ex) {\n                                var _a = ex, stack = _a.stack, message = _a.message;\n                                console.error('Error at event handler', stack || message);\n                            });\n                        }\n                    };\n                    button.onclick = onClick;\n                    holder_1.appendChild(button);\n                }\n                state.contentWrapperNode.appendChild(currentMenu);\n                selectionMenu = currentMenu;\n            }\n            else {\n                loglevel_1[\"default\"].warn(\"No current selection nor user selection info at 'showSelectionMenu'\");\n                selectionMenu = null;\n            }\n            return [2 /*return*/, {\n                    selectionMenu: selectionMenu\n                }];\n        });\n    });\n};\nexports[\"default\"] = showSelectionMenu;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/actions/showSelectionMenu.js?");

/***/ }),

/***/ "./dist/lib/animation/animationController.js":
/*!***************************************************!*\
  !*** ./dist/lib/animation/animationController.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.unmountAnimations = void 0;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar navigateToContentSlug_1 = __importDefault(__webpack_require__(/*! ../../utils/navigateToContentSlug */ \"./dist/utils/navigateToContentSlug.js\"));\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar stateChangeEvents_1 = __webpack_require__(/*! ../state/stateChangeEvents */ \"./dist/lib/state/stateChangeEvents.js\");\nvar getMinAndMaxScroll_1 = __importDefault(__webpack_require__(/*! ./getMinAndMaxScroll */ \"./dist/lib/animation/getMinAndMaxScroll.js\"));\nvar getScrollFromContentSlug_1 = __importDefault(__webpack_require__(/*! ./getScrollFromContentSlug */ \"./dist/lib/animation/getScrollFromContentSlug.js\"));\nvar interpolate_1 = __importDefault(__webpack_require__(/*! ./interpolate */ \"./dist/lib/animation/interpolate.js\"));\nvar interpolationValues_1 = __webpack_require__(/*! ./interpolationValues */ \"./dist/lib/animation/interpolationValues.js\");\nvar recalculateCurrentPage_1 = __importStar(__webpack_require__(/*! ./recalculateCurrentPage */ \"./dist/lib/animation/recalculateCurrentPage.js\"));\nvar scrollController_1 = __importStar(__webpack_require__(/*! ./scrollController */ \"./dist/lib/animation/scrollController.js\"));\nvar unmountAnimationsHandler = function () { };\nvar animationController = function (state, dispatch) {\n    var zoomUpdatedByApplyCSSProps = false;\n    var interpolationValues = [\n        interpolationValues_1.scale,\n        interpolationValues_1.left,\n        interpolationValues_1.top,\n        interpolationValues_1.scroll,\n        interpolationValues_1.altScroll,\n        interpolationValues_1.zoom,\n        interpolationValues_1.leftCorrector,\n        interpolationValues_1.topCorrector,\n    ];\n    if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n        interpolationValues_1.zoom.target = state.zoom;\n        interpolationValues_1.zoom.current = state.zoom;\n    }\n    (0, state_1.updateState)({\n        animate: false,\n        animating: false,\n        interpolationValues: interpolationValues\n    });\n    var applyCSSProps = function () {\n        var targetScale = state.layout === viewerSettings_1.LayoutTypes.Flow\n            ? Math.abs(interpolationValues_1.scale.current)\n            : Math.abs(interpolationValues_1.scale.current * interpolationValues_1.zoom.current);\n        var computedScroll = interpolationValues_1.scroll.current * targetScale;\n        var computedAltScroll = interpolationValues_1.altScroll.current * targetScale;\n        var scrollLeft = interpolationValues_1.left.current +\n            interpolationValues_1.leftCorrector.current +\n            (state.scrollMode === 'horizontal' ? computedScroll : computedAltScroll);\n        var scrollTop = interpolationValues_1.top.current +\n            interpolationValues_1.topCorrector.current +\n            (state.scrollMode === 'vertical' ? computedScroll : computedAltScroll);\n        (0, setCSSProperty_1[\"default\"])('scale', \"\".concat(targetScale));\n        (0, setCSSProperty_1[\"default\"])('horizontal-translate', \"\".concat(scrollLeft, \"px\"));\n        (0, setCSSProperty_1[\"default\"])('vertical-translate', \"\".concat(scrollTop, \"px\"));\n        if (state.scrollerNode) {\n            (0, state_1.updateState)({ updatingScroller: true });\n            if (state.scrollMode === 'horizontal' && state.totalWidth) {\n                state.scrollerNode.scrollLeft = -1 * interpolationValues_1.scroll.current;\n                (0, setCSSProperty_1[\"default\"])('prev-chapter-navigation-opacity', state.scrollerNode.scrollLeft < state.containerWidth ? '1' : '0');\n                (0, setCSSProperty_1[\"default\"])('next-chapter-navigation-opacity', state.scrollerNode.scrollLeft + state.containerWidth >\n                    state.scrollerNode.scrollWidth - state.containerWidth * 0.9\n                    ? '1'\n                    : '0');\n            }\n            else if (state.scrollMode === 'vertical' && state.totalHeight) {\n                state.scrollerNode.scrollTop = -1 * interpolationValues_1.scroll.current;\n                (0, setCSSProperty_1[\"default\"])('prev-chapter-navigation-opacity', state.scrollerNode.scrollTop < state.containerHeight ? '1' : '0');\n                (0, setCSSProperty_1[\"default\"])('next-chapter-navigation-opacity', state.scrollerNode.scrollTop + state.containerHeight >\n                    state.scrollerNode.scrollHeight - state.containerHeight * 0.9\n                    ? '1'\n                    : '0');\n            }\n            window.requestAnimationFrame(function () {\n                if (state.updatingScroller) {\n                    (0, state_1.updateState)({ updatingScroller: false });\n                }\n            });\n        }\n        zoomUpdatedByApplyCSSProps = true;\n        (0, state_1.updateState)({ scrollLeft: scrollLeft, scrollTop: scrollTop, scale: targetScale, zoom: interpolationValues_1.zoom.current });\n        zoomUpdatedByApplyCSSProps = false;\n    };\n    var interpolateToTargetValues = function () {\n        if (interpolationValues.filter(function (value) { return (0, interpolate_1[\"default\"])(state, value); }).length > 0) {\n            applyCSSProps();\n            // Execute the interpolation\n            window.requestAnimationFrame(function () {\n                (0, recalculateCurrentPage_1[\"default\"])(state, interpolationValues_1.scroll.current, true);\n                interpolateToTargetValues();\n            });\n        }\n        else {\n            applyCSSProps();\n            if (state.scrollMode === 'horizontal' || state.scrollMode === 'vertical') {\n                (0, recalculateCurrentPage_1[\"default\"])(state, interpolationValues_1.scroll.current);\n            }\n            (0, state_1.updateState)({\n                animating: false\n            });\n            if (!state.dragging) {\n                (0, setCSSProperty_1[\"default\"])('pointer-events', 'auto');\n                (0, setCSSProperty_1[\"default\"])('user-select', 'auto');\n            }\n        }\n    };\n    var executeTransitions = function (instant) {\n        if (instant === void 0) { instant = false; }\n        if (!state.animate || instant) {\n            interpolationValues.forEach(function (value) {\n                value.current = value.target;\n            });\n            applyCSSProps();\n        }\n        else if (interpolationValues.find(function (value) { return value.forceUpdate || value.target !== value.current; }) &&\n            !state.animating) {\n            (0, state_1.updateState)({\n                animating: true\n            });\n            interpolateToTargetValues();\n        }\n    };\n    var onReadModeChangeEvent = function (instant) {\n        if (instant === void 0) { instant = false; }\n        var newMargins = state.readMode\n            ? __assign({}, state.config.readModeMargin) : __assign({}, state.config.uiModeMargin);\n        if (!state.readMode && state.layout === viewerSettings_1.LayoutTypes.Flow) {\n            newMargins.bottom += state.fontSize * 3;\n        }\n        var currentWidth = state.containerWidth;\n        var horizontalMargin = newMargins.left + newMargins.right;\n        var targetWidth = currentWidth - horizontalMargin;\n        var widthNeededScale = targetWidth / currentWidth;\n        var currentHeight = state.containerHeight;\n        var verticalMargin = state.layout === viewerSettings_1.LayoutTypes.Fixed && state.fitMode === viewerSettings_1.FitMode.Height\n            ? state.config.readModeMargin.top + state.config.readModeMargin.bottom\n            : newMargins.top + newMargins.bottom;\n        var targetHeight = currentHeight - verticalMargin;\n        var heightNeededScale = targetHeight / currentHeight;\n        interpolationValues_1.scale.target = Math.max(Math.min(widthNeededScale, heightNeededScale), 0);\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            if (state.fitMode === viewerSettings_1.FitMode.Height) {\n                interpolationValues_1.scale.target = Math.max(heightNeededScale, 0);\n            }\n            if (state.fitMode === viewerSettings_1.FitMode.Width) {\n                interpolationValues_1.scale.target = Math.max(widthNeededScale, 0);\n            }\n        }\n        if (state.scrollMode === 'horizontal') {\n            interpolationValues_1.left.target = newMargins.left;\n        }\n        else {\n            var widthReduction = currentWidth * (1 - interpolationValues_1.scale.target);\n            var marginWidth = widthReduction - newMargins.left - newMargins.right;\n            interpolationValues_1.left.target = newMargins.left + marginWidth / 2;\n        }\n        if (state.scrollMode === 'vertical') {\n            interpolationValues_1.top.target = newMargins.top;\n        }\n        else {\n            var heightReduction = currentHeight * (1 - interpolationValues_1.scale.target);\n            var marginHeight = heightReduction - newMargins.top - newMargins.bottom;\n            interpolationValues_1.top.target = newMargins.top + marginHeight / 2;\n        }\n        (0, state_1.updateState)({\n            margin: newMargins\n        });\n        if (instant) {\n            interpolationValues_1.left.current = interpolationValues_1.left.target;\n            interpolationValues_1.top.current = interpolationValues_1.top.target;\n            interpolationValues_1.scale.current = interpolationValues_1.scale.target;\n            interpolationValues_1.scale.speed = 0;\n            interpolationValues_1.top.speed = 0;\n            interpolationValues_1.left.speed = 0;\n            applyCSSProps();\n        }\n        else {\n            executeTransitions();\n        }\n        (0, setCSSProperty_1[\"default\"])('scroller-left', \"\".concat(state.margin.left, \"px\"));\n        (0, setCSSProperty_1[\"default\"])('scroller-scale', \"\".concat(interpolationValues_1.scale.target));\n    };\n    var resetPageProps = function () {\n        var _a;\n        if (!state.avoidReset) {\n            var targetSlugScrollPosition = (_a = (0, getScrollFromContentSlug_1[\"default\"])(state)) !== null && _a !== void 0 ? _a : 0;\n            interpolationValues_1.scroll.target = targetSlugScrollPosition;\n            interpolationValues_1.scroll.current = interpolationValues_1.scroll.target;\n            interpolationValues_1.scroll.speed = 0;\n            (0, recalculateCurrentPage_1[\"default\"])(state, interpolationValues_1.scroll.current, true);\n        }\n    };\n    var onScrollModeChange = function () {\n        setTimeout(function () {\n            var _a;\n            onReadModeChangeEvent(true);\n            interpolationValues_1.scroll.current = (_a = (0, getScrollFromContentSlug_1[\"default\"])(state)) !== null && _a !== void 0 ? _a : 0;\n            interpolationValues_1.scroll.target = interpolationValues_1.scroll.current;\n            interpolationValues_1.scroll.speed = 0;\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                (0, scrollController_1.reCalcScrollLimits)(state, true);\n            }\n            applyCSSProps();\n        }, 0);\n    };\n    var onContentSlugChanged = function (slug) {\n        var targetSlugScrollPosition = (0, getScrollFromContentSlug_1[\"default\"])(state, slug);\n        if (targetSlugScrollPosition !== null && state.forceScroll === undefined) {\n            var scrollLimits = (0, getMinAndMaxScroll_1[\"default\"])(state);\n            if (targetSlugScrollPosition > scrollLimits.maxScroll) {\n                interpolationValues_1.scroll.target = scrollLimits.maxScroll;\n                interpolationValues_1.scroll.forceUpdate = true;\n            }\n            else if (targetSlugScrollPosition < scrollLimits.minScroll) {\n                interpolationValues_1.scroll.target = scrollLimits.minScroll;\n                interpolationValues_1.scroll.forceUpdate = true;\n            }\n            else {\n                interpolationValues_1.scroll.target = targetSlugScrollPosition;\n            }\n        }\n        executeTransitions();\n        interpolationValues_1.scroll.forceUpdate = false;\n    };\n    var resetPageScroll = function () {\n        var _a;\n        var scrollingElement = (_a = document.scrollingElement) !== null && _a !== void 0 ? _a : document.body;\n        scrollingElement.scrollTop = 0;\n    };\n    var fitHeight = function () {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            interpolationValues_1.scale.target = Math.max(0, (state.containerHeight - state.margin.top - state.margin.bottom) / state.containerHeight);\n            interpolationValues_1.top.target = state.margin.top;\n            interpolationValues_1.zoom.target = state.containerHeight / state.maxHeight;\n            if (state.scrollMode === 'horizontal') {\n                interpolationValues_1.left.target = state.margin.left;\n            }\n            else {\n                var widthReduction = state.containerWidth * (1 - interpolationValues_1.scale.target);\n                var marginWidth = widthReduction - state.margin.left - state.margin.right;\n                interpolationValues_1.left.target = state.margin.left + marginWidth / 2;\n            }\n        }\n    };\n    var fitWidth = function () {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            interpolationValues_1.scale.target = Math.max(0, (state.containerWidth - state.margin.left - state.margin.right) / state.containerWidth);\n            interpolationValues_1.left.target = state.margin.left;\n            interpolationValues_1.zoom.target = state.containerWidth / state.maxWidth;\n            if (state.scrollMode === 'vertical') {\n                interpolationValues_1.top.target = state.margin.top;\n            }\n            else {\n                var heightReduction = state.containerHeight * (1 - interpolationValues_1.scale.target);\n                var marginHeight = heightReduction - state.margin.top - state.margin.bottom;\n                interpolationValues_1.top.target = state.margin.top + marginHeight / 2;\n            }\n        }\n    };\n    var onChapterChange = function () {\n        resetPageScroll();\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            if (state.fitMode === viewerSettings_1.FitMode.Height) {\n                fitHeight();\n            }\n            else if (state.fitMode === viewerSettings_1.FitMode.Width) {\n                fitWidth();\n            }\n            else if (state.fitMode === viewerSettings_1.FitMode.Page) {\n                var fitWidthZoom = Math.max(0, (state.containerWidth - state.margin.left - state.margin.right) / state.containerWidth);\n                var fitHeightZoom = Math.max(0, (state.containerHeight - state.margin.top - state.margin.bottom) / state.containerHeight);\n                if (fitWidthZoom < fitHeightZoom) {\n                    fitWidth();\n                }\n                else {\n                    fitHeight();\n                }\n                (0, navigateToContentSlug_1[\"default\"])(state.contentSlug);\n            }\n            else {\n                interpolationValues_1.zoom.target = state.zoom;\n            }\n            interpolationValues_1.scale.current = interpolationValues_1.scale.target;\n            interpolationValues_1.zoom.current = interpolationValues_1.zoom.target;\n            interpolationValues_1.top.current = interpolationValues_1.top.target;\n            interpolationValues_1.left.current = interpolationValues_1.left.target;\n        }\n        resetPageProps();\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            (0, scrollController_1.reCalcScrollLimits)(state, true);\n        }\n        applyCSSProps();\n    };\n    var onPositionBySlugChange = function () {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            if (state.fitMode === viewerSettings_1.FitMode.Height) {\n                interpolationValues_1.zoom.target = window.innerHeight / state.maxHeight;\n            }\n            else if (state.fitMode === viewerSettings_1.FitMode.Width) {\n                interpolationValues_1.zoom.target = window.innerWidth / state.maxWidth;\n            }\n            else {\n                interpolationValues_1.zoom.target = state.zoom;\n            }\n            interpolationValues_1.zoom.current = interpolationValues_1.zoom.target;\n            (0, scrollController_1.reCalcScrollLimits)(state, true);\n        }\n        resetPageProps();\n        applyCSSProps();\n    };\n    var onZoomChange = function () {\n        if (!zoomUpdatedByApplyCSSProps && state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            interpolationValues_1.zoom.target = state.zoom;\n            interpolationValues_1.zoom.current = interpolationValues_1.zoom.target;\n            interpolationValues_1.zoom.forceUpdate = true;\n            (0, scrollController_1.reCalcScrollLimits)(state, true);\n            executeTransitions();\n            interpolationValues_1.zoom.forceUpdate = false;\n        }\n    };\n    var onForceScrollChange = function (newScroll) {\n        if (newScroll !== undefined) {\n            interpolationValues_1.scroll.target = newScroll * -1;\n            interpolationValues_1.scroll.current = interpolationValues_1.scroll.target;\n            interpolationValues_1.scroll.speed = 0;\n            interpolationValues_1.scroll.forceUpdate = true;\n            (0, state_1.updateState)({\n                forceScroll: undefined\n            });\n            executeTransitions();\n            interpolationValues_1.scroll.forceUpdate = false;\n        }\n    };\n    var onAnimateToScroll = function (newScroll) {\n        if (newScroll !== undefined) {\n            interpolationValues_1.scroll.target = newScroll * -1;\n            (0, state_1.updateState)({\n                animateToScroll: undefined\n            });\n            executeTransitions();\n        }\n    };\n    (0, stateChangeEvents_1.addOnChangeEventListener)('forceScroll', onForceScrollChange);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('animateToScroll', onAnimateToScroll);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('zoom', onZoomChange);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('chapterNumber', onChapterChange);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('wrapperReady', onChapterChange);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('fitMode', onChapterChange);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('positionBySlug', onPositionBySlugChange);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('contentSlug', onContentSlugChanged);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('scrollMode', onScrollModeChange);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('readMode', function () { return onReadModeChangeEvent(); });\n    (0, stateChangeEvents_1.addOnChangeEventListener)('containerWidth', function () { return onReadModeChangeEvent(); });\n    (0, stateChangeEvents_1.addOnChangeEventListener)('containerHeight', function () { return onReadModeChangeEvent(); });\n    (0, stateChangeEvents_1.addOnChangeEventListener)('fontSize', function () { return onReadModeChangeEvent(); });\n    onReadModeChangeEvent(true);\n    (0, scrollController_1[\"default\"])(state, dispatch, executeTransitions);\n    (0, state_1.updateState)({\n        animate: true,\n        animating: false\n    });\n    unmountAnimationsHandler = function () {\n        (0, recalculateCurrentPage_1.resetLastPage)();\n        (0, interpolationValues_1.resetInterpolationValues)();\n        applyCSSProps();\n    };\n};\nvar unmountAnimations = function () {\n    unmountAnimationsHandler();\n};\nexports.unmountAnimations = unmountAnimations;\nexports[\"default\"] = animationController;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/animationController.js?");

/***/ }),

/***/ "./dist/lib/animation/calculatePagePosition.js":
/*!*****************************************************!*\
  !*** ./dist/lib/animation/calculatePagePosition.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar interpolationValues_1 = __webpack_require__(/*! ./interpolationValues */ \"./dist/lib/animation/interpolationValues.js\");\nvar calculatePagePosition = function (currentScroll, state) {\n    var scrollPosition = Math.round(currentScroll * -1);\n    if (state.scrollMode === 'horizontal') {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            var targetScale = Math.abs(interpolationValues_1.scale.current * interpolationValues_1.zoom.current);\n            var correction = (state.margin.left - interpolationValues_1.leftCorrector.current) / targetScale;\n            scrollPosition += correction;\n        }\n    }\n    if (state.scrollMode === 'vertical') {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            var targetScale = Math.abs(interpolationValues_1.scale.current * interpolationValues_1.zoom.current);\n            var correction = (state.margin.top - interpolationValues_1.topCorrector.current) / targetScale;\n            scrollPosition += correction;\n        }\n    }\n    return scrollPosition;\n};\nexports[\"default\"] = calculatePagePosition;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/calculatePagePosition.js?");

/***/ }),

/***/ "./dist/lib/animation/getClickedHighlight.js":
/*!***************************************************!*\
  !*** ./dist/lib/animation/getClickedHighlight.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar getSyntheticEvent_1 = __importDefault(__webpack_require__(/*! ./getSyntheticEvent */ \"./dist/lib/animation/getSyntheticEvent.js\"));\nvar getClickedHighlight = function (ev, event) {\n    var res = null;\n    (0, setCSSProperty_1[\"default\"])('highlights-pointer-events', 'auto');\n    var syntheticEvent = event || (0, getSyntheticEvent_1[\"default\"])(ev);\n    var elements = document.elementsFromPoint(syntheticEvent.clientX, syntheticEvent.clientY);\n    for (var i = 0, l = elements.length; i < l && !res; i++) {\n        var element = elements[i];\n        if (element.classList.contains('olectio-highlight')) {\n            res = element.dataset.key || null;\n        }\n    }\n    return res;\n};\nexports[\"default\"] = getClickedHighlight;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/getClickedHighlight.js?");

/***/ }),

/***/ "./dist/lib/animation/getCoordinatesFromEvent.js":
/*!*******************************************************!*\
  !*** ./dist/lib/animation/getCoordinatesFromEvent.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar getCoordinatesFromEvent = function (ev) {\n    var _a;\n    if (ev.movementX !== undefined) {\n        return {\n            x: ev.clientX,\n            y: ev.clientY\n        };\n    }\n    var touch = ((_a = ev.touches) === null || _a === void 0 ? void 0 : _a.length) ? ev.touches[0] : ev.changedTouches[0];\n    return {\n        x: touch.clientX,\n        y: touch.clientY\n    };\n};\nexports[\"default\"] = getCoordinatesFromEvent;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/getCoordinatesFromEvent.js?");

/***/ }),

/***/ "./dist/lib/animation/getMinAndMaxScroll.js":
/*!**************************************************!*\
  !*** ./dist/lib/animation/getMinAndMaxScroll.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.getMinAndMaxAltScroll = void 0;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar interpolationValues_1 = __webpack_require__(/*! ./interpolationValues */ \"./dist/lib/animation/interpolationValues.js\");\nvar getMinAndMaxScroll = function (state, forceMargin) {\n    if (forceMargin === void 0) { forceMargin = null; }\n    var margin = forceMargin !== null && forceMargin !== void 0 ? forceMargin : (state.scrollMode === 'horizontal' ? window.innerWidth / 2 : window.innerHeight / 2);\n    var minScroll = margin * -1;\n    var maxScroll = margin;\n    if (state.layout === viewerSettings_1.LayoutTypes.Flow || state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n        if (state.scrollMode === 'horizontal') {\n            if (state.slugByPosition) {\n                var max_1 = 0;\n                var i_1 = 0;\n                var endOfFirstPage_1 = 0;\n                var columns_1 = state.layout === viewerSettings_1.LayoutTypes.Flow ? state.columnsInViewport : 1;\n                state.slugByPosition.forEach(function (value, key) {\n                    if (endOfFirstPage_1 === 0) {\n                        endOfFirstPage_1 = key;\n                    }\n                    if (i_1++ % columns_1 === 0) {\n                        max_1 = key;\n                    }\n                });\n                minScroll = margin * -1 - max_1;\n                if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                    var targetScale = Math.abs(interpolationValues_1.scale.target * interpolationValues_1.zoom.target);\n                    var correctorFix = -interpolationValues_1.leftCorrector.target / targetScale;\n                    maxScroll = correctorFix;\n                    var maxScrollableWidth = 0;\n                    var availableWidth = state.containerWidth - (state.margin.left + state.margin.right);\n                    var totalWidth = state.totalWidth * targetScale;\n                    if (availableWidth > totalWidth) {\n                        maxScrollableWidth = (state.totalWidth - availableWidth / targetScale) / 2;\n                        maxScroll = -1 * maxScrollableWidth;\n                    }\n                    else {\n                        maxScrollableWidth = Math.max(state.totalWidth - availableWidth / targetScale, 0);\n                    }\n                    minScroll = -1 * maxScrollableWidth + correctorFix;\n                }\n            }\n        }\n        else if (state.scrollMode === 'vertical') {\n            if (state.slugByPosition) {\n                var max_2 = 0;\n                var i_2 = 0;\n                var endOfFirstPage_2 = 0;\n                var columns_2 = state.layout === viewerSettings_1.LayoutTypes.Flow ? state.columnsInViewport : 1;\n                state.slugByPosition.forEach(function (value, key) {\n                    if (endOfFirstPage_2 === 0) {\n                        endOfFirstPage_2 = key;\n                    }\n                    if (i_2++ % columns_2 === 0) {\n                        max_2 = key;\n                    }\n                });\n                minScroll = margin * -1 - max_2;\n                if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                    var targetScale = Math.abs(interpolationValues_1.scale.target * interpolationValues_1.zoom.target);\n                    var correctorFix = -interpolationValues_1.topCorrector.target / targetScale;\n                    maxScroll = correctorFix;\n                    var maxScrollableHeight = 0;\n                    var availableHeight = state.containerHeight - (state.margin.top + state.margin.bottom);\n                    var totalHeight = state.totalHeight * targetScale;\n                    if (availableHeight > totalHeight) {\n                        maxScrollableHeight = (state.totalHeight - availableHeight / targetScale) / 2;\n                        maxScroll = -1 * maxScrollableHeight;\n                    }\n                    else {\n                        maxScrollableHeight = Math.max(state.totalHeight - availableHeight / targetScale, 0);\n                    }\n                    minScroll = -1 * maxScrollableHeight + correctorFix;\n                }\n            }\n        }\n    }\n    return { minScroll: minScroll, maxScroll: maxScroll };\n};\nvar getMinAndMaxAltScroll = function (state) {\n    if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n        if (state.scrollMode === 'horizontal') {\n            var targetScale = Math.abs(interpolationValues_1.scale.target * interpolationValues_1.zoom.target);\n            var additional = (state.containerHeight / interpolationValues_1.zoom.target - state.maxHeight) / 2;\n            var correctorFix = -interpolationValues_1.topCorrector.target / targetScale;\n            if (additional >= 0) {\n                return {\n                    maxScroll: correctorFix + additional,\n                    minScroll: correctorFix + additional\n                };\n            }\n            var maxScroll = correctorFix;\n            var minScroll = additional * 2 + correctorFix;\n            return {\n                maxScroll: maxScroll,\n                minScroll: minScroll\n            };\n        }\n        if (state.scrollMode === 'vertical') {\n            var targetScale = Math.abs(interpolationValues_1.scale.target * interpolationValues_1.zoom.target);\n            var additional = (state.containerWidth / interpolationValues_1.zoom.target - state.maxWidth) / 2;\n            var correctorFix = -interpolationValues_1.leftCorrector.target / targetScale;\n            if (additional >= 0) {\n                return {\n                    maxScroll: correctorFix + additional,\n                    minScroll: correctorFix + additional\n                };\n            }\n            var maxScroll = correctorFix;\n            var minScroll = additional * 2 + correctorFix;\n            return {\n                maxScroll: maxScroll,\n                minScroll: minScroll\n            };\n        }\n    }\n    return { minScroll: 0, maxScroll: 0 };\n};\nexports.getMinAndMaxAltScroll = getMinAndMaxAltScroll;\nexports[\"default\"] = getMinAndMaxScroll;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/getMinAndMaxScroll.js?");

/***/ }),

/***/ "./dist/lib/animation/getRangeFromPoint.js":
/*!*************************************************!*\
  !*** ./dist/lib/animation/getRangeFromPoint.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar getSelection_1 = __importDefault(__webpack_require__(/*! ./getSelection */ \"./dist/lib/animation/getSelection.js\"));\n/**\n * This is crazy... the selection from point is not standard jet\n * it took some time to figure out how to do it in the different\n * browsers (old scroll JS) but I think that it covers every browser\n * (at least for the Bi-Books needs), if anyone detects any improvement\n * for any browser please do a pool request\n * @param {SyntheticEvent} evt - Mouse event to do the selection\n * @param {boolean} extendToWord - Extend range to select full word\n * @returns Selection Range\n */\nvar getRangeFromPoint = function (evt, extendToWord) {\n    if (extendToWord === void 0) { extendToWord = false; }\n    var range;\n    var x = evt.clientX;\n    var y = evt.clientY;\n    var body = document.body;\n    // Try the simple IE way first\n    if (body.createTextRange) {\n        range = body.createTextRange();\n        range.moveToPoint(x, y);\n    }\n    else if (typeof document.createRange !== 'undefined') {\n        if (typeof evt.rangeParent !== 'undefined') {\n            // Try Mozilla's rangeOffset and rangeParent properties, which are exactly what we want\n            range = document.createRange();\n            range.setStart(evt.rangeParent, evt.rangeOffset);\n            range.collapse(true);\n        }\n        else if (document.caretPositionFromPoint) {\n            // Try the standards-based way next\n            var pos = document.caretPositionFromPoint(x, y);\n            range = document.createRange();\n            range.setStart(pos.offsetNode, pos.offset);\n            range.collapse(true);\n        }\n        else if (document.caretRangeFromPoint) {\n            // Next, the WebKit way\n            range = document.caretRangeFromPoint(x, y);\n        }\n    }\n    if (extendToWord) {\n        var selection = (0, getSelection_1[\"default\"])();\n        if (selection) {\n            selection.removeAllRanges();\n            selection.addRange(range);\n            selection.modify('move', 'backward', 'word');\n            selection.modify('extend', 'forward', 'word');\n            return selection.getRangeAt(0);\n        }\n    }\n    return range;\n};\nexports[\"default\"] = getRangeFromPoint;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/getRangeFromPoint.js?");

/***/ }),

/***/ "./dist/lib/animation/getScrollFromContentSlug.js":
/*!********************************************************!*\
  !*** ./dist/lib/animation/getScrollFromContentSlug.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar getScrollFromContentSlug = function (state, contentSlug) {\n    if (contentSlug === void 0) { contentSlug = state.contentSlug; }\n    var result = 0;\n    if (state.scrollMode === 'vertical' || state.scrollMode === 'horizontal') {\n        var labelPosition_1 = state.positionBySlug.get(contentSlug);\n        if (labelPosition_1 !== undefined) {\n            var i_1 = 0;\n            var lastPosition_1 = 0;\n            var found_1 = false;\n            var nextPage_1 = 0;\n            state.positionBySlug.forEach(function (position, key) {\n                if (!found_1) {\n                    if (lastPosition_1 !== position) {\n                        i_1++;\n                        lastPosition_1 = position;\n                    }\n                    if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n                        if (i_1 % state.columnsInViewport === 0) {\n                            labelPosition_1 = position;\n                        }\n                    }\n                    if (key === contentSlug) {\n                        found_1 = true;\n                    }\n                }\n                else if (!nextPage_1) {\n                    nextPage_1 = position;\n                }\n            });\n            result -= labelPosition_1 !== null && labelPosition_1 !== void 0 ? labelPosition_1 : 0;\n            if (!found_1) {\n                return null;\n            }\n        }\n    }\n    return result;\n};\nexports[\"default\"] = getScrollFromContentSlug;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/getScrollFromContentSlug.js?");

/***/ }),

/***/ "./dist/lib/animation/getSelection.js":
/*!********************************************!*\
  !*** ./dist/lib/animation/getSelection.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/**\n * Gets selection if client side\n * @returns Selection\n */\nvar getSelection = function () {\n    if (window) {\n        var document_1 = window.document;\n        if (window.getSelection) {\n            return window.getSelection();\n        }\n        if (document_1.getSelection) {\n            return document_1.getSelection();\n        }\n        var selection = document_1.selection && document_1.selection.createRange();\n        if (selection.text) {\n            return selection;\n        }\n    }\n    return null;\n};\nexports[\"default\"] = getSelection;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/getSelection.js?");

/***/ }),

/***/ "./dist/lib/animation/getSyntheticEvent.js":
/*!*************************************************!*\
  !*** ./dist/lib/animation/getSyntheticEvent.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Generates a synthetic event from a mouse or touch event\n * @param {MouseEvent | TouchEvent} ev - Mouse or touch event to generate the synthetic event\n */\nvar getSyntheticEvent = function (ev) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var _a = ev, rangeParent = _a.rangeParent, rangeOffset = _a.rangeOffset;\n    var _b = ev.touches && ev.touches.length > 0\n        ? ev.touches[0]\n        : ev, clientX = _b.clientX, clientY = _b.clientY;\n    return {\n        rangeParent: rangeParent,\n        rangeOffset: rangeOffset,\n        clientX: clientX,\n        clientY: clientY\n    };\n};\nexports[\"default\"] = getSyntheticEvent;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/getSyntheticEvent.js?");

/***/ }),

/***/ "./dist/lib/animation/getWordSelection.js":
/*!************************************************!*\
  !*** ./dist/lib/animation/getWordSelection.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar getRangeFromPoint_1 = __importDefault(__webpack_require__(/*! ./getRangeFromPoint */ \"./dist/lib/animation/getRangeFromPoint.js\"));\nvar getSelection_1 = __importDefault(__webpack_require__(/*! ./getSelection */ \"./dist/lib/animation/getSelection.js\"));\nvar getSyntheticEvent_1 = __importDefault(__webpack_require__(/*! ./getSyntheticEvent */ \"./dist/lib/animation/getSyntheticEvent.js\"));\nvar getWordSelection = function (state, ev, event, force) {\n    if (force === void 0) { force = false; }\n    var selection = (0, getSelection_1[\"default\"])();\n    var res = null;\n    if (selection) {\n        if (ev.target) {\n            var contentPlaceholderNode = state.contentPlaceholderNode;\n            var target = ev.target;\n            var targetStyle = window.getComputedStyle(target);\n            if (force ||\n                ((contentPlaceholderNode === null || contentPlaceholderNode === void 0 ? void 0 : contentPlaceholderNode.contains(target)) && targetStyle.userSelect !== 'none')) {\n                var syntheticEvent = event || (0, getSyntheticEvent_1[\"default\"])(ev);\n                selection.removeAllRanges();\n                var rangeFromPoint = (0, getRangeFromPoint_1[\"default\"])(syntheticEvent);\n                if (rangeFromPoint) {\n                    selection.addRange(rangeFromPoint.cloneRange());\n                    var range = selection.getRangeAt(0);\n                    selection.modify('move', 'backward', 'word');\n                    selection.modify('extend', 'forward', 'word');\n                    if (selection.toString().trim() &&\n                        (force ||\n                            ((range.startContainer === target || target.contains(range.startContainer)) &&\n                                (range.endContainer === target || target.contains(range.endContainer))))) {\n                        var finalRange = selection.getRangeAt(0);\n                        var _a = finalRange.getBoundingClientRect(), left = _a.left, right = _a.right, top_1 = _a.top, bottom = _a.bottom;\n                        var clientX = syntheticEvent.clientX, clientY = syntheticEvent.clientY;\n                        if ((left - 1 <= clientX &&\n                            right + 1 >= clientX &&\n                            top_1 - 1 <= clientY &&\n                            bottom + 1 >= clientY) ||\n                            (state.layout === 'fixed' &&\n                                targetStyle.cursor === 'text' &&\n                                clientX > right &&\n                                clientY < bottom &&\n                                clientY > top_1)) {\n                            res = finalRange;\n                        }\n                        else if (state.layout === 'fixed' &&\n                            targetStyle.cursor === 'text' &&\n                            clientX < left &&\n                            clientY > bottom) {\n                            selection.removeAllRanges();\n                            selection.addRange(rangeFromPoint.cloneRange());\n                            var newPointRange = selection.getRangeAt(0);\n                            selection.modify('extend', 'forward', 'word');\n                            if (selection.toString().trim() &&\n                                (force ||\n                                    ((newPointRange.startContainer === target ||\n                                        target.contains(newPointRange.startContainer)) &&\n                                        (newPointRange.endContainer === target ||\n                                            target.contains(newPointRange.endContainer))))) {\n                                var fixedRange = selection.getRangeAt(0);\n                                var fixedRect = fixedRange.getBoundingClientRect();\n                                if (fixedRect.left - 1 <= clientX &&\n                                    fixedRect.right + 1 >= clientX &&\n                                    fixedRect.top - 1 <= clientY &&\n                                    fixedRect.bottom + 1 >= clientY) {\n                                    res = fixedRange;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return res;\n};\nexports[\"default\"] = getWordSelection;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/getWordSelection.js?");

/***/ }),

/***/ "./dist/lib/animation/interpolate.js":
/*!*******************************************!*\
  !*** ./dist/lib/animation/interpolate.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar interpolate = function (state, value) {\n    var delta = value.target - value.current;\n    if (Math.abs(delta) < value.limit) {\n        value.current = value.target;\n        value.speed = 0;\n        return false;\n    }\n    var animationTension = state.animationSpeed / 10;\n    value.speed += delta / animationTension;\n    value.current += value.speed;\n    value.speed *= 1 - (state.animationFriction / animationTension);\n    return true;\n};\nexports[\"default\"] = interpolate;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/interpolate.js?");

/***/ }),

/***/ "./dist/lib/animation/interpolationValues.js":
/*!***************************************************!*\
  !*** ./dist/lib/animation/interpolationValues.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.resetInterpolationValues = exports.altScroll = exports.scroll = exports.topCorrector = exports.leftCorrector = exports.top = exports.left = exports.zoom = exports.scale = void 0;\nexports.scale = {\n    target: 1,\n    current: 1,\n    speed: 0,\n    limit: 0.001\n};\nexports.zoom = {\n    target: 1,\n    current: 1,\n    speed: 0,\n    limit: 0.001\n};\nexports.left = {\n    target: 0,\n    current: 0,\n    speed: 0,\n    limit: 2\n};\nexports.top = {\n    target: 0,\n    current: 0,\n    speed: 0,\n    limit: 2\n};\nexports.leftCorrector = {\n    target: 0,\n    current: 0,\n    speed: 0,\n    limit: 2\n};\nexports.topCorrector = {\n    target: 0,\n    current: 0,\n    speed: 0,\n    limit: 2\n};\nexports.scroll = {\n    target: 0,\n    current: 0,\n    speed: 0,\n    limit: 2\n};\nexports.altScroll = {\n    target: 0,\n    current: 0,\n    speed: 0,\n    limit: 2\n};\nvar resetInterpolationValues = function () {\n    exports.scale.current = 1;\n    exports.scale.target = 1;\n    exports.scale.speed = 0;\n    exports.zoom.current = 1;\n    exports.zoom.target = 1;\n    exports.zoom.speed = 0;\n    exports.left.current = 0;\n    exports.left.target = 0;\n    exports.left.speed = 0;\n    exports.top.current = 0;\n    exports.top.target = 0;\n    exports.top.speed = 0;\n    exports.leftCorrector.current = 0;\n    exports.leftCorrector.target = 0;\n    exports.leftCorrector.speed = 0;\n    exports.topCorrector.current = 0;\n    exports.topCorrector.target = 0;\n    exports.topCorrector.speed = 0;\n    exports.scroll.current = 0;\n    exports.scroll.target = 0;\n    exports.scroll.speed = 0;\n    exports.altScroll.current = 0;\n    exports.altScroll.target = 0;\n    exports.altScroll.speed = 0;\n};\nexports.resetInterpolationValues = resetInterpolationValues;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/interpolationValues.js?");

/***/ }),

/***/ "./dist/lib/animation/recalculateCurrentPage.js":
/*!******************************************************!*\
  !*** ./dist/lib/animation/recalculateCurrentPage.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.resetLastPage = void 0;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar loadContentsInBackground_1 = __importDefault(__webpack_require__(/*! ../../utils/loadContentsInBackground */ \"./dist/utils/loadContentsInBackground.js\"));\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar calculatePagePosition_1 = __importDefault(__webpack_require__(/*! ./calculatePagePosition */ \"./dist/lib/animation/calculatePagePosition.js\"));\nvar interpolationValues_1 = __webpack_require__(/*! ./interpolationValues */ \"./dist/lib/animation/interpolationValues.js\");\nvar lastStartPage = -1;\nvar lastEndPage = -1;\n/**\n * To be called on book change\n */\nvar resetLastPage = function () {\n    lastStartPage = -1;\n    lastEndPage = -1;\n};\nexports.resetLastPage = resetLastPage;\nvar recalculateCurrentPage = function (state, currentScroll, avoidUpdate) {\n    var _a, _b;\n    if (avoidUpdate === void 0) { avoidUpdate = false; }\n    var scrollPosition = Math.round(currentScroll * -1);\n    var target;\n    if (state.scrollMode !== 'fixed') {\n        if (state.scrollMode === 'horizontal') {\n            if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n                target = state.slugByPosition.get(scrollPosition);\n            }\n            else {\n                var targetScale = Math.abs(interpolationValues_1.scale.current * interpolationValues_1.zoom.current);\n                var targetScroll = (0, calculatePagePosition_1[\"default\"])(currentScroll, state) - state.margin.left / targetScale + 1;\n                var baseScroll = targetScroll - state.margin.left / targetScale;\n                var visibleWidth = state.containerWidth / targetScale;\n                var endScroll = baseScroll + visibleWidth;\n                var startPage = 0;\n                var endPage = -1;\n                var startingElementIndex = Math.floor((baseScroll * state.contentsInfo.length) / state.totalWidth) - 2;\n                for (var i = Math.max(0, startingElementIndex), l = state.contentsInfo.length; i < l && endPage === -1; i++) {\n                    var _c = state.contentsInfo[i], left = _c.left, maxLeft = _c.maxLeft, slug = _c.slug;\n                    if (left <= baseScroll) {\n                        startPage = i;\n                    }\n                    if (left <= targetScroll) {\n                        target = slug;\n                    }\n                    if (left <= endScroll && maxLeft >= endScroll) {\n                        endPage = i;\n                    }\n                }\n                if (endPage === -1) {\n                    endPage = state.contentsInfo.length - 1;\n                }\n                if (state.contentPlaceholderNode && state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                    if (lastStartPage !== startPage || endPage !== lastEndPage) {\n                        var containers = [];\n                        var pagesToAppend = new Set();\n                        for (var i = startPage; i <= endPage; i++) {\n                            var content = state.contentsByOrder.get(i);\n                            if (content && !state.contentPlaceholderNode.contains(content.container)) {\n                                containers.push(content.container);\n                            }\n                            pagesToAppend.add(i);\n                        }\n                        (_a = state.contentPlaceholderNode).append.apply(_a, containers);\n                        if (lastStartPage !== -1 && (lastStartPage < startPage || lastEndPage > endPage)) {\n                            for (var i = lastStartPage; i <= lastEndPage; i++) {\n                                if (!pagesToAppend.has(i)) {\n                                    var content = state.contentsByOrder.get(i);\n                                    if (content && state.contentPlaceholderNode.contains(content.container)) {\n                                        state.contentPlaceholderNode.removeChild(content.container);\n                                    }\n                                }\n                            }\n                        }\n                        lastStartPage = startPage;\n                        lastEndPage = endPage;\n                    }\n                }\n            }\n        }\n        else if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            var targetScale = Math.abs(interpolationValues_1.scale.current * interpolationValues_1.zoom.current);\n            var targetScroll = (0, calculatePagePosition_1[\"default\"])(currentScroll, state) - state.margin.top / targetScale + 1;\n            var baseScroll = targetScroll - state.margin.top / targetScale;\n            var visibleHeight = state.containerHeight / targetScale;\n            var endScroll = baseScroll + visibleHeight;\n            var startPage = 0;\n            var endPage = -1;\n            var startingElementIndex = Math.floor((baseScroll * state.contentsInfo.length) / state.totalHeight) - 1;\n            for (var i = Math.max(0, startingElementIndex), l = state.contentsInfo.length; i < l && endPage === -1; i++) {\n                var _d = state.contentsInfo[i], top_1 = _d.top, maxTop = _d.maxTop, slug = _d.slug;\n                if (top_1 <= baseScroll) {\n                    startPage = i;\n                }\n                if (top_1 <= targetScroll) {\n                    target = slug;\n                }\n                if (top_1 <= endScroll && maxTop >= endScroll) {\n                    endPage = i;\n                }\n            }\n            if (endPage === -1) {\n                endPage = state.contentsInfo.length - 1;\n            }\n            if (state.contentPlaceholderNode && state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                if (lastStartPage !== startPage || endPage !== lastEndPage) {\n                    var containers = [];\n                    var pagesToAppend = new Set();\n                    for (var i = startPage; i <= endPage; i++) {\n                        var content = state.contentsByOrder.get(i);\n                        if (content && !state.contentPlaceholderNode.contains(content.container)) {\n                            containers.push(content.container);\n                        }\n                        pagesToAppend.add(i);\n                    }\n                    (_b = state.contentPlaceholderNode).append.apply(_b, containers);\n                    if (lastStartPage !== -1 && (lastStartPage < startPage || lastEndPage > endPage)) {\n                        for (var i = lastStartPage; i <= lastEndPage; i++) {\n                            if (!pagesToAppend.has(i)) {\n                                var content = state.contentsByOrder.get(i);\n                                if (content && state.contentPlaceholderNode.contains(content.container)) {\n                                    state.contentPlaceholderNode.removeChild(content.container);\n                                }\n                            }\n                        }\n                    }\n                    lastStartPage = startPage;\n                    lastEndPage = endPage;\n                }\n            }\n        }\n        else if (state.slugByPosition) {\n            var lastTarget = '';\n            var slugsPositions = Array.from(state.slugByPosition.entries());\n            for (var i = 0, l = slugsPositions.length; !target && i < l; i++) {\n                var _e = slugsPositions[i], position = _e[0], slug = _e[1];\n                if (position > scrollPosition && lastTarget) {\n                    target = lastTarget;\n                }\n                lastTarget = slug;\n            }\n        }\n    }\n    if (target !== undefined && !avoidUpdate) {\n        (0, state_1.updateState)({ contentSlug: target });\n    }\n    else if (state.layout === viewerSettings_1.LayoutTypes.Fixed && avoidUpdate && target) {\n        (0, loadContentsInBackground_1[\"default\"])(state, target);\n    }\n};\nexports[\"default\"] = recalculateCurrentPage;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/recalculateCurrentPage.js?");

/***/ }),

/***/ "./dist/lib/animation/scrollController.js":
/*!************************************************!*\
  !*** ./dist/lib/animation/scrollController.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.reCalcScrollLimits = void 0;\n/* eslint-disable no-bitwise */\n/* eslint-disable no-param-reassign */\n/* eslint-disable @typescript-eslint/no-unused-vars */\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar highlights_1 = __webpack_require__(/*! ../../utils/highlights */ \"./dist/utils/highlights/index.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar state_1 = __webpack_require__(/*! ../state */ \"./dist/lib/state/index.js\");\nvar getCoordinatesFromEvent_1 = __importDefault(__webpack_require__(/*! ./getCoordinatesFromEvent */ \"./dist/lib/animation/getCoordinatesFromEvent.js\"));\nvar getMinAndMaxScroll_1 = __importStar(__webpack_require__(/*! ./getMinAndMaxScroll */ \"./dist/lib/animation/getMinAndMaxScroll.js\"));\nvar getSyntheticEvent_1 = __importDefault(__webpack_require__(/*! ./getSyntheticEvent */ \"./dist/lib/animation/getSyntheticEvent.js\"));\nvar interpolationValues_1 = __webpack_require__(/*! ./interpolationValues */ \"./dist/lib/animation/interpolationValues.js\");\nvar getWordSelection_1 = __importDefault(__webpack_require__(/*! ./getWordSelection */ \"./dist/lib/animation/getWordSelection.js\"));\nvar scrollInertiaAndLimits_1 = __importDefault(__webpack_require__(/*! ./scrollInertiaAndLimits */ \"./dist/lib/animation/scrollInertiaAndLimits.js\"));\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar updateZoom_1 = __importDefault(__webpack_require__(/*! ./updateZoom */ \"./dist/lib/animation/updateZoom.js\"));\nvar getClickedHighlight_1 = __importDefault(__webpack_require__(/*! ./getClickedHighlight */ \"./dist/lib/animation/getClickedHighlight.js\"));\nvar removeSelectionMenu_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeSelectionMenu */ \"./dist/utils/highlights/removeSelectionMenu.js\"));\nvar removeNotesDialog_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/removeNotesDialog */ \"./dist/utils/highlights/removeNotesDialog.js\"));\nvar drawExtensors_1 = __importStar(__webpack_require__(/*! ../../utils/highlights/drawExtensors */ \"./dist/utils/highlights/drawExtensors.js\"));\nvar extendSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/extendSelection */ \"./dist/utils/highlights/extendSelection.js\"));\nvar clearNativeSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/clearNativeSelection */ \"./dist/utils/highlights/clearNativeSelection.js\"));\nvar clearSelection_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/clearSelection */ \"./dist/utils/highlights/clearSelection.js\"));\nvar getFixedContentContainer_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/getFixedContentContainer */ \"./dist/utils/highlights/getFixedContentContainer.js\"));\nvar getClickedLink_1 = __importDefault(__webpack_require__(/*! ../../utils/highlights/getClickedLink */ \"./dist/utils/highlights/getClickedLink.js\"));\nvar stateChangeEvents_1 = __webpack_require__(/*! ../state/stateChangeEvents */ \"./dist/lib/state/stateChangeEvents.js\");\nvar getTouches_1 = __importDefault(__webpack_require__(/*! ../../utils/getTouches */ \"./dist/utils/getTouches.js\"));\nvar calculateDistance_1 = __importDefault(__webpack_require__(/*! ../../utils/calculateDistance */ \"./dist/utils/calculateDistance.js\"));\nvar getTouchCenter_1 = __importDefault(__webpack_require__(/*! ../../utils/getTouchCenter */ \"./dist/utils/getTouchCenter.js\"));\nvar recalculateCurrentPage_1 = __importDefault(__webpack_require__(/*! ./recalculateCurrentPage */ \"./dist/lib/animation/recalculateCurrentPage.js\"));\nvar navigateToPreviousChapter_1 = __importDefault(__webpack_require__(/*! ../actions/navigateToPreviousChapter */ \"./dist/lib/actions/navigateToPreviousChapter.js\"));\nvar navigateToNextChapter_1 = __importDefault(__webpack_require__(/*! ../actions/navigateToNextChapter */ \"./dist/lib/actions/navigateToNextChapter.js\"));\nvar reCalcScrollLimits = function (state, instant) {\n    if (instant === void 0) { instant = false; }\n    var scrollLimits = (0, getMinAndMaxScroll_1[\"default\"])(state);\n    if (interpolationValues_1.scroll.target > scrollLimits.maxScroll) {\n        interpolationValues_1.scroll.target = scrollLimits.maxScroll;\n        interpolationValues_1.scroll.speed = 0;\n    }\n    else if (interpolationValues_1.scroll.target < scrollLimits.minScroll) {\n        interpolationValues_1.scroll.target = scrollLimits.minScroll;\n        interpolationValues_1.scroll.speed = 0;\n    }\n    var altScrollLimits = (0, getMinAndMaxScroll_1.getMinAndMaxAltScroll)(state);\n    if (interpolationValues_1.altScroll.target > altScrollLimits.maxScroll) {\n        interpolationValues_1.altScroll.target = altScrollLimits.maxScroll;\n        interpolationValues_1.altScroll.speed = 0;\n    }\n    else if (interpolationValues_1.altScroll.target < altScrollLimits.minScroll) {\n        interpolationValues_1.altScroll.target = altScrollLimits.minScroll;\n        interpolationValues_1.altScroll.speed = 0;\n    }\n    if (instant) {\n        interpolationValues_1.scroll.current = interpolationValues_1.scroll.target;\n        interpolationValues_1.altScroll.current = interpolationValues_1.altScroll.target;\n    }\n};\nexports.reCalcScrollLimits = reCalcScrollLimits;\nvar scrollController = function (state, dispatch, executeTransitions) {\n    var _a, _b, _c, _d, _e;\n    var selectionHighlightsNode = state.selectionHighlightsNode;\n    var mouseDown = false;\n    var lastDelta = 0;\n    var altDelta = 0;\n    var fingers = 0;\n    var lastX = null;\n    var lastY = null;\n    var lastMoveMilliseconds = new Date().getTime();\n    var lastTouchStart = 0;\n    var lastZoomCenter = null;\n    var startTouches = new Array();\n    var nthZoom = 0;\n    var lastZoom = 1;\n    var zoomFactor = 1;\n    var initialSelection = null;\n    var currentSelection = null;\n    var isFirstMove = true;\n    var isDoubleTap = false;\n    var updatePlanned = false;\n    var isSelecting = false;\n    var mobileSelection = false;\n    var clickedLink = null;\n    var clickSecurityTimeout = null;\n    var isClick = false;\n    var syntheticEvent;\n    var mobileSelectionTimeout = null;\n    var detectDoubleTap = function (ev) {\n        var time = new Date().getTime();\n        if (fingers > 1) {\n            lastTouchStart = 0;\n        }\n        isDoubleTap = time - lastTouchStart < state.config.doubleTapThreshold;\n        if (fingers === 1) {\n            lastTouchStart = time;\n        }\n    };\n    var handleZoom = function (ev, newZoom) {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            var touchCenter = (0, getTouchCenter_1[\"default\"])((0, getTouches_1[\"default\"])(ev));\n            nthZoom += 1;\n            if (nthZoom > 3) {\n                var theZoom = newZoom / lastZoom;\n                lastZoom = newZoom;\n                var originalZoomFactor = zoomFactor;\n                zoomFactor *= theZoom;\n                theZoom = zoomFactor / originalZoomFactor;\n                interpolationValues_1.zoom.target *= theZoom;\n                interpolationValues_1.zoom.target = Math.min(state.config.zoom.max, Math.max(interpolationValues_1.zoom.target, state.config.zoom.min));\n                if (interpolationValues_1.zoom.current !== interpolationValues_1.zoom.target) {\n                    if (state.scrollMode === 'vertical') {\n                        interpolationValues_1.scroll.target -= (theZoom - 1) * (touchCenter.y / interpolationValues_1.zoom.target);\n                        interpolationValues_1.altScroll.target -= (theZoom - 1) * (touchCenter.x / interpolationValues_1.zoom.target);\n                    }\n                    if (state.scrollMode === 'horizontal') {\n                        interpolationValues_1.scroll.target -= (theZoom - 1) * (touchCenter.x / interpolationValues_1.zoom.target);\n                        interpolationValues_1.altScroll.target -= (theZoom - 1) * (touchCenter.y / interpolationValues_1.zoom.target);\n                    }\n                    (0, exports.reCalcScrollLimits)(state, true);\n                }\n                if (lastZoomCenter) {\n                    if (state.scrollMode === 'vertical') {\n                        interpolationValues_1.scroll.target += touchCenter.y - lastZoomCenter.y;\n                        interpolationValues_1.altScroll.target += touchCenter.x - lastZoomCenter.x;\n                    }\n                    if (state.scrollMode === 'horizontal') {\n                        interpolationValues_1.scroll.target += touchCenter.x - lastZoomCenter.x;\n                        interpolationValues_1.altScroll.target += touchCenter.y - lastZoomCenter.y;\n                    }\n                }\n                if (updatePlanned) {\n                    return;\n                }\n                updatePlanned = true;\n                setTimeout(function () {\n                    updatePlanned = false;\n                    (0, state_1.updateState)({ animate: false });\n                    executeTransitions();\n                    (0, state_1.updateState)({ animate: true, fitMode: undefined });\n                    (0, recalculateCurrentPage_1[\"default\"])(state, interpolationValues_1.scroll.current, true);\n                }, 0);\n            }\n            lastZoomCenter = touchCenter;\n        }\n    };\n    var onDragStart = function (ev) {\n        if (ev.type === 'touchstart') {\n            isFirstMove = true;\n            fingers = ev.touches.length;\n            detectDoubleTap(ev);\n        }\n        else {\n            isFirstMove = false;\n        }\n        clickedLink = null;\n        (0, clearSelection_1[\"default\"])();\n        (0, drawExtensors_1.removeExtensors)(state);\n        (0, removeSelectionMenu_1[\"default\"])(state);\n        (0, removeNotesDialog_1[\"default\"])(state);\n        if ((ev.type === 'touchstart' && fingers === 1) || ev.button === 0) {\n            (0, setCSSProperty_1[\"default\"])('user-select', 'none');\n            initialSelection = null;\n            currentSelection = null;\n            isSelecting = false;\n            syntheticEvent = (0, getSyntheticEvent_1[\"default\"])(ev);\n            if (clickSecurityTimeout) {\n                clearTimeout(clickSecurityTimeout);\n                clickSecurityTimeout = null;\n            }\n            isClick = true;\n            var clickedHighlight = !state.config.disableSelection &&\n                state.config.eventHandler &&\n                (0, getClickedHighlight_1[\"default\"])(ev, syntheticEvent);\n            if (clickedHighlight) {\n                var userHighlightInfo = state.currentUserHighlights.get(clickedHighlight);\n                if (userHighlightInfo) {\n                    var start = userHighlightInfo.start, end = userHighlightInfo.end, obfuscatedText = userHighlightInfo.obfuscatedText;\n                    var onHighlightClick = {\n                        type: 'onHighlightClick',\n                        slug: state.slug,\n                        productSlug: state.productSlug,\n                        key: clickedHighlight,\n                        ranges: [{ start: start, end: end, obfuscatedText: obfuscatedText }]\n                    };\n                    var handler = state.config.eventHandler;\n                    handler(onHighlightClick)[\"catch\"](function (ex) {\n                        var _a = ex, stack = _a.stack, message = _a.message;\n                        console.error('Error at handler', stack || message);\n                    });\n                    (0, state_1.updateState)({\n                        lastClickCoords: { x: syntheticEvent.clientX, y: syntheticEvent.clientY },\n                        highlightClicked: true\n                    });\n                    return;\n                }\n            }\n            (0, setCSSProperty_1[\"default\"])('user-select', 'text');\n            var wordSelection_1 = !state.config.disableSelection && (0, getWordSelection_1[\"default\"])(state, ev, syntheticEvent);\n            (0, setCSSProperty_1[\"default\"])('user-select', 'none');\n            if (wordSelection_1) {\n                clickedLink = (0, getClickedLink_1[\"default\"])(syntheticEvent, state);\n                ev.stopPropagation();\n                initialSelection = {\n                    startContainer: wordSelection_1.startContainer,\n                    startOffset: wordSelection_1.startOffset,\n                    endContainer: wordSelection_1.endContainer,\n                    endOffset: wordSelection_1.endOffset\n                };\n                if (ev.type === 'touchstart') {\n                    mobileSelectionTimeout = setTimeout(function () {\n                        mobileSelection = true;\n                        mobileSelectionTimeout = null;\n                        currentSelection = wordSelection_1;\n                        (0, state_1.updateState)({\n                            selectingText: true\n                        });\n                    }, 400);\n                }\n                else if (!clickedLink) {\n                    ev.preventDefault();\n                    isSelecting = true;\n                    return;\n                }\n            }\n            mouseDown = true;\n            lastX = null;\n            lastY = null;\n            lastDelta = 0;\n            altDelta = 0;\n        }\n    };\n    var updateScrollDeltas = function (ev) {\n        var screenToScale = 1 /\n            (state.layout === viewerSettings_1.LayoutTypes.Flow\n                ? Math.abs(interpolationValues_1.scale.current)\n                : Math.abs(interpolationValues_1.scale.current * interpolationValues_1.zoom.current));\n        var coordinates = (0, getCoordinatesFromEvent_1[\"default\"])(ev);\n        if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n            if (state.scrollMode === 'horizontal') {\n                if (lastX !== null) {\n                    lastDelta = coordinates.x - lastX;\n                    lastDelta *= screenToScale;\n                }\n                lastX = coordinates.x;\n            }\n            if (state.scrollMode === 'vertical') {\n                if (lastY !== null) {\n                    lastDelta = coordinates.y - lastY;\n                    lastDelta *= screenToScale;\n                }\n                lastY = coordinates.y;\n            }\n        }\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            if (state.scrollMode === 'horizontal') {\n                if (lastX !== null) {\n                    lastDelta = coordinates.x - lastX;\n                    lastDelta *= screenToScale;\n                }\n                lastX = coordinates.x;\n                if (lastY !== null) {\n                    altDelta = coordinates.y - lastY;\n                    altDelta *= screenToScale;\n                }\n                lastY = coordinates.y;\n            }\n            if (state.scrollMode === 'vertical') {\n                if (lastX !== null) {\n                    altDelta = coordinates.x - lastX;\n                    altDelta *= screenToScale;\n                }\n                lastX = coordinates.x;\n                if (lastY !== null) {\n                    lastDelta = coordinates.y - lastY;\n                    lastDelta *= screenToScale;\n                }\n                lastY = coordinates.y;\n            }\n        }\n    };\n    var onDragEnd = function (ev) {\n        if (mobileSelectionTimeout) {\n            clearTimeout(mobileSelectionTimeout);\n            mobileSelectionTimeout = null;\n        }\n        if (mouseDown) {\n            mouseDown = false;\n            var inertialDelta = lastDelta;\n            var altInertialDelta = altDelta;\n            updateScrollDeltas(ev);\n            var timeFromLastMove = new Date().getTime() - lastMoveMilliseconds;\n            if (lastDelta || timeFromLastMove > 100) {\n                if (Math.sign(lastDelta) === Math.sign(inertialDelta)) {\n                    inertialDelta = lastDelta;\n                }\n                else if (timeFromLastMove > 100) {\n                    inertialDelta = 0;\n                }\n            }\n            interpolationValues_1.scroll.target = interpolationValues_1.scroll.current + inertialDelta * state.animationInertia;\n            (0, scrollInertiaAndLimits_1[\"default\"])(state, interpolationValues_1.scroll, inertialDelta, executeTransitions, dispatch);\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                if (altDelta || timeFromLastMove > 100) {\n                    if (Math.sign(altDelta) === Math.sign(altInertialDelta)) {\n                        altInertialDelta = altDelta;\n                    }\n                    else if (timeFromLastMove > 100) {\n                        altInertialDelta = 0;\n                    }\n                }\n                interpolationValues_1.altScroll.target = interpolationValues_1.altScroll.current + altDelta * state.animationInertia;\n                (0, scrollInertiaAndLimits_1[\"default\"])(state, interpolationValues_1.altScroll, altInertialDelta, executeTransitions, dispatch, false, true);\n            }\n            if (isClick && state.config.eventHandler) {\n                isClick = false;\n                clickedLink = clickedLink || (0, getClickedLink_1[\"default\"])(syntheticEvent, state);\n                if (clickedLink) {\n                    ev.preventDefault();\n                    var customInfo = clickedLink.dataset.link && state.linksCustomProps.get(clickedLink.dataset.link);\n                    var event_1 = {\n                        type: 'onLinkClick',\n                        slug: state.slug,\n                        productSlug: state.productSlug,\n                        url: clickedLink.getAttribute('href'),\n                        querySelector: \"[data-link=\\\"\".concat(clickedLink.dataset.link || '', \"\\\"]\")\n                    };\n                    state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                        var _a = ex, stack = _a.stack, message = _a.message;\n                        console.error('Error at event handler', stack || message);\n                    });\n                }\n            }\n            setTimeout(function () {\n                (0, state_1.updateState)({\n                    dragging: false\n                });\n                if (!state.animating) {\n                    (0, setCSSProperty_1[\"default\"])('pointer-events', 'auto');\n                    (0, setCSSProperty_1[\"default\"])('user-select', 'auto');\n                }\n            }, 0);\n        }\n        if (initialSelection && currentSelection) {\n            ev.preventDefault();\n            (0, state_1.updateState)({\n                currentSelection: currentSelection\n            });\n            if (mobileSelection) {\n                var highlights = (0, highlights_1.drawHighlights)(selectionHighlightsNode, [currentSelection]);\n                mobileSelection = false;\n                (0, drawExtensors_1[\"default\"])(highlights, currentSelection, state);\n            }\n            else {\n                syntheticEvent = (0, getSyntheticEvent_1[\"default\"])(ev);\n                (0, state_1.updateState)({\n                    lastClickCoords: { x: syntheticEvent.clientX, y: syntheticEvent.clientY }\n                });\n                (0, highlights_1.drawHighlights)(selectionHighlightsNode, [currentSelection]);\n            }\n            (0, setCSSProperty_1[\"default\"])('user-select', 'none');\n            (0, clearNativeSelection_1[\"default\"])();\n            setTimeout(function () {\n                (0, state_1.updateState)({\n                    selectingText: false\n                });\n            }, 0);\n            if (!currentSelection.collapsed &&\n                currentSelection.toString().trim() &&\n                state.config.eventHandler) {\n                var event_2 = {\n                    type: 'onUserSelect',\n                    slug: state.slug,\n                    productSlug: state.productSlug\n                };\n                state.config.eventHandler(event_2)[\"catch\"](function (ex) {\n                    var _a = ex, stack = _a.stack, message = _a.message;\n                    console.error('Error at event handler', stack || message);\n                });\n            }\n        }\n        if (state.highlightClicked) {\n            setTimeout(function () {\n                (0, state_1.updateState)({ highlightClicked: false });\n            }, 0);\n        }\n        initialSelection = null;\n        currentSelection = null;\n        mobileSelection = false;\n        isSelecting = false;\n    };\n    var onDragMove = function (ev) {\n        if (ev.type === 'touchmove' && fingers === 2 && !isDoubleTap) {\n            mouseDown = false;\n            mobileSelection = false;\n            isSelecting = false;\n            initialSelection = null;\n            currentSelection = null;\n            var touchEvent = ev;\n            ev.stopPropagation();\n            ev.preventDefault();\n            if (isFirstMove) {\n                lastZoom = 1;\n                nthZoom = 0;\n                lastZoomCenter = null;\n                startTouches = (0, getTouches_1[\"default\"])(touchEvent);\n            }\n            else if (startTouches.length === 2 && touchEvent.touches.length === 2) {\n                handleZoom(touchEvent, (0, calculateDistance_1[\"default\"])(startTouches, (0, getTouches_1[\"default\"])(touchEvent)));\n            }\n            else {\n                loglevel_1[\"default\"].warn('Not first move and not same touches');\n            }\n            isFirstMove = false;\n            return;\n        }\n        if (isClick) {\n            if (clickSecurityTimeout) {\n                isClick = false;\n                clickedLink = null;\n                clearTimeout(clickSecurityTimeout);\n                clickSecurityTimeout = null;\n            }\n            else {\n                clickSecurityTimeout = setTimeout(function () {\n                    clickSecurityTimeout = null;\n                    isClick = false;\n                    clickedLink = null;\n                }, state.config.clickTimeout);\n            }\n        }\n        if (mobileSelectionTimeout) {\n            (0, state_1.updateState)({\n                selectingText: false\n            });\n            clearTimeout(mobileSelectionTimeout);\n            mobileSelectionTimeout = null;\n            mobileSelection = false;\n        }\n        if (mouseDown) {\n            ev.stopPropagation();\n            if (!state.dragging) {\n                (0, state_1.updateState)({\n                    dragging: true\n                });\n                (0, setCSSProperty_1[\"default\"])('pointer-events', 'none');\n                (0, setCSSProperty_1[\"default\"])('user-select', 'none');\n            }\n            interpolationValues_1.scroll.forceUpdate = true;\n            updateScrollDeltas(ev);\n            interpolationValues_1.scroll.current += lastDelta;\n            interpolationValues_1.scroll.target = interpolationValues_1.scroll.current;\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                if (state.scrollMode === 'vertical') {\n                    var fitWidthZoom = window.innerWidth / state.maxWidth;\n                    if (fitWidthZoom < interpolationValues_1.zoom.current) {\n                        interpolationValues_1.altScroll.current += altDelta;\n                        interpolationValues_1.altScroll.target = interpolationValues_1.altScroll.current;\n                    }\n                }\n                else if (state.scrollMode === 'horizontal') {\n                    var fitHeightZoom = window.innerHeight / state.maxHeight;\n                    if (fitHeightZoom < interpolationValues_1.zoom.current) {\n                        interpolationValues_1.altScroll.current += altDelta;\n                        interpolationValues_1.altScroll.target = interpolationValues_1.altScroll.current;\n                    }\n                }\n            }\n            executeTransitions();\n            interpolationValues_1.scroll.forceUpdate = false;\n            lastMoveMilliseconds = new Date().getTime();\n        }\n        if (isSelecting && initialSelection) {\n            (0, setCSSProperty_1[\"default\"])('user-select', 'text');\n            if (!state.selectingText) {\n                (0, state_1.updateState)({\n                    selectingText: true\n                });\n            }\n            var event_3 = (0, getSyntheticEvent_1[\"default\"])(ev);\n            var wordSelection = (0, getWordSelection_1[\"default\"])(state, ev, event_3);\n            if (wordSelection) {\n                var container = state.layout === viewerSettings_1.LayoutTypes.Fixed &&\n                    (0, getFixedContentContainer_1[\"default\"])(wordSelection.startContainer);\n                if (!container || container.contains(initialSelection.startContainer)) {\n                    var range = (0, extendSelection_1[\"default\"])(wordSelection, initialSelection).range;\n                    currentSelection = range;\n                    (0, highlights_1.drawHighlights)(selectionHighlightsNode, [currentSelection]);\n                }\n            }\n        }\n    };\n    var onWheelStopTimeout = null;\n    var onWheelStop = function () {\n        onWheelStopTimeout = null;\n        (0, scrollInertiaAndLimits_1[\"default\"])(state, interpolationValues_1.scroll, lastDelta, executeTransitions, dispatch, true);\n    };\n    var onWheel = function (ev) {\n        if (ev.ctrlKey) {\n            if (state.layout === 'flow') {\n                if (ev.deltaY < 0 && !state.readMode) {\n                    var action = {\n                        type: 'setReadMode',\n                        readModeActive: true\n                    };\n                    dispatch(action)[\"catch\"](function (ex) {\n                        var _a = ex, stack = _a.stack, message = _a.message;\n                        console.error('Error dispatching action', stack || message);\n                    });\n                }\n                if (ev.deltaY > 0 && state.readMode) {\n                    var action = {\n                        type: 'setReadMode',\n                        readModeActive: false\n                    };\n                    dispatch(action)[\"catch\"](function (ex) {\n                        var _a = ex, stack = _a.stack, message = _a.message;\n                        console.error('Error dispatching action', stack || message);\n                    });\n                }\n            }\n            else {\n                (0, state_1.updateState)({ fitMode: undefined });\n                (0, updateZoom_1[\"default\"])(interpolationValues_1.zoom.target - ev.deltaY * state.zoomSpeed, state);\n                (0, exports.reCalcScrollLimits)(state);\n                executeTransitions();\n            }\n            ev.preventDefault();\n        }\n        else if (!mouseDown) {\n            if (!state.dragging) {\n                (0, state_1.updateState)({\n                    dragging: true\n                });\n            }\n            interpolationValues_1.scroll.forceUpdate = true;\n            if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                if (state.scrollMode === 'vertical') {\n                    lastDelta = ev.deltaY * -1;\n                    altDelta = ev.deltaX * -1;\n                }\n                else {\n                    lastDelta = ev.deltaX * -1;\n                    altDelta = ev.deltaY * -1;\n                }\n                interpolationValues_1.altScroll.current += altDelta;\n                var altScrollLimits = (0, getMinAndMaxScroll_1.getMinAndMaxAltScroll)(state);\n                if (interpolationValues_1.altScroll.current > altScrollLimits.maxScroll) {\n                    interpolationValues_1.altScroll.current = altScrollLimits.maxScroll;\n                    interpolationValues_1.altScroll.speed = 0;\n                    altDelta = 0;\n                }\n                else if (interpolationValues_1.altScroll.current < altScrollLimits.minScroll) {\n                    interpolationValues_1.altScroll.current = altScrollLimits.minScroll;\n                    interpolationValues_1.altScroll.speed = 0;\n                    altDelta = 0;\n                }\n                interpolationValues_1.altScroll.target = interpolationValues_1.altScroll.current;\n            }\n            else if (ev.deltaX !== 0) {\n                lastDelta = ev.deltaX * -1;\n            }\n            else {\n                lastDelta = ev.deltaY * -1;\n            }\n            interpolationValues_1.scroll.current += lastDelta;\n            var scrollLimits = (0, getMinAndMaxScroll_1[\"default\"])(state);\n            if (interpolationValues_1.scroll.current > scrollLimits.maxScroll) {\n                interpolationValues_1.scroll.current = scrollLimits.maxScroll;\n                interpolationValues_1.scroll.speed = 0;\n                lastDelta = 0;\n            }\n            else if (interpolationValues_1.scroll.current < scrollLimits.minScroll) {\n                interpolationValues_1.scroll.current = scrollLimits.minScroll;\n                interpolationValues_1.scroll.speed = 0;\n                lastDelta = 0;\n            }\n            interpolationValues_1.scroll.target = interpolationValues_1.scroll.current;\n            executeTransitions();\n            interpolationValues_1.scroll.forceUpdate = false;\n            if (onWheelStopTimeout) {\n                clearTimeout(onWheelStopTimeout);\n            }\n            onWheelStopTimeout = setTimeout(onWheelStop, 50);\n            ev.preventDefault();\n        }\n    };\n    var onScroll = function (ev) {\n        if (state.scrollMode === 'horizontal') {\n            lastDelta = (-1 * state.scrollerNode.scrollLeft - interpolationValues_1.scroll.current) * 0.1;\n        }\n        else {\n            lastDelta = (-1 * state.scrollerNode.scrollTop - interpolationValues_1.scroll.current) * 0.1;\n        }\n        if (!state.updatingScroller) {\n            ev.preventDefault();\n            if (state.scrollMode === 'horizontal') {\n                interpolationValues_1.scroll.target = -1 * state.scrollerNode.scrollLeft;\n                interpolationValues_1.scroll.current = interpolationValues_1.scroll.target;\n            }\n            else if (state.scrollMode === 'vertical') {\n                interpolationValues_1.scroll.target = -1 * state.scrollerNode.scrollTop;\n                interpolationValues_1.scroll.current = interpolationValues_1.scroll.target;\n            }\n            executeTransitions(mouseDown);\n        }\n    };\n    var avoidDrag = function (ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n    };\n    var onNextChapter = function (ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        (0, navigateToNextChapter_1[\"default\"])({\n            action: {\n                type: 'navigateToNextChapter'\n            },\n            state: state\n        })[\"catch\"](console.error);\n    };\n    var onPrevChapter = function (ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        (0, navigateToPreviousChapter_1[\"default\"])({\n            action: {\n                type: 'navigateToPreviousChapter',\n                goToEnd: true\n            },\n            state: state\n        })[\"catch\"](console.error);\n    };\n    (_a = state.olectioContainerNode) === null || _a === void 0 ? void 0 : _a.addEventListener('dragstart', avoidDrag);\n    (_b = state.olectioContainerNode) === null || _b === void 0 ? void 0 : _b.addEventListener('dragend', avoidDrag);\n    (_c = state.olectioContainerNode) === null || _c === void 0 ? void 0 : _c.addEventListener('mousedown', onDragStart);\n    (_d = state.olectioContainerNode) === null || _d === void 0 ? void 0 : _d.addEventListener('touchstart', onDragStart);\n    if (state.scrollerNode) {\n        state.scrollerNode.addEventListener('scroll', onScroll);\n    }\n    if (state.nextChapterButton) {\n        state.nextChapterButton.addEventListener('click', onNextChapter);\n    }\n    if (state.prevChapterButton) {\n        state.prevChapterButton.addEventListener('click', onPrevChapter);\n    }\n    window.addEventListener('mouseup', onDragEnd);\n    window.addEventListener('touchend', onDragEnd);\n    window.addEventListener('mousemove', onDragMove);\n    window.addEventListener('touchmove', onDragMove);\n    (_e = state.olectioContainerNode) === null || _e === void 0 ? void 0 : _e.addEventListener('wheel', onWheel);\n    (0, stateChangeEvents_1.addOnChangeEventListener)('containerHeight', function () {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            if (state.scrollMode === 'vertical') {\n                (0, scrollInertiaAndLimits_1[\"default\"])(state, interpolationValues_1.scroll, 0, executeTransitions, dispatch, true, false, true);\n            }\n            if (state.scrollMode === 'horizontal') {\n                (0, scrollInertiaAndLimits_1[\"default\"])(state, interpolationValues_1.altScroll, 0, executeTransitions, dispatch, true, true, true);\n            }\n        }\n    });\n    (0, stateChangeEvents_1.addOnChangeEventListener)('containerWidth', function () {\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            if (state.scrollMode === 'vertical') {\n                (0, scrollInertiaAndLimits_1[\"default\"])(state, interpolationValues_1.altScroll, 0, executeTransitions, dispatch, true, true, true);\n            }\n            if (state.scrollMode === 'horizontal') {\n                (0, scrollInertiaAndLimits_1[\"default\"])(state, interpolationValues_1.scroll, 0, executeTransitions, dispatch, true, false, true);\n            }\n        }\n    });\n};\nexports[\"default\"] = scrollController;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/scrollController.js?");

/***/ }),

/***/ "./dist/lib/animation/scrollInertiaAndLimits.js":
/*!******************************************************!*\
  !*** ./dist/lib/animation/scrollInertiaAndLimits.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar getMinAndMaxScroll_1 = __importStar(__webpack_require__(/*! ./getMinAndMaxScroll */ \"./dist/lib/animation/getMinAndMaxScroll.js\"));\nvar scrollInertiaAndLimits = function (state, scroll, lastDelta, executeTransitions, dispatch, avoidInertia, isAltScroll, instant) {\n    if (avoidInertia === void 0) { avoidInertia = false; }\n    if (isAltScroll === void 0) { isAltScroll = false; }\n    if (instant === void 0) { instant = false; }\n    var min = null;\n    var max = null;\n    var minDistance = null;\n    if (state.layout === viewerSettings_1.LayoutTypes.Flow && state.scrollMode === 'horizontal') {\n        var scrollingToTheRight_1 = lastDelta < 0;\n        var scrollingToTheLeft_1 = lastDelta > 0;\n        var scrollingToTheNearest_1 = lastDelta === 0;\n        var targetPosition_1 = scroll.target * -1;\n        var found_1 = false;\n        var target_1 = null;\n        var i_1 = 0;\n        state.slugByPosition.forEach(function (_, key) {\n            if (!found_1 && i_1++ % state.columnsInViewport === 0) {\n                if (min === null) {\n                    min = key;\n                }\n                max = key;\n                if (scrollingToTheRight_1) {\n                    if (key > targetPosition_1) {\n                        found_1 = true;\n                        target_1 = key;\n                    }\n                }\n                if (scrollingToTheLeft_1) {\n                    if (key < targetPosition_1) {\n                        target_1 = key;\n                    }\n                }\n                if (scrollingToTheNearest_1) {\n                    if (minDistance === null || minDistance > Math.abs(key - targetPosition_1)) {\n                        target_1 = key;\n                        minDistance = Math.abs(key - targetPosition_1);\n                    }\n                }\n            }\n        });\n        if (target_1 !== null) {\n            scroll.target = target_1 * -1;\n        }\n    }\n    else if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n        max = state.totalHeight + state.config.paddingBottom + state.config.paddingTop;\n    }\n    else {\n        var scrollLimits = void 0;\n        if (isAltScroll) {\n            scrollLimits = (0, getMinAndMaxScroll_1.getMinAndMaxAltScroll)(state);\n        }\n        else {\n            scrollLimits = (0, getMinAndMaxScroll_1[\"default\"])(state, 100);\n        }\n        if (!avoidInertia) {\n            scroll.target += lastDelta * state.animationInertia;\n        }\n        min = scrollLimits.maxScroll * -1;\n        max = scrollLimits.minScroll * -1;\n    }\n    if (min !== null && scroll.target * -1 < min) {\n        scroll.target = min * -1;\n    }\n    if (max !== null && scroll.target * -1 > max) {\n        scroll.target = max * -1;\n    }\n    if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n        var scrollLimits = (0, getMinAndMaxScroll_1[\"default\"])(state, 100);\n        if (scroll.current >= scrollLimits.maxScroll) {\n            var navigateToPrevious = {\n                type: 'navigateToPreviousChapter',\n                goToEnd: true\n            };\n            dispatch(navigateToPrevious)[\"catch\"](function (ex) {\n                var _a = ex, stack = _a.stack, message = _a.message;\n                console.error('Error dispatching action', stack || message);\n            });\n        }\n        else if (scroll.current <= scrollLimits.minScroll) {\n            dispatch({ type: 'navigateToNextChapter' })[\"catch\"](function (ex) {\n                var _a = ex, stack = _a.stack, message = _a.message;\n                console.error('Error dispatching action', stack || message);\n            });\n        }\n    }\n    executeTransitions(instant);\n};\nexports[\"default\"] = scrollInertiaAndLimits;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/scrollInertiaAndLimits.js?");

/***/ }),

/***/ "./dist/lib/animation/updateZoom.js":
/*!******************************************!*\
  !*** ./dist/lib/animation/updateZoom.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar interpolationValues_1 = __webpack_require__(/*! ./interpolationValues */ \"./dist/lib/animation/interpolationValues.js\");\nvar updateZoom = function (newZoomValue, state) {\n    if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n        var previousZoom = interpolationValues_1.zoom.target;\n        interpolationValues_1.zoom.target = newZoomValue;\n        interpolationValues_1.zoom.target = Math.min(Math.max(interpolationValues_1.zoom.target, state.minimumZoomValue), state.maximumZoomValue);\n        var zoomDelta = interpolationValues_1.zoom.target - previousZoom;\n        var leftCorrection = (window.innerWidth / 2) * zoomDelta;\n        var topCorrection = (window.innerHeight / 2) * zoomDelta;\n        interpolationValues_1.leftCorrector.target -= leftCorrection;\n        interpolationValues_1.topCorrector.target -= topCorrection;\n    }\n};\nexports[\"default\"] = updateZoom;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/animation/updateZoom.js?");

/***/ }),

/***/ "./dist/lib/state/changeHandlers/cssLoaderHandler.js":
/*!***********************************************************!*\
  !*** ./dist/lib/state/changeHandlers/cssLoaderHandler.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.onCssLoaded = void 0;\nvar getPropertyChangeHandler_1 = __importDefault(__webpack_require__(/*! ../../../utils/getPropertyChangeHandler */ \"./dist/utils/getPropertyChangeHandler.js\"));\nvar _a = (0, getPropertyChangeHandler_1[\"default\"])(true), resolver = _a.resolver, waiter = _a.waiter;\n/**\n * Waits for `cssLoaded` property to be `true`. If there is a previous promise waiting, it will\n * get rejected, so after calling multiple times before CSS is ready, the result will be all\n * promises being rejected except for the **last one**, working like some kind of debouncer.\n * If you intend to use this method to resolve **all** pending promises once the CSS is loaded,\n * you are doing it wrong.\n * @returns Promise<void>\n */\nexports.onCssLoaded = waiter;\n/**\n * Change handler\n */\nvar cssLoaderHandler = {\n    property: 'cssLoaded',\n    value: true,\n    handler: resolver\n};\nexports[\"default\"] = cssLoaderHandler;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/changeHandlers/cssLoaderHandler.js?");

/***/ }),

/***/ "./dist/lib/state/changeHandlers/index.js":
/*!************************************************!*\
  !*** ./dist/lib/state/changeHandlers/index.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar cssLoaderHandler_1 = __importDefault(__webpack_require__(/*! ./cssLoaderHandler */ \"./dist/lib/state/changeHandlers/cssLoaderHandler.js\"));\nvar recalculatingHandler_1 = __importDefault(__webpack_require__(/*! ./recalculatingHandler */ \"./dist/lib/state/changeHandlers/recalculatingHandler.js\"));\nvar wrapperReadyHandler_1 = __importDefault(__webpack_require__(/*! ./wrapperReadyHandler */ \"./dist/lib/state/changeHandlers/wrapperReadyHandler.js\"));\nvar handlers = [\n    cssLoaderHandler_1[\"default\"],\n    recalculatingHandler_1[\"default\"],\n    wrapperReadyHandler_1[\"default\"],\n];\nexports[\"default\"] = handlers;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/changeHandlers/index.js?");

/***/ }),

/***/ "./dist/lib/state/changeHandlers/recalculatingHandler.js":
/*!***************************************************************!*\
  !*** ./dist/lib/state/changeHandlers/recalculatingHandler.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.onRecalculateFinish = void 0;\nvar getPropertyChangeHandler_1 = __importDefault(__webpack_require__(/*! ../../../utils/getPropertyChangeHandler */ \"./dist/utils/getPropertyChangeHandler.js\"));\nvar _a = (0, getPropertyChangeHandler_1[\"default\"])(true), resolver = _a.resolver, waiter = _a.waiter;\nexports.onRecalculateFinish = waiter;\nvar recalculatingHandler = {\n    property: 'recalculating',\n    value: false,\n    handler: resolver\n};\nexports[\"default\"] = recalculatingHandler;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/changeHandlers/recalculatingHandler.js?");

/***/ }),

/***/ "./dist/lib/state/changeHandlers/wrapperReadyHandler.js":
/*!**************************************************************!*\
  !*** ./dist/lib/state/changeHandlers/wrapperReadyHandler.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.onWrapperReady = void 0;\nvar getPropertyChangeHandler_1 = __importDefault(__webpack_require__(/*! ../../../utils/getPropertyChangeHandler */ \"./dist/utils/getPropertyChangeHandler.js\"));\nvar _a = (0, getPropertyChangeHandler_1[\"default\"])(true), resolver = _a.resolver, waiter = _a.waiter;\nexports.onWrapperReady = waiter;\nvar wrapperReadyHandler = {\n    property: 'wrapperReady',\n    value: true,\n    handler: resolver\n};\nexports[\"default\"] = wrapperReadyHandler;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/changeHandlers/wrapperReadyHandler.js?");

/***/ }),

/***/ "./dist/lib/state/defaultFixed.js":
/*!****************************************!*\
  !*** ./dist/lib/state/defaultFixed.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar defaultFixed = {\n    layout: viewerSettings_1.LayoutTypes.Fixed,\n    fixedInfo: [],\n    contentsByOrder: new Map(),\n    contentsBySlug: new Map(),\n    contentsInfo: new Array(),\n    loadedCssUrls: new Set(),\n    fixedStylesNodes: [],\n    zoom: 1,\n    zoomSpeed: 0.01,\n    maximumZoomValue: 4,\n    minimumZoomValue: 0.5,\n    hasHorizontalScroll: false,\n    hasVerticalScroll: false,\n    horizontalTranslate: 0,\n    maxHorizontalTranslate: 0,\n    maxVerticalTranslate: 0,\n    minHorizontalTranslate: 0,\n    minVerticalTranslate: 0,\n    verticalTranslate: 0,\n    maxHeight: 0,\n    maxWidth: 0,\n    gapMode: viewerSettings_1.GapMode.None,\n    gapSize: 16\n};\nexports[\"default\"] = defaultFixed;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/defaultFixed.js?");

/***/ }),

/***/ "./dist/lib/state/defaultFlow.js":
/*!***************************************!*\
  !*** ./dist/lib/state/defaultFlow.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar defaultFlow = {\n    layout: viewerSettings_1.LayoutTypes.Flow,\n    columnsInViewport: 2,\n    fontFamily: 'Helvetica',\n    fontSize: 18,\n    lineHeight: 1.5,\n    textAlign: null,\n    snaps: new Array(),\n    columnWidth: 0,\n    totalColumnWidth: 0,\n    totalColumns: 0,\n    chapterNumber: 0\n};\nexports[\"default\"] = defaultFlow;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/defaultFlow.js?");

/***/ }),

/***/ "./dist/lib/state/defaultGlobal.js":
/*!*****************************************!*\
  !*** ./dist/lib/state/defaultGlobal.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar defaultGlobal = {\n    dragging: false,\n    selectingText: false,\n    scale: 1,\n    readMode: false,\n    basicDOMElementsCreated: false,\n    wrapperReady: false,\n    cssLoaded: true,\n    recalculating: false,\n    toggleReadModeOnClick: true,\n    theme: 'light'\n};\nexports[\"default\"] = defaultGlobal;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/defaultGlobal.js?");

/***/ }),

/***/ "./dist/lib/state/defaultPaginated.js":
/*!********************************************!*\
  !*** ./dist/lib/state/defaultPaginated.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar defaultPaginated = {\n    scrollMode: 'fixed',\n    doublePage: false\n};\nexports[\"default\"] = defaultPaginated;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/defaultPaginated.js?");

/***/ }),

/***/ "./dist/lib/state/defaultScrolled.js":
/*!*******************************************!*\
  !*** ./dist/lib/state/defaultScrolled.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar defaultScrolled = {\n    scrollMode: 'horizontal',\n    left: 0,\n    maxLeft: 0,\n    totalWidth: 0,\n    totalHeight: 0,\n    showPageSeparation: false,\n    slugByPosition: new Map(),\n    positionBySlug: new Map(),\n    lastPosition: 0\n};\nexports[\"default\"] = defaultScrolled;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/defaultScrolled.js?");

/***/ }),

/***/ "./dist/lib/state/dispatch.js":
/*!************************************!*\
  !*** ./dist/lib/state/dispatch.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar index_1 = __webpack_require__(/*! ./index */ \"./dist/lib/state/index.js\");\nvar reducer_1 = __importDefault(__webpack_require__(/*! ./reducer */ \"./dist/lib/state/reducer.js\"));\n/**\n * Main viewer dispatcher\n * @param action Viewer action\n */\nvar dispatch = function (action) { return __awaiter(void 0, void 0, void 0, function () {\n    var state, update;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                state = (0, index_1.getState)();\n                return [4 /*yield*/, (0, reducer_1[\"default\"])(state, action)];\n            case 1:\n                update = _a.sent();\n                (0, index_1.updateState)(update);\n                return [2 /*return*/];\n        }\n    });\n}); };\nexports[\"default\"] = dispatch;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/dispatch.js?");

/***/ }),

/***/ "./dist/lib/state/index.js":
/*!*********************************!*\
  !*** ./dist/lib/state/index.js ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.updateState = exports.getState = exports.initializeState = void 0;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar defaultGlobal_1 = __importDefault(__webpack_require__(/*! ./defaultGlobal */ \"./dist/lib/state/defaultGlobal.js\"));\nvar defaultFlow_1 = __importDefault(__webpack_require__(/*! ./defaultFlow */ \"./dist/lib/state/defaultFlow.js\"));\nvar defaultScrolled_1 = __importDefault(__webpack_require__(/*! ./defaultScrolled */ \"./dist/lib/state/defaultScrolled.js\"));\nvar defaultFixed_1 = __importDefault(__webpack_require__(/*! ./defaultFixed */ \"./dist/lib/state/defaultFixed.js\"));\nvar defaultPaginated_1 = __importDefault(__webpack_require__(/*! ./defaultPaginated */ \"./dist/lib/state/defaultPaginated.js\"));\nvar default_1 = __importDefault(__webpack_require__(/*! ../../config/default */ \"./dist/config/default.js\"));\nvar config_1 = __webpack_require__(/*! ../../config */ \"./dist/config/index.js\");\nvar changeHandlers_1 = __importDefault(__webpack_require__(/*! ./changeHandlers */ \"./dist/lib/state/changeHandlers/index.js\"));\nvar stateChangeEvents_1 = __webpack_require__(/*! ./stateChangeEvents */ \"./dist/lib/state/stateChangeEvents.js\");\nvar handlers = new Map();\nfor (var i = 0, l = changeHandlers_1[\"default\"].length; i < l; i++) {\n    var _a = changeHandlers_1[\"default\"][i], property = _a.property, value = _a.value, handler = _a.handler;\n    var map = handlers.get(property);\n    if (!map) {\n        map = new Map();\n        handlers.set(property, map);\n    }\n    if (!map.has(value)) {\n        map.set(value, handler);\n    }\n    else {\n        // eslint-disable-next-line no-console\n        console.warn(\"Duplicated handler for property \".concat(property, \" and value \").concat((value === null || value === void 0 ? void 0 : value.toString()) || ''));\n    }\n}\nvar state;\nvar initializeState = function (initialConfig) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    var config = (0, config_1.setConfig)(__assign(__assign(__assign({}, default_1[\"default\"]), initialConfig), { zoom: __assign(__assign({}, default_1[\"default\"].zoom), ((_a = initialConfig.zoom) !== null && _a !== void 0 ? _a : {})), fontSize: __assign(__assign({}, default_1[\"default\"].fontSize), ((_b = initialConfig.fontSize) !== null && _b !== void 0 ? _b : {})) }));\n    if (!initialConfig.initialFitMode && initialConfig.initialZoom) {\n        config = (0, config_1.setConfig)(__assign(__assign({}, config), { initialFitMode: undefined, initialZoom: initialConfig.initialZoom }));\n    }\n    var defaultInitialMargins = config.initialReadMode\n        ? default_1[\"default\"].readModeMargin\n        : default_1[\"default\"].uiModeMargin;\n    var initialMargins = config.initialReadMode ? config.readModeMargin : config.uiModeMargin;\n    var linksCustomProps = new Map();\n    if (config.linksProps) {\n        Object.entries(config.linksProps).forEach(function (_a) {\n            var key = _a[0], value = _a[1];\n            linksCustomProps.set(key, value);\n        });\n    }\n    var globalState = __assign(__assign({}, defaultGlobal_1[\"default\"]), { config: config, margin: __assign(__assign({}, defaultInitialMargins), (initialMargins !== null && initialMargins !== void 0 ? initialMargins : {})), title: 'Title', slug: config.slug, productSlug: config.productSlug || config.slug, contentSlug: config.contentSlug, theme: (_c = config.initialTheme) !== null && _c !== void 0 ? _c : defaultGlobal_1[\"default\"].theme, dragging: false, scrollLeft: 0, scrollTop: 0, animate: false, animating: false, updatingScroller: false, preventUpdateScroll: false, animationFriction: config.animationFriction, animationSpeed: config.animationSpeed, animationInertia: config.animationInertia, pageLabel: config.contentSlug, pageNumber: 1, toggleReadModeOnClick: (_d = config.toggleReadModeOnClick) !== null && _d !== void 0 ? _d : defaultGlobal_1[\"default\"].toggleReadModeOnClick, readMode: (_e = config.initialReadMode) !== null && _e !== void 0 ? _e : defaultGlobal_1[\"default\"].readMode, searchTerms: config.initialSearchTerms, searchRanges: new Array(), highlightersLayers: new Map(), currentUserHighlights: new Map(), currentUserDomHighlights: new Map(), linksCustomProps: linksCustomProps, debugViewerSafeArea: config.debugViewerSafeArea, containerWidth: 0, containerHeight: 0, forceScroll: undefined, animateToScroll: undefined, interpolationValues: [] });\n    var scrolledState = __assign(__assign({}, defaultScrolled_1[\"default\"]), { scrollMode: initialConfig.initialScrollMode || defaultScrolled_1[\"default\"].scrollMode });\n    if (config.layoutType === 'flow') {\n        state = __assign(__assign(__assign(__assign({}, globalState), defaultFlow_1[\"default\"]), scrolledState), { columnGap: config.columnGap, fontFamily: config.initialFontFamily, textAlign: (_f = config.initialTextAlign) !== null && _f !== void 0 ? _f : defaultFlow_1[\"default\"].textAlign, lineHeight: (_g = config.initialLineHeight) !== null && _g !== void 0 ? _g : defaultFlow_1[\"default\"].lineHeight });\n        if (config.initialFontSize) {\n            state.fontSize = config.initialFontSize;\n        }\n    }\n    if (config.layoutType === 'fixed') {\n        var fixedState = __assign(__assign({}, defaultFixed_1[\"default\"]), { fitMode: config.initialFitMode, zoom: config.initialZoom, loadedCssUrls: new Set(), minimumZoomValue: (_h = config.zoom.min) !== null && _h !== void 0 ? _h : defaultFixed_1[\"default\"].minimumZoomValue, maximumZoomValue: (_j = config.zoom.max) !== null && _j !== void 0 ? _j : defaultFixed_1[\"default\"].maximumZoomValue, gapMode: (_k = config.fixedPagesGap) !== null && _k !== void 0 ? _k : defaultFixed_1[\"default\"].gapMode, gapSize: (_l = config.fixedPagesGapSize) !== null && _l !== void 0 ? _l : defaultFixed_1[\"default\"].gapSize });\n        if (config.initialContent) {\n            fixedState.loadingContent = config.initialContent.contentSlug;\n        }\n        if (config.initialFixedMode === viewerSettings_1.ViewerMode.Paginated) {\n            state = __assign(__assign(__assign({}, globalState), fixedState), defaultPaginated_1[\"default\"]);\n        }\n        if (config.initialFixedMode === viewerSettings_1.ViewerMode.WithScroll) {\n            state = __assign(__assign(__assign({}, globalState), fixedState), scrolledState);\n        }\n    }\n};\nexports.initializeState = initializeState;\nvar getState = function () { return state; };\nexports.getState = getState;\nvar updateState = function (newState) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var updatableState = state;\n    Object.keys(newState).forEach(function (key) {\n        var stateKey = key;\n        var newValue = newState[stateKey];\n        if (newValue !== updatableState[stateKey]) {\n            var oldValue = updatableState[stateKey];\n            updatableState[stateKey] = newValue;\n            var propertyHandlers = handlers.get(key);\n            if (propertyHandlers) {\n                var changeHandler = propertyHandlers.get(newValue);\n                if (changeHandler) {\n                    changeHandler();\n                }\n            }\n            (0, stateChangeEvents_1.notifyEventHandler)(stateKey, newValue, oldValue);\n        }\n    });\n};\nexports.updateState = updateState;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/index.js?");

/***/ }),

/***/ "./dist/lib/state/reducer.js":
/*!***********************************!*\
  !*** ./dist/lib/state/reducer.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar actionDispatchers_1 = __importDefault(__webpack_require__(/*! ../actions/actionDispatchers */ \"./dist/lib/actions/actionDispatchers.js\"));\n/**\n * Main viewer actions reducer\n * @param state Viewer state\n * @param action Viewer action\n * @returns Partial viewer state update\n */\nvar reducer = function (state, action) { return __awaiter(void 0, void 0, void 0, function () {\n    var dispatcher;\n    return __generator(this, function (_a) {\n        dispatcher = actionDispatchers_1[\"default\"][action.type];\n        if (dispatcher) {\n            return [2 /*return*/, dispatcher({\n                    state: state,\n                    action: action\n                })];\n        }\n        throw Error(\"There is no dispatcher for the action \\\"\".concat(action.type, \"\\\"\"));\n    });\n}); };\nexports[\"default\"] = reducer;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/reducer.js?");

/***/ }),

/***/ "./dist/lib/state/stateChangeEvents.js":
/*!*********************************************!*\
  !*** ./dist/lib/state/stateChangeEvents.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.removeAllChangeEvents = exports.notifyEventHandler = exports.removeOnChangeEventListener = exports.addOnChangeEventListener = void 0;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar internalHandlers = new Map();\nvar externalHandlers = new Map();\n/**\n * Adds event listener handler to be called when a specific state property changes\n * @param propertyName Name of the property to watch for changes\n * @param event Event handler to launch on change\n * @param internal True only for internal handlers that will not be removed when the UI gets unmounted\n */\nvar addOnChangeEventListener = function (propertyName, event, internal) {\n    if (internal === void 0) { internal = false; }\n    var handlers = internal ? internalHandlers : externalHandlers;\n    var eventList;\n    var key = propertyName;\n    if (!handlers.has(key)) {\n        eventList = new Array();\n        handlers.set(key, eventList);\n    }\n    else {\n        eventList = handlers.get(key);\n    }\n    if (!eventList.includes(event)) {\n        eventList.push(event);\n    }\n};\nexports.addOnChangeEventListener = addOnChangeEventListener;\n/**\n * Removes event listener handler to stop notifying event\n * @param propertyName Name of the property\n * @param event Event handler\n * @param internal True only for internal handlers that will not be removed when the UI gets unmounted\n */\nvar removeOnChangeEventListener = function (propertyName, event, internal) {\n    if (internal === void 0) { internal = false; }\n    var handlers = internal ? internalHandlers : externalHandlers;\n    var key = propertyName;\n    if (handlers.has(key)) {\n        var eventList = handlers.get(key);\n        var eventIndex = eventList.indexOf(event);\n        if (eventIndex !== -1) {\n            eventList.splice(eventIndex, 1);\n        }\n    }\n};\nexports.removeOnChangeEventListener = removeOnChangeEventListener;\n/**\n * Notifies when a property is changed\n * @param propertyName property that is changed\n * @param newValue new property value\n * @param oldValue old property value\n */\nvar notifyEventHandler = function (propertyName, newValue, oldValue) {\n    var key = propertyName;\n    var handlerLists = [internalHandlers, externalHandlers];\n    handlerLists.forEach(function (handlers) {\n        if (handlers.has(key)) {\n            var eventList = handlers.get(key);\n            eventList.forEach(function (handler) {\n                try {\n                    handler(newValue, oldValue);\n                }\n                catch (error) {\n                    loglevel_1[\"default\"].error(error);\n                }\n            });\n        }\n    });\n};\nexports.notifyEventHandler = notifyEventHandler;\n/**\n * Removes all event listener stop notifying events\n * typically when the user interface is unmounted\n * @param internal True only for internal handlers that will not be removed when the UI gets unmounted\n */\nvar removeAllChangeEvents = function (internal) {\n    if (internal === void 0) { internal = false; }\n    var handlers = internal ? internalHandlers : externalHandlers;\n    handlers.clear();\n};\nexports.removeAllChangeEvents = removeAllChangeEvents;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/state/stateChangeEvents.js?");

/***/ }),

/***/ "./dist/lib/styles/setInitialProperties.js":
/*!*************************************************!*\
  !*** ./dist/lib/styles/setInitialProperties.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar removeCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../utils/removeCSSProperty */ \"./dist/utils/removeCSSProperty.js\"));\n/**\n * Sets initial CSS properties values.\n * @param state Viewer state\n */\nvar setInitialProperties = function (state) {\n    /**\n     * Properties are in alphabetical to assist looking for a specific one. Please, keep it like that\n     */\n    (0, setCSSProperty_1[\"default\"])('column-count', '2');\n    (0, setCSSProperty_1[\"default\"])('column-gap', \"\".concat(state.config.columnGap, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('content-wrapper-height', '100vh');\n    (0, setCSSProperty_1[\"default\"])('contrast-viewer-color', '1');\n    (0, setCSSProperty_1[\"default\"])('column-width', '0px');\n    (0, setCSSProperty_1[\"default\"])('current-selection-extensors-color', '#3273ff');\n    (0, setCSSProperty_1[\"default\"])('current-selection-highlights-color', '#f2b818');\n    (0, setCSSProperty_1[\"default\"])('extensors-pointer-events', 'auto');\n    (0, setCSSProperty_1[\"default\"])('highlights-pointer-events', 'none');\n    (0, setCSSProperty_1[\"default\"])('horizontal-translate', '0');\n    (0, setCSSProperty_1[\"default\"])('invert-viewer-color', '0');\n    (0, setCSSProperty_1[\"default\"])('next-chapter-navigation-opacity', '0');\n    (0, setCSSProperty_1[\"default\"])('padding-top', \"\".concat(state.config.paddingTop, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('padding-bottom', \"\".concat(state.config.paddingBottom, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('pointer-events', 'auto');\n    (0, setCSSProperty_1[\"default\"])('prev-chapter-navigation-opacity', '0');\n    (0, setCSSProperty_1[\"default\"])('scale', \"\".concat(state.scale));\n    (0, setCSSProperty_1[\"default\"])('search-highlights-color', state.config.searchHighlightColor || '#fdff04');\n    (0, setCSSProperty_1[\"default\"])('sepia-viewer-color', '0');\n    (0, setCSSProperty_1[\"default\"])('text-align', 'initial');\n    (0, setCSSProperty_1[\"default\"])('total-column-width', '0px');\n    (0, setCSSProperty_1[\"default\"])('total-height', '0px');\n    (0, setCSSProperty_1[\"default\"])('total-width', '0px');\n    (0, setCSSProperty_1[\"default\"])('scroll-width', '0px');\n    (0, setCSSProperty_1[\"default\"])('scroller-left', \"\".concat(state.margin.left, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('scroller-scale', '1');\n    (0, setCSSProperty_1[\"default\"])('user-select', 'none');\n    (0, setCSSProperty_1[\"default\"])('user-select-end', 'none');\n    (0, setCSSProperty_1[\"default\"])('vertical-translate', '0');\n    (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n    (0, setCSSProperty_1[\"default\"])('debug-viewer-safe-area', \"\".concat(state.debugViewerSafeArea ? 1 : 0));\n    (0, setCSSProperty_1[\"default\"])('safe-area-border-width', 'calc(1px * var(--debug-viewer-safe-area))');\n    (0, setCSSProperty_1[\"default\"])('safe-area-read-top', \"\".concat(state.config.readModeMargin.top, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('safe-area-read-left', \"\".concat(state.config.readModeMargin.left, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('safe-area-read-right', \"\".concat(state.config.readModeMargin.right, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('safe-area-read-bottom', \"\".concat(state.config.readModeMargin.bottom, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('safe-area-ui-top', \"\".concat(state.config.uiModeMargin.top, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('safe-area-ui-left', \"\".concat(state.config.uiModeMargin.left, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('safe-area-ui-right', \"\".concat(state.config.uiModeMargin.right, \"px\"));\n    (0, setCSSProperty_1[\"default\"])('safe-area-ui-bottom', \"\".concat(state.config.uiModeMargin.bottom, \"px\"));\n    if (state.theme === 'dark') {\n        (0, setCSSProperty_1[\"default\"])('theme-filter', 'invert(1)');\n    }\n    else {\n        (0, removeCSSProperty_1[\"default\"])('theme-filter');\n    }\n    if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n        (0, setCSSProperty_1[\"default\"])('font-family', state.fontFamily);\n        (0, setCSSProperty_1[\"default\"])('font-size', \"\".concat(state.fontSize, \"px\"));\n        (0, setCSSProperty_1[\"default\"])('line-height', \"\".concat(state.lineHeight, \"em\"));\n        if (state.textAlign) {\n            (0, setCSSProperty_1[\"default\"])('text-align', state.textAlign);\n        }\n    }\n};\nexports[\"default\"] = setInitialProperties;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/lib/styles/setInitialProperties.js?");

/***/ }),

/***/ "./dist/model/actions/actionDispatcher.js":
/*!************************************************!*\
  !*** ./dist/model/actions/actionDispatcher.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/actions/actionDispatcher.js?");

/***/ }),

/***/ "./dist/model/actions/common.js":
/*!**************************************!*\
  !*** ./dist/model/actions/common.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/actions/common.js?");

/***/ }),

/***/ "./dist/model/actions/fixed.js":
/*!*************************************!*\
  !*** ./dist/model/actions/fixed.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.FixedActionTypes = void 0;\n/**\n * Names of the action types for Fixed Layout Actions\n */\nvar FixedActionTypes;\n(function (FixedActionTypes) {\n    FixedActionTypes[\"SetSinglePageMode\"] = \"setSinglePageMode\";\n})(FixedActionTypes = exports.FixedActionTypes || (exports.FixedActionTypes = {}));\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/actions/fixed.js?");

/***/ }),

/***/ "./dist/model/actions/flow.js":
/*!************************************!*\
  !*** ./dist/model/actions/flow.js ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.FlowActionTypes = void 0;\n/**\n * Names of the action types for Flow Layout Actions\n */\nvar FlowActionTypes;\n(function (FlowActionTypes) {\n    FlowActionTypes[\"SetFontSize\"] = \"setFontSize\";\n    FlowActionTypes[\"IncreaseFontSize\"] = \"increaseFontSize\";\n    FlowActionTypes[\"DecreaseFontSize\"] = \"decreaseFontSize\";\n    FlowActionTypes[\"SetLineHeight\"] = \"setLineHeight\";\n    FlowActionTypes[\"SetFontFamily\"] = \"setFontFamily\";\n    FlowActionTypes[\"SetTextAlign\"] = \"setTextAlign\";\n})(FlowActionTypes = exports.FlowActionTypes || (exports.FlowActionTypes = {}));\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/actions/flow.js?");

/***/ }),

/***/ "./dist/model/actions/global.js":
/*!**************************************!*\
  !*** ./dist/model/actions/global.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.GlobalActionTypes = void 0;\n/**\n * Names of the action types for global actions\n */\nvar GlobalActionTypes;\n(function (GlobalActionTypes) {\n    GlobalActionTypes[\"SetScrollMode\"] = \"setScrollMode\";\n    GlobalActionTypes[\"SetDarkMode\"] = \"setDarkMode\";\n    GlobalActionTypes[\"NavigateToPage\"] = \"navigateToPage\";\n    GlobalActionTypes[\"SetDebugViewerSafeArea\"] = \"setDebugViewerSafeArea\";\n    GlobalActionTypes[\"AppendNewContent\"] = \"appendNewContent\";\n    GlobalActionTypes[\"Resize\"] = \"resize\";\n    GlobalActionTypes[\"HighlightSearchTerms\"] = \"highlightSearchTerms\";\n})(GlobalActionTypes = exports.GlobalActionTypes || (exports.GlobalActionTypes = {}));\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/actions/global.js?");

/***/ }),

/***/ "./dist/model/actions/index.js":
/*!*************************************!*\
  !*** ./dist/model/actions/index.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.actionTypeNames = void 0;\nvar fixed_1 = __webpack_require__(/*! ./fixed */ \"./dist/model/actions/fixed.js\");\nvar flow_1 = __webpack_require__(/*! ./flow */ \"./dist/model/actions/flow.js\");\nvar global_1 = __webpack_require__(/*! ./global */ \"./dist/model/actions/global.js\");\n/**\n * All the action names are available for the viewer\n */\nexports.actionTypeNames = {\n    global: Object.values(global_1.GlobalActionTypes),\n    flow: Object.values(flow_1.FlowActionTypes),\n    fixed: Object.values(fixed_1.FixedActionTypes)\n};\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/actions/index.js?");

/***/ }),

/***/ "./dist/model/config.js":
/*!******************************!*\
  !*** ./dist/model/config.js ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/config.js?");

/***/ }),

/***/ "./dist/model/dom.js":
/*!***************************!*\
  !*** ./dist/model/dom.js ***!
  \***************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/dom.js?");

/***/ }),

/***/ "./dist/model/events/index.js":
/*!************************************!*\
  !*** ./dist/model/events/index.js ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/events/index.js?");

/***/ }),

/***/ "./dist/model/highlights.js":
/*!**********************************!*\
  !*** ./dist/model/highlights.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/highlights.js?");

/***/ }),

/***/ "./dist/model/index.js":
/*!*****************************!*\
  !*** ./dist/model/index.js ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nexports.__esModule = true;\n__exportStar(__webpack_require__(/*! ./config */ \"./dist/model/config.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dom */ \"./dist/model/dom.js\"), exports);\n__exportStar(__webpack_require__(/*! ./highlights */ \"./dist/model/highlights.js\"), exports);\n__exportStar(__webpack_require__(/*! ./oneFileToPath */ \"./dist/model/oneFileToPath.js\"), exports);\n__exportStar(__webpack_require__(/*! ./state */ \"./dist/model/state.js\"), exports);\n__exportStar(__webpack_require__(/*! ./viewer */ \"./dist/model/viewer.js\"), exports);\n__exportStar(__webpack_require__(/*! ./viewerSettings */ \"./dist/model/viewerSettings.js\"), exports);\n__exportStar(__webpack_require__(/*! ./events */ \"./dist/model/events/index.js\"), exports);\n__exportStar(__webpack_require__(/*! ./actions */ \"./dist/model/actions/index.js\"), exports);\n__exportStar(__webpack_require__(/*! ./actions/actionDispatcher */ \"./dist/model/actions/actionDispatcher.js\"), exports);\n__exportStar(__webpack_require__(/*! ./actions/common */ \"./dist/model/actions/common.js\"), exports);\n__exportStar(__webpack_require__(/*! ./actions/fixed */ \"./dist/model/actions/fixed.js\"), exports);\n__exportStar(__webpack_require__(/*! ./actions/flow */ \"./dist/model/actions/flow.js\"), exports);\n__exportStar(__webpack_require__(/*! ./actions/global */ \"./dist/model/actions/global.js\"), exports);\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/index.js?");

/***/ }),

/***/ "./dist/model/oneFileToPath.js":
/*!*************************************!*\
  !*** ./dist/model/oneFileToPath.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/oneFileToPath.js?");

/***/ }),

/***/ "./dist/model/state.js":
/*!*****************************!*\
  !*** ./dist/model/state.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/state.js?");

/***/ }),

/***/ "./dist/model/viewer.js":
/*!******************************!*\
  !*** ./dist/model/viewer.js ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/viewer.js?");

/***/ }),

/***/ "./dist/model/viewerSettings.js":
/*!**************************************!*\
  !*** ./dist/model/viewerSettings.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.LayoutTypes = exports.GapMode = exports.FitMode = exports.ViewerMode = void 0;\n/**\n * Viewer mode\n */\nvar ViewerMode;\n(function (ViewerMode) {\n    /**\n     * Paginated viewer. One page shown at the same time.\n     */\n    ViewerMode[\"Paginated\"] = \"paginated\";\n    /**\n     * Viewer with scroll. All content shown, scrollable.\n     */\n    ViewerMode[\"WithScroll\"] = \"withScroll\";\n    /**\n     * Flow viewer.\n     */\n    ViewerMode[\"Flow\"] = \"flow\";\n})(ViewerMode = exports.ViewerMode || (exports.ViewerMode = {}));\n/**\n * Possible fit modes\n */\nvar FitMode;\n(function (FitMode) {\n    /**\n     * Fit width\n     */\n    FitMode[\"Width\"] = \"width\";\n    /**\n     * Fit height\n     */\n    FitMode[\"Height\"] = \"height\";\n    /**\n     * Fit page\n     */\n    FitMode[\"Page\"] = \"page\";\n})(FitMode = exports.FitMode || (exports.FitMode = {}));\nvar GapMode;\n(function (GapMode) {\n    /**\n     * Will create gap between every page\n     */\n    GapMode[\"All\"] = \"all\";\n    /**\n     * Will find page number 1 and create gap between pairs\n     */\n    GapMode[\"Pairs\"] = \"pairs\";\n    /**\n     * [**default**] Won't create any gap between pages\n     */\n    GapMode[\"None\"] = \"none\";\n})(GapMode = exports.GapMode || (exports.GapMode = {}));\n/**\n * Layout types\n */\nvar LayoutTypes;\n(function (LayoutTypes) {\n    LayoutTypes[\"Fixed\"] = \"fixed\";\n    LayoutTypes[\"Flow\"] = \"flow\";\n})(LayoutTypes = exports.LayoutTypes || (exports.LayoutTypes = {}));\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/model/viewerSettings.js?");

/***/ }),

/***/ "./dist/utils/calculateDistance.js":
/*!*****************************************!*\
  !*** ./dist/utils/calculateDistance.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar getDistance = function (a, b) {\n    var x = a.x - b.x;\n    var y = a.y - b.y;\n    return Math.sqrt(x * x + y * y);\n};\nvar calculateDistance = function (startTouches, endTouches) {\n    var startDistance = getDistance(startTouches[0], startTouches[1]);\n    var endDistance = getDistance(endTouches[0], endTouches[1]);\n    return endDistance / startDistance;\n};\nexports[\"default\"] = calculateDistance;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/calculateDistance.js?");

/***/ }),

/***/ "./dist/utils/checkImagesHeight.js":
/*!*****************************************!*\
  !*** ./dist/utils/checkImagesHeight.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\n// const getApplyingProperties = (\n//   element: HTMLImageElement,\n//   sheet?: CSSStyleSheet | null,\n// ): Set<string> => {\n//   const res = new Set<string>();\n//   if (!sheet) {\n//     return res;\n//   }\n//   const rules = sheet.cssRules;\n//   for (let i = 0, l = rules.length; i < l; i++) {\n//     const { cssText, selectorText } = rules[i] as CSSStyleRule;\n//     if (selectorText && element.matches(selectorText)) {\n//       const match = cssText.match(/{([^}]+)}/);\n//       if (match && match[1]) {\n//         match[1].split(';').forEach((item) => {\n//           const [property] = item.split(':');\n//           if (property && property.trim()) {\n//             res.add(property.trim().toLowerCase());\n//           }\n//         });\n//       }\n//     }\n//   }\n//   return res;\n// };\n/**\n * Checks images height and provides special CSS class when image is higher than the available\n * vertical space. Also provides\n * @param images Node list of images (result from `querySelectorAll`)\n */\nvar checkImagesHeight = function (images, state) { return __awaiter(void 0, void 0, void 0, function () {\n    var checkImagesHeightPromises;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                checkImagesHeightPromises = new Array();\n                images.forEach(function (img) {\n                    checkImagesHeightPromises.push(new Promise(function (imageResolve) {\n                        var securityTimeout = setTimeout(function () {\n                            loglevel_1[\"default\"].info('Image without width', img);\n                            imageResolve();\n                        }, 2000);\n                        var clone = new Image();\n                        var onLoad = function () {\n                            var _a;\n                            var fullHeight = clone.height, fullWidth = clone.width;\n                            var visibleHeight = (_a = img.getClientRects()[0]) === null || _a === void 0 ? void 0 : _a.height;\n                            clearTimeout(securityTimeout);\n                            img.classList.remove('olectio-fit-height');\n                            if (visibleHeight) {\n                                var containerHeight = state.containerHeight - (state.config.paddingBottom + state.config.paddingTop);\n                                if (visibleHeight >= containerHeight * 0.95) {\n                                    img.classList.add('olectio-fit-height');\n                                }\n                            }\n                            if (fullHeight) {\n                                // eslint-disable-next-line no-param-reassign\n                                img.style.setProperty('--image-ratio', \"\".concat(fullHeight / fullWidth));\n                            }\n                            img.classList.add('olectio-ready');\n                            imageResolve();\n                        };\n                        clone.onload = onLoad;\n                        clone.src = img.src;\n                    }));\n                });\n                return [4 /*yield*/, Promise.all(checkImagesHeightPromises)];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n}); };\nexports[\"default\"] = checkImagesHeight;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/checkImagesHeight.js?");

/***/ }),

/***/ "./dist/utils/cleanStyles.js":
/*!***********************************!*\
  !*** ./dist/utils/cleanStyles.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar model_1 = __webpack_require__(/*! ../model */ \"./dist/model/index.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar removeCSSProperty_1 = __importDefault(__webpack_require__(/*! ./removeCSSProperty */ \"./dist/utils/removeCSSProperty.js\"));\nvar cleanStyles = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    try {\n        (0, removeCSSProperty_1[\"default\"])('column-count');\n        (0, removeCSSProperty_1[\"default\"])('column-gap');\n        (0, removeCSSProperty_1[\"default\"])('content-wrapper-height');\n        (0, removeCSSProperty_1[\"default\"])('contrast-viewer-color');\n        (0, removeCSSProperty_1[\"default\"])('column-width');\n        (0, removeCSSProperty_1[\"default\"])('current-selection-extensors-color');\n        (0, removeCSSProperty_1[\"default\"])('current-selection-highlights-color');\n        (0, removeCSSProperty_1[\"default\"])('extensors-pointer-events');\n        (0, removeCSSProperty_1[\"default\"])('highlights-pointer-events');\n        (0, removeCSSProperty_1[\"default\"])('horizontal-translate');\n        (0, removeCSSProperty_1[\"default\"])('invert-viewer-color');\n        (0, removeCSSProperty_1[\"default\"])('next-chapter-navigation-opacity');\n        (0, removeCSSProperty_1[\"default\"])('padding-top');\n        (0, removeCSSProperty_1[\"default\"])('padding-bottom');\n        (0, removeCSSProperty_1[\"default\"])('pointer-events');\n        (0, removeCSSProperty_1[\"default\"])('prev-chapter-navigation-opacity');\n        (0, removeCSSProperty_1[\"default\"])('scale');\n        (0, removeCSSProperty_1[\"default\"])('search-highlights-color');\n        (0, removeCSSProperty_1[\"default\"])('sepia-viewer-color');\n        (0, removeCSSProperty_1[\"default\"])('text-align');\n        (0, removeCSSProperty_1[\"default\"])('total-column-width');\n        (0, removeCSSProperty_1[\"default\"])('total-height');\n        (0, removeCSSProperty_1[\"default\"])('total-width');\n        (0, removeCSSProperty_1[\"default\"])('scroll-width');\n        (0, removeCSSProperty_1[\"default\"])('user-select');\n        (0, removeCSSProperty_1[\"default\"])('user-select-end');\n        (0, removeCSSProperty_1[\"default\"])('vertical-translate');\n        (0, removeCSSProperty_1[\"default\"])('debug-viewer-safe-area');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-border-width');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-read-top');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-read-left');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-read-right');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-read-bottom');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-ui-top');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-ui-left');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-ui-right');\n        (0, removeCSSProperty_1[\"default\"])('safe-area-ui-bottom');\n        (0, removeCSSProperty_1[\"default\"])('theme-filter');\n        (0, removeCSSProperty_1[\"default\"])('font-family');\n        (0, removeCSSProperty_1[\"default\"])('font-size');\n        (0, removeCSSProperty_1[\"default\"])('line-height');\n        (0, removeCSSProperty_1[\"default\"])('text-align');\n        var dynamicStyleNode = state.dynamicStyleNode;\n        if (dynamicStyleNode) {\n            dynamicStyleNode.remove();\n        }\n        if (state.layout === model_1.LayoutTypes.Fixed) {\n            state.fixedStylesNodes.forEach(function (node) {\n                node.remove();\n            });\n        }\n    }\n    catch (_a) {\n        // No need\n    }\n};\nexports[\"default\"] = cleanStyles;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/cleanStyles.js?");

/***/ }),

/***/ "./dist/utils/createBasicDOMElements.js":
/*!**********************************************!*\
  !*** ./dist/utils/createBasicDOMElements.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.cleanDOM = void 0;\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar cleanDOM = function (state) {\n    if (state.olectioContainerNode) {\n        state.olectioContainerNode.remove();\n    }\n    document.body.classList.remove(\"olectio-\".concat(state.layout, \"-layout\"), \"olectio-\".concat(state.scrollMode, \"-scroll\"), \"olectio-\".concat(state.theme, \"-theme\"));\n};\nexports.cleanDOM = cleanDOM;\n/**\n * Creates basic DOM elements for viewer\n * @param state Viewer state\n */\nvar createBasicDOMElements = function (state) {\n    var _a;\n    document.body.classList.add(\"olectio-\".concat(state.layout, \"-layout\"), \"olectio-\".concat(state.scrollMode, \"-scroll\"), \"olectio-\".concat(state.theme, \"-theme\"));\n    // #region Container node\n    var olectioContainerNode = document.createElement('div');\n    olectioContainerNode.id = 'olectio-container';\n    var backgroundCleaner = document.createElement('div');\n    backgroundCleaner.classList.add('olectio-bg-cleaner');\n    olectioContainerNode.appendChild(backgroundCleaner);\n    // #endregion Container node\n    // #region Main node\n    var olectioViewerNode = document.createElement('div');\n    olectioViewerNode.id = 'olectio-viewer';\n    olectioContainerNode.appendChild(olectioViewerNode);\n    // #endregion Main node\n    // #region Content Wrapper and child nodes\n    var contentWrapperNode = document.createElement('div');\n    contentWrapperNode.classList.add('olectio-content-wrapper');\n    olectioViewerNode.appendChild(contentWrapperNode);\n    if (state.layout === 'flow' && state.textAlign) {\n        contentWrapperNode.classList.add('olectio-force-text-align');\n    }\n    var contentPlaceholderNode = document.createElement('div');\n    contentPlaceholderNode.id = 'olectio-content-placeholder';\n    contentWrapperNode.appendChild(contentPlaceholderNode);\n    var endOfChapterCalculatorNode = document.createElement('div');\n    endOfChapterCalculatorNode.innerText = 'realEndOfChapter';\n    endOfChapterCalculatorNode.classList.add('olectio-end-of-chapter-calculator');\n    endOfChapterCalculatorNode.dataset.page = '-';\n    contentWrapperNode.appendChild(endOfChapterCalculatorNode);\n    // #endregion Content Wrapper and child nodes\n    var pagesLabelsNode;\n    if (state.layout === 'flow') {\n        // #region Content Wrapper Siblings\n        pagesLabelsNode = document.createElement('div');\n        pagesLabelsNode.classList.add('olectio-pages-labels');\n        olectioViewerNode.appendChild(pagesLabelsNode);\n    }\n    var selectionHighlightsNode = document.createElement('div');\n    selectionHighlightsNode.classList.add('olectio-highlights-layer', 'olectio-selection');\n    olectioViewerNode.appendChild(selectionHighlightsNode);\n    var selectionSelectorsNode = document.createElement('div');\n    selectionSelectorsNode.classList.add('olectio-highlights-layer', 'olectio-selectors');\n    olectioViewerNode.appendChild(selectionSelectorsNode);\n    var searchTermsHighlightsNode = document.createElement('div');\n    searchTermsHighlightsNode.classList.add('olectio-highlights-layer', 'olectio-search');\n    olectioViewerNode.appendChild(searchTermsHighlightsNode);\n    // #endregion Content Wrapper Siblings\n    var scrollerNode;\n    var nextChapterButton;\n    var prevChapterButton;\n    if ((_a = state.config.experimental) === null || _a === void 0 ? void 0 : _a.scrollbars) {\n        scrollerNode = document.createElement('div');\n        scrollerNode.classList.add('olectio-scroller');\n        var scrollerContentNode = document.createElement('div');\n        scrollerContentNode.classList.add('olectio-scroller-content');\n        scrollerNode.appendChild(scrollerContentNode);\n        olectioContainerNode.appendChild(scrollerNode);\n        nextChapterButton = document.createElement('button');\n        nextChapterButton.classList.add('olectio-button-chapter-navigation', 'olectio-next-chapter');\n        olectioContainerNode.appendChild(nextChapterButton);\n        prevChapterButton = document.createElement('button');\n        prevChapterButton.classList.add('olectio-button-chapter-navigation', 'olectio-prev-chapter');\n        olectioContainerNode.appendChild(prevChapterButton);\n    }\n    var dynamicStyleNode = document.createElement('link');\n    dynamicStyleNode.rel = 'stylesheet';\n    dynamicStyleNode.type = 'text/css';\n    document.head.appendChild(dynamicStyleNode);\n    var mainStylesheet = Array.from(document.styleSheets).find(function (s) { var _a; return ((_a = s.href) === null || _a === void 0 ? void 0 : _a.indexOf('olectio-viewer.css')) !== -1; });\n    document.body.appendChild(olectioContainerNode);\n    var containerWidth = contentWrapperNode.clientWidth;\n    var containerHeight = contentWrapperNode.clientHeight;\n    (0, state_1.updateState)({\n        basicDOMElementsCreated: true,\n        mainStyleNode: mainStylesheet === null || mainStylesheet === void 0 ? void 0 : mainStylesheet.ownerNode,\n        olectioContainerNode: olectioContainerNode,\n        olectioViewerNode: olectioViewerNode,\n        contentWrapperNode: contentWrapperNode,\n        contentPlaceholderNode: contentPlaceholderNode,\n        endOfChapterCalculatorNode: endOfChapterCalculatorNode,\n        pagesLabelsNode: pagesLabelsNode,\n        selectionHighlightsNode: selectionHighlightsNode,\n        selectionSelectorsNode: selectionSelectorsNode,\n        searchTermsHighlightsNode: searchTermsHighlightsNode,\n        dynamicStyleNode: dynamicStyleNode,\n        containerWidth: containerWidth,\n        containerHeight: containerHeight,\n        scrollerNode: scrollerNode,\n        nextChapterButton: nextChapterButton,\n        prevChapterButton: prevChapterButton\n    });\n};\nexports[\"default\"] = createBasicDOMElements;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/createBasicDOMElements.js?");

/***/ }),

/***/ "./dist/utils/escapeRegex.js":
/*!***********************************!*\
  !*** ./dist/utils/escapeRegex.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar escapeRegex = function (src) { return src.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'); };\nexports[\"default\"] = escapeRegex;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/escapeRegex.js?");

/***/ }),

/***/ "./dist/utils/getColumnGap.js":
/*!************************************!*\
  !*** ./dist/utils/getColumnGap.js ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar getColumnGap = function (availableWidth, maxWidth, minWidth, desiredColumnGap) {\n    var columnGap = desiredColumnGap;\n    if (availableWidth > maxWidth) {\n        var gapCompensation = Math.max(availableWidth - desiredColumnGap - maxWidth, 0);\n        columnGap += gapCompensation;\n    }\n    else if (availableWidth < minWidth + desiredColumnGap) {\n        var gapCompensation = Math.min(availableWidth - minWidth - desiredColumnGap, 0);\n        columnGap += gapCompensation;\n    }\n    return columnGap;\n};\nexports[\"default\"] = getColumnGap;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getColumnGap.js?");

/***/ }),

/***/ "./dist/utils/getFirstTextNode.js":
/*!****************************************!*\
  !*** ./dist/utils/getFirstTextNode.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Gets first text node from all descendants in provided element\n * @param element DOM Element\n * @returns First text node or `null`\n */\nvar getFirstTextNode = function (element) {\n    if (element.nodeType === Node.TEXT_NODE) {\n        return element;\n    }\n    var result = null;\n    var children = Array.from(element.childNodes);\n    for (var i = 0, l = children.length; i < l && !result; i++) {\n        var node = children[i];\n        if (node.nodeType === Node.TEXT_NODE) {\n            result = node;\n        }\n        else if (node.nodeType === Node.ELEMENT_NODE) {\n            result = getFirstTextNode(node);\n        }\n    }\n    return result;\n};\nexports[\"default\"] = getFirstTextNode;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getFirstTextNode.js?");

/***/ }),

/***/ "./dist/utils/getLastTextNode.js":
/*!***************************************!*\
  !*** ./dist/utils/getLastTextNode.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Gets first text node from all descendants in provided element\n * @param element DOM Element\n * @returns First text node or `null`\n */\nvar getLastTextNode = function (element) {\n    if (element.nodeType === Node.TEXT_NODE) {\n        return element;\n    }\n    var result = null;\n    var children = Array.from(element.childNodes).reverse();\n    for (var i = 0, l = children.length; i < l && !result; i++) {\n        var node = children[i];\n        if (node.nodeType === Node.TEXT_NODE) {\n            result = node;\n        }\n        else if (node.nodeType === Node.ELEMENT_NODE) {\n            result = getLastTextNode(node);\n        }\n    }\n    return result;\n};\nexports[\"default\"] = getLastTextNode;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getLastTextNode.js?");

/***/ }),

/***/ "./dist/utils/getNextSibling.js":
/*!**************************************!*\
  !*** ./dist/utils/getNextSibling.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar getNextSibling = function (node) {\n    if (node.nextSibling) {\n        return node.nextSibling;\n    }\n    if (node.parentNode) {\n        return getNextSibling(node.parentNode);\n    }\n    return null;\n};\nexports[\"default\"] = getNextSibling;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getNextSibling.js?");

/***/ }),

/***/ "./dist/utils/getNodeFromQuerySelector.js":
/*!************************************************!*\
  !*** ./dist/utils/getNodeFromQuerySelector.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.getElementFromQuerySelector = void 0;\n/**\n * Gets a DOM Node from a compressed Query Selector\n * @param {string} querySelector Query Selector\n * @returns DOM Node for the query Selector or null if it do now exist\n */\nvar getNodeFromQuerySelector = function (querySelector) {\n    if (querySelector.endsWith('}')) {\n        var start = querySelector.lastIndexOf('{') + 1;\n        var numberText = querySelector.substring(start, querySelector.length - 1);\n        var nthChild = parseInt(numberText, 10);\n        var parentExpression = querySelector.substring(0, start - 1);\n        var parent_1 = getNodeFromQuerySelector(parentExpression);\n        if (parent_1) {\n            if (nthChild >= parent_1.childNodes.length) {\n                nthChild = parent_1.childNodes.length - 1;\n            }\n            return parent_1.childNodes[nthChild];\n        }\n        return null;\n    }\n    return document.querySelector(querySelector);\n};\n/**\n * Gets a DOM Element from a compressed Query Selector\n * @param {string} querySelector Query Selector\n * @returns DOM Element for the query Selector or null if it do now exist\n */\nvar getElementFromQuerySelector = function (querySelector) {\n    if (querySelector.endsWith('}')) {\n        var start = querySelector.lastIndexOf('{') + 1;\n        var parentExpression = querySelector.substring(0, start - 1);\n        return (0, exports.getElementFromQuerySelector)(parentExpression);\n    }\n    return document.querySelector(querySelector);\n};\nexports.getElementFromQuerySelector = getElementFromQuerySelector;\nexports[\"default\"] = getNodeFromQuerySelector;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getNodeFromQuerySelector.js?");

/***/ }),

/***/ "./dist/utils/getPropertyChangeHandler.js":
/*!************************************************!*\
  !*** ./dist/utils/getPropertyChangeHandler.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\n/**\n * Gets property change handler methods\n * @param override When `true`, only last submitted promise will be resolved when property\n * changes to desired value. The previous ones will be rejected. It will work like some kind of\n * debouncer. When `false`, all promises will be queued and resolved. If `uniqueKey` is provided\n * to `waiter` method, only last promise with same `key` will be resolved (previous ones will be\n * rejected)\n * @returns `resolver` (executes when property gets desired value) and `waiter` (subscribes and\n * waits for property change) methods\n */\nvar getPropertyChangeHandler = function (override) {\n    if (override) {\n        var currentResolve_1 = null;\n        var currentReject_1 = null;\n        return {\n            resolver: function () {\n                if (currentResolve_1) {\n                    currentResolve_1();\n                }\n                currentReject_1 = null;\n                currentResolve_1 = null;\n            },\n            waiter: function () { return __awaiter(void 0, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (currentReject_1) {\n                        currentReject_1();\n                    }\n                    return [2 /*return*/, new Promise(function (resolve, reject) {\n                            currentResolve_1 = resolve;\n                            currentReject_1 = reject;\n                        })];\n                });\n            }); }\n        };\n    }\n    var resolvers = [];\n    return {\n        resolver: function () {\n            var promise = resolvers.shift();\n            while (promise) {\n                promise.resolve();\n                promise = resolvers.shift();\n            }\n        },\n        waiter: function (uniqueKey) { return __awaiter(void 0, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        if (uniqueKey) {\n                            var existingIndex = resolvers.findIndex(function (r) { return r.key === uniqueKey; });\n                            if (existingIndex !== -1) {\n                                var existing = resolvers[existingIndex];\n                                existing.reject();\n                                resolvers.splice(existingIndex, 1);\n                            }\n                        }\n                        resolvers.push({\n                            key: uniqueKey,\n                            resolve: resolve,\n                            reject: reject\n                        });\n                    })];\n            });\n        }); }\n    };\n};\nexports[\"default\"] = getPropertyChangeHandler;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getPropertyChangeHandler.js?");

/***/ }),

/***/ "./dist/utils/getQuerySelectorFromNode.js":
/*!************************************************!*\
  !*** ./dist/utils/getQuerySelectorFromNode.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Gets the query Selector String from a specific DOM Node\n * @param {Node} node DOM node to get The Query Selector\n * @returns {string} Custom compressed Query Selector pointer to the node\n */\nvar getQuerySelectorFromNode = function (node) {\n    var element = node;\n    if (element.dataset && element.dataset.id) {\n        return \"\".concat(element.tagName.toLowerCase(), \"[data-id=\\\"\").concat(element.dataset.id, \"\\\"]\");\n    }\n    if (element.id) {\n        return \"#\".concat(element.id);\n    }\n    if (node.parentNode) {\n        // It is not a selectable HTMLElement or another type of node\n        var parentQuerySelector = getQuerySelectorFromNode(node.parentNode);\n        var childIndex = 0;\n        var child = node;\n        while (child.previousSibling) {\n            child = child.previousSibling;\n            childIndex++;\n        }\n        // To compress the Nth Child Selector we use {childNumber} expression\n        // at the end of the string\n        return \"\".concat(parentQuerySelector, \"{\").concat(childIndex, \"}\");\n    }\n    throw new Error('Can not find Query Selection from node');\n};\nexports[\"default\"] = getQuerySelectorFromNode;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getQuerySelectorFromNode.js?");

/***/ }),

/***/ "./dist/utils/getRangesFromSelectionRanges.js":
/*!****************************************************!*\
  !*** ./dist/utils/getRangesFromSelectionRanges.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar getNodeFromQuerySelector_1 = __importDefault(__webpack_require__(/*! ./getNodeFromQuerySelector */ \"./dist/utils/getNodeFromQuerySelector.js\"));\n/**\n * Converts an array of compressed selection ranges to\n * a DOM Range Array\n * @param {SelectionRange[]} selection array of compressed selection ranges\n * @returns {Range[]} array of DOM Ranges\n */\nvar getRangesFromSelectionRanges = function (selection) {\n    var result = new Array();\n    selection.forEach(function (item) {\n        var startNode = (0, getNodeFromQuerySelector_1[\"default\"])(item.start.querySelector);\n        var endNode = (0, getNodeFromQuerySelector_1[\"default\"])(item.end.querySelector);\n        if (startNode && endNode) {\n            var range = new Range();\n            range.setStart(startNode, item.start.offset);\n            range.setEnd(endNode, item.end.offset);\n            result.push(range);\n        }\n        else {\n            loglevel_1[\"default\"].info('No start or end node', { item: item, startNode: startNode, endNode: endNode });\n        }\n    });\n    return result;\n};\nexports[\"default\"] = getRangesFromSelectionRanges;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getRangesFromSelectionRanges.js?");

/***/ }),

/***/ "./dist/utils/getSelectionRangeFromSelection.js":
/*!******************************************************!*\
  !*** ./dist/utils/getSelectionRangeFromSelection.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar getQuerySelectorFromNode_1 = __importDefault(__webpack_require__(/*! ./getQuerySelectorFromNode */ \"./dist/utils/getQuerySelectorFromNode.js\"));\n/**\n * Gets a selection Range from a DOM Selection\n * @param {Range} selection DOM Selection used to generate the range\n * or null for empty selection\n * @returns {SelectionRange} Resulting selection range\n */\nvar getSelectionRangeFromSelection = function (selection) {\n    var start = {\n        offset: selection.startOffset,\n        querySelector: (0, getQuerySelectorFromNode_1[\"default\"])(selection.startContainer)\n    };\n    var end = {\n        offset: selection.endOffset,\n        querySelector: (0, getQuerySelectorFromNode_1[\"default\"])(selection.endContainer)\n    };\n    return {\n        obfuscatedText: selection.toString(),\n        start: start,\n        end: end\n    };\n};\nexports[\"default\"] = getSelectionRangeFromSelection;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getSelectionRangeFromSelection.js?");

/***/ }),

/***/ "./dist/utils/getTouchCenter.js":
/*!**************************************!*\
  !*** ./dist/utils/getTouchCenter.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar getTouchCenter = function (touches) { return ({\n    x: touches.map(function (touch) { return touch.x; }).reduce(function (t, c) { return t + c; }) / touches.length,\n    y: touches.map(function (touch) { return touch.y; }).reduce(function (t, c) { return t + c; }) / touches.length\n}); };\nexports[\"default\"] = getTouchCenter;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getTouchCenter.js?");

/***/ }),

/***/ "./dist/utils/getTouches.js":
/*!**********************************!*\
  !*** ./dist/utils/getTouches.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Gets touches coordinates from touch event\n * @param ev Touch event\n */\nvar getTouches = function (ev) { return Array.from(ev.touches).map(function (touch) { return ({\n    x: touch.pageX,\n    y: touch.pageY\n}); }); };\nexports[\"default\"] = getTouches;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/getTouches.js?");

/***/ }),

/***/ "./dist/utils/globalEvents.js":
/*!************************************!*\
  !*** ./dist/utils/globalEvents.js ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nexports.removeGlobalEvents = exports.setupGlobalEvents = void 0;\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar onResize;\nvar onViewportClick;\n/**\n * Sets up viewer global events\n * @param dispatcher Viewer dispatcher\n */\nvar setupGlobalEvents = function (state, dispatcher) {\n    onResize = function () {\n        var action = {\n            type: 'resize'\n        };\n        dispatcher(action)[\"catch\"](function (ex) {\n            var _a = ex, stack = _a.stack, message = _a.message;\n            console.error('Error dispatching action', stack || message);\n        });\n    };\n    window.addEventListener('resize', onResize);\n    onViewportClick = function () {\n        if (state.toggleReadModeOnClick) {\n            var avoidReadModeChange = state.dragging || state.selectingText || state.highlightClicked;\n            if (!avoidReadModeChange) {\n                (0, state_1.updateState)({ readMode: !state.readMode });\n            }\n        }\n    };\n    if (state.olectioContainerNode) {\n        state.olectioContainerNode.addEventListener('click', onViewportClick);\n    }\n};\nexports.setupGlobalEvents = setupGlobalEvents;\n/**\n * Removes global events\n */\nvar removeGlobalEvents = function (state) {\n    var olectioContainerNode = state.olectioContainerNode;\n    if (onResize) {\n        window.removeEventListener('resize', onResize);\n    }\n    if (olectioContainerNode && onViewportClick) {\n        olectioContainerNode.removeEventListener('click', onViewportClick);\n    }\n};\nexports.removeGlobalEvents = removeGlobalEvents;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/globalEvents.js?");

/***/ }),

/***/ "./dist/utils/handleAnchors.js":
/*!*************************************!*\
  !*** ./dist/utils/handleAnchors.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\n/* eslint-disable no-param-reassign */\nvar shortid_1 = __webpack_require__(/*! shortid */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/index.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar handleAnchors = function (element, state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    if (state.config.eventHandler) {\n        var anchors = element.querySelectorAll('a');\n        anchors.forEach(function (a) {\n            var id = (0, shortid_1.generate)();\n            var link = \"link-\".concat(id);\n            a.dataset.link = link;\n            a.onclick = function (e) {\n                e.preventDefault();\n            };\n            if (state.config.eventHandler) {\n                var event_1 = {\n                    type: 'onLinkLoaded',\n                    slug: state.slug,\n                    link: link,\n                    href: a.getAttribute('href'),\n                    target: a.getAttribute('target')\n                };\n                state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                    var _a = ex, message = _a.message, stack = _a.stack;\n                    console.error('Error at event handler', stack || message);\n                });\n            }\n        });\n    }\n};\nexports[\"default\"] = handleAnchors;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/handleAnchors.js?");

/***/ }),

/***/ "./dist/utils/handleFlowCssAndLoad.js":
/*!********************************************!*\
  !*** ./dist/utils/handleFlowCssAndLoad.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\n/**\n * Handles contents CSS urls and waits for load before calling provided callback\n * @param url CSS url\n * @param callback Callback that will be called after CSS are handled and loaded\n */\nvar handleFlowCssAndLoad = function (url, callback) {\n    var state = (0, state_1.getState)();\n    if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n        throw new Error('No need for CSS special handler in flow layout');\n    }\n    if (state.loadedCssUrls.has(url)) {\n        callback();\n        return;\n    }\n    state.loadedCssUrls.add(url);\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.type = 'text/css';\n    var onLoad = function () {\n        link.removeEventListener('load', onLoad);\n        callback();\n    };\n    link.addEventListener('load', onLoad);\n    document.head.appendChild(link);\n    state.fixedStylesNodes.push(link);\n    link.href = url;\n};\nexports[\"default\"] = handleFlowCssAndLoad;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/handleFlowCssAndLoad.js?");

/***/ }),

/***/ "./dist/utils/highlights/clearNativeSelection.js":
/*!*******************************************************!*\
  !*** ./dist/utils/highlights/clearNativeSelection.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar getSelection_1 = __importDefault(__webpack_require__(/*! ../../lib/animation/getSelection */ \"./dist/lib/animation/getSelection.js\"));\nvar clearNativeSelection = function () {\n    var selection = (0, getSelection_1[\"default\"])();\n    if (selection) {\n        selection.removeAllRanges();\n    }\n};\nexports[\"default\"] = clearNativeSelection;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/clearNativeSelection.js?");

/***/ }),

/***/ "./dist/utils/highlights/clearSelection.js":
/*!*************************************************!*\
  !*** ./dist/utils/highlights/clearSelection.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar state_1 = __webpack_require__(/*! ../../lib/state */ \"./dist/lib/state/index.js\");\nvar removeLayerHighlights_1 = __importDefault(__webpack_require__(/*! ./removeLayerHighlights */ \"./dist/utils/highlights/removeLayerHighlights.js\"));\nvar clearSelection = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    if (state.selectionHighlightsNode) {\n        (0, removeLayerHighlights_1[\"default\"])(state.selectionHighlightsNode);\n    }\n};\nexports[\"default\"] = clearSelection;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/clearSelection.js?");

/***/ }),

/***/ "./dist/utils/highlights/clearUserHighlights.js":
/*!******************************************************!*\
  !*** ./dist/utils/highlights/clearUserHighlights.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar state_1 = __webpack_require__(/*! ../../lib/state */ \"./dist/lib/state/index.js\");\nvar clearUserHighlights = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    state.highlightersLayers.clear();\n    state.currentUserHighlights.clear();\n    state.currentUserDomHighlights.clear();\n};\nexports[\"default\"] = clearUserHighlights;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/clearUserHighlights.js?");

/***/ }),

/***/ "./dist/utils/highlights/clientToContentWrapperCoordinates.js":
/*!********************************************************************!*\
  !*** ./dist/utils/highlights/clientToContentWrapperCoordinates.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.clientToContentWrapperTop = exports.clientToContentWrapperLeft = void 0;\nvar state_1 = __webpack_require__(/*! ../../lib/state */ \"./dist/lib/state/index.js\");\nvar getScrollLeftPosition_1 = __importDefault(__webpack_require__(/*! ./getScrollLeftPosition */ \"./dist/utils/highlights/getScrollLeftPosition.js\"));\nvar getScrollTopPosition_1 = __importDefault(__webpack_require__(/*! ./getScrollTopPosition */ \"./dist/utils/highlights/getScrollTopPosition.js\"));\n/**\n * Translates client left coordinate to main node left coordinate\n * @param left Left coordinate\n * @returns Zoom panel left coordinate\n */\nvar clientToContentWrapperLeft = function (left) {\n    var state = (0, state_1.getState)();\n    var result = left;\n    result += (0, getScrollLeftPosition_1[\"default\"])(state);\n    result /= state.scale;\n    return result;\n};\nexports.clientToContentWrapperLeft = clientToContentWrapperLeft;\n/**\n * Translates client top coordinate to main node top coordinate\n * @param top Top coordinate\n * @returns Zoom panel top coordinate\n */\nvar clientToContentWrapperTop = function (top) {\n    var state = (0, state_1.getState)();\n    var result = top;\n    result += (0, getScrollTopPosition_1[\"default\"])(state);\n    result /= state.scale;\n    return result;\n};\nexports.clientToContentWrapperTop = clientToContentWrapperTop;\n/**\n * Translates client coordinates to main node coordinates\n * recalculating the zoom and scroll deformations\n * @param {Coordinates} client Client coordinates\n * @returns Zoom Panel coordinates\n */\nvar clientToContentWrapperCoordinates = function (client) {\n    var state = (0, state_1.getState)();\n    return {\n        zoomFix: 1 / state.scale,\n        x: (0, exports.clientToContentWrapperLeft)(client.x),\n        y: (0, exports.clientToContentWrapperTop)(client.y)\n    };\n};\nexports[\"default\"] = clientToContentWrapperCoordinates;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/clientToContentWrapperCoordinates.js?");

/***/ }),

/***/ "./dist/utils/highlights/deduplicateRects.js":
/*!***************************************************!*\
  !*** ./dist/utils/highlights/deduplicateRects.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * De-duplicates selection rectangles (some times there are duplicated rectangles,\n * specially in Google Chrome)\n * @param {DOMRectList | DOMRect[] | undefined} rectangles - Rectangles to be de-duplicated\n * @returns {DOMRect[]} New list of rectangles\n */\nvar deduplicateRects = function (rectangles) {\n    var result = new Array();\n    var lastRect = null;\n    if (rectangles) {\n        var _loop_1 = function (i) {\n            var rect = rectangles[i];\n            // Consecutive chrome rectangles\n            if (lastRect &&\n                Math.abs(lastRect.y - rect.y) < 4 &&\n                Math.abs(lastRect.height - rect.height) < 4 &&\n                lastRect.x + lastRect.width + 4 >= rect.x) {\n                lastRect.width = rect.width + rect.x - lastRect.x;\n            }\n            else if (result.some(function (prevRect) {\n                return prevRect &&\n                    prevRect.y - 4 <= rect.y &&\n                    prevRect.x - 4 <= rect.x &&\n                    prevRect.width + prevRect.x + 4 >= rect.width + rect.x &&\n                    prevRect.height + prevRect.y + 4 >= rect.height + rect.y;\n            })) {\n                // Contained in the previous rectangle\n            }\n            else if (rect.height > 4) {\n                result.push(rect);\n                lastRect = rect;\n            }\n        };\n        for (var i = 0; i < rectangles.length; i++) {\n            _loop_1(i);\n        }\n    }\n    return result;\n};\nexports[\"default\"] = deduplicateRects;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/deduplicateRects.js?");

/***/ }),

/***/ "./dist/utils/highlights/drawExtensors.js":
/*!************************************************!*\
  !*** ./dist/utils/highlights/drawExtensors.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.removeExtensors = void 0;\n/* eslint-disable no-param-reassign */\nvar getSyntheticEvent_1 = __importDefault(__webpack_require__(/*! ../../lib/animation/getSyntheticEvent */ \"./dist/lib/animation/getSyntheticEvent.js\"));\nvar getWordSelection_1 = __importDefault(__webpack_require__(/*! ../../lib/animation/getWordSelection */ \"./dist/lib/animation/getWordSelection.js\"));\nvar state_1 = __webpack_require__(/*! ../../lib/state */ \"./dist/lib/state/index.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar clearNativeSelection_1 = __importDefault(__webpack_require__(/*! ./clearNativeSelection */ \"./dist/utils/highlights/clearNativeSelection.js\"));\nvar clientToContentWrapperCoordinates_1 = __webpack_require__(/*! ./clientToContentWrapperCoordinates */ \"./dist/utils/highlights/clientToContentWrapperCoordinates.js\");\nvar drawHighlights_1 = __importDefault(__webpack_require__(/*! ./drawHighlights */ \"./dist/utils/highlights/drawHighlights.js\"));\nvar extendSelection_1 = __importDefault(__webpack_require__(/*! ./extendSelection */ \"./dist/utils/highlights/extendSelection.js\"));\nvar removeLayerHighlights_1 = __importDefault(__webpack_require__(/*! ./removeLayerHighlights */ \"./dist/utils/highlights/removeLayerHighlights.js\"));\nvar removeSelectionMenu_1 = __importDefault(__webpack_require__(/*! ./removeSelectionMenu */ \"./dist/utils/highlights/removeSelectionMenu.js\"));\nvar left = null;\nvar right = null;\nvar onDragMove;\nvar onDragEnd;\nvar onScroll = null;\nvar getLeftExtensor = function () {\n    if (!left) {\n        left = document.createElement('div');\n        left.classList.add('olectio-selection-extensor', 'olectio-left-extensor');\n    }\n    left.classList.remove('olectio-right-extensor');\n    left.classList.add('olectio-left-extensor');\n    return left;\n};\nvar getRightExtensor = function () {\n    if (!right) {\n        right = document.createElement('div');\n        right.classList.add('olectio-selection-extensor', 'olectio-right-extensor');\n    }\n    right.classList.remove('olectio-left-extensor');\n    right.classList.add('olectio-right-extensor');\n    return right;\n};\nvar drawExtensors = function (domHighlights, initialSelection, state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    var _a = state, selectionSelectorsNode = _a.selectionSelectorsNode, selectionHighlightsNode = _a.selectionHighlightsNode;\n    (0, removeLayerHighlights_1[\"default\"])(selectionSelectorsNode);\n    var leftExtensor = getLeftExtensor();\n    var rightExtensor = getRightExtensor();\n    var moving = false;\n    var isLeft = true;\n    var onDragStart = function (e) {\n        e.stopImmediatePropagation();\n        e.stopPropagation();\n        (0, setCSSProperty_1[\"default\"])('user-select', 'text');\n        moving = true;\n        (0, removeSelectionMenu_1[\"default\"])(state);\n    };\n    var onLeftStart = function (e) {\n        isLeft = true;\n        onDragStart(e);\n    };\n    var onRightStart = function (e) {\n        isLeft = false;\n        onDragStart(e);\n    };\n    leftExtensor.onmousedown = onLeftStart;\n    leftExtensor.ontouchstart = onLeftStart;\n    rightExtensor.onmousedown = onRightStart;\n    rightExtensor.ontouchstart = onRightStart;\n    var currentInitial = initialSelection.cloneRange();\n    var currentSelection = initialSelection.cloneRange();\n    var currentHighlights = domHighlights;\n    var lineHeight = 0;\n    var updatePosition = function (domItems) {\n        var rects = Array.from(domItems.map(function (hl) { return hl.getBoundingClientRect(); }));\n        var firstRect = rects[0];\n        var lastRect = rects.slice(-1)[0];\n        leftExtensor.classList.remove('olectio-right-extensor');\n        leftExtensor.classList.add('olectio-left-extensor');\n        leftExtensor.style.top = \"\".concat((0, clientToContentWrapperCoordinates_1.clientToContentWrapperTop)(firstRect.top + firstRect.height), \"px\");\n        leftExtensor.style.left = \"\".concat((0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(firstRect.left) - 28, \"px\");\n        rightExtensor.classList.remove('olectio-left-extensor');\n        rightExtensor.classList.add('olectio-right-extensor');\n        rightExtensor.style.top = \"\".concat((0, clientToContentWrapperCoordinates_1.clientToContentWrapperTop)(lastRect.top + lastRect.height), \"px\");\n        rightExtensor.style.left = \"\".concat((0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(lastRect.right), \"px\");\n        if (!lineHeight) {\n            lineHeight = firstRect.height;\n        }\n    };\n    var updateRightPosition = function (domItems, extensor) {\n        var rects = Array.from(domItems.map(function (hl) { return hl.getBoundingClientRect(); }));\n        var lastRect = rects.slice(-1)[0];\n        extensor.style.top = \"\".concat((0, clientToContentWrapperCoordinates_1.clientToContentWrapperTop)(lastRect.top + lastRect.height), \"px\");\n        extensor.style.left = \"\".concat((0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(lastRect.right), \"px\");\n    };\n    var updateLeftPosition = function (domItems, extensor) {\n        var rects = Array.from(domItems.map(function (hl) { return hl.getBoundingClientRect(); }));\n        var firstRect = rects[0];\n        extensor.style.top = \"\".concat((0, clientToContentWrapperCoordinates_1.clientToContentWrapperTop)(firstRect.top + firstRect.height), \"px\");\n        extensor.style.left = \"\".concat((0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(firstRect.left - 28), \"px\");\n    };\n    updatePosition(domHighlights);\n    onDragMove = function (ev) {\n        if (moving) {\n            ev.stopPropagation();\n            ev.stopImmediatePropagation();\n            if (!state.selectingText) {\n                (0, state_1.updateState)({\n                    selectingText: true\n                });\n            }\n            var event_1 = (0, getSyntheticEvent_1[\"default\"])(ev);\n            event_1.clientY -= lineHeight + 14;\n            if (isLeft) {\n                event_1.clientX += 14;\n            }\n            else {\n                event_1.clientX -= 14;\n            }\n            var wordSelection = (0, getWordSelection_1[\"default\"])(state, ev, event_1, true);\n            if (wordSelection) {\n                var _a = (0, extendSelection_1[\"default\"])(wordSelection, currentInitial, isLeft, !isLeft), range = _a.range, hasInverted = _a.hasInverted;\n                currentSelection = range;\n                currentHighlights = (0, drawHighlights_1[\"default\"])(selectionHighlightsNode, [currentSelection]);\n                if (hasInverted) {\n                    leftExtensor.classList.remove('olectio-left-extensor');\n                    leftExtensor.classList.add('olectio-right-extensor');\n                    rightExtensor.classList.remove('olectio-right-extensor');\n                    rightExtensor.classList.add('olectio-left-extensor');\n                    if (isLeft) {\n                        updateLeftPosition(currentHighlights, rightExtensor);\n                    }\n                    else {\n                        updateRightPosition(currentHighlights, leftExtensor);\n                    }\n                }\n            }\n            (0, clearNativeSelection_1[\"default\"])();\n            if (isLeft) {\n                leftExtensor.style.top = \"\".concat(event_1.clientY + lineHeight, \"px\");\n                leftExtensor.style.left = \"\".concat(event_1.clientX, \"px\");\n            }\n            else {\n                rightExtensor.style.top = \"\".concat(event_1.clientY + lineHeight, \"px\");\n                rightExtensor.style.left = \"\".concat(event_1.clientX, \"px\");\n            }\n        }\n    };\n    onDragEnd = function () {\n        if (moving) {\n            moving = false;\n            (0, state_1.updateState)({\n                currentSelection: currentSelection\n            });\n            updatePosition(currentHighlights);\n            currentInitial = currentSelection.cloneRange();\n            setTimeout(function () {\n                (0, state_1.updateState)({\n                    selectingText: false\n                });\n            }, 0);\n            (0, setCSSProperty_1[\"default\"])('user-select', 'none');\n            (0, clearNativeSelection_1[\"default\"])();\n            if (!currentSelection.collapsed &&\n                currentSelection.toString().trim() &&\n                state.config.eventHandler) {\n                var event_2 = {\n                    type: 'onUserSelect',\n                    slug: state.slug,\n                    productSlug: state.productSlug\n                };\n                state.config.eventHandler(event_2)[\"catch\"](function (ex) {\n                    var _a = ex, stack = _a.stack, message = _a.message;\n                    console.error('Error at event handler', stack || message);\n                });\n            }\n        }\n    };\n    onScroll = function (ev) {\n        if (moving) {\n            ev.preventDefault();\n        }\n    };\n    window.addEventListener('mouseup', onDragEnd);\n    window.addEventListener('touchend', onDragEnd);\n    window.addEventListener('mousemove', onDragMove);\n    window.addEventListener('touchmove', onDragMove);\n    window.addEventListener('scroll', onScroll);\n    selectionSelectorsNode.appendChild(leftExtensor);\n    selectionSelectorsNode.appendChild(rightExtensor);\n};\nvar removeExtensors = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    var selectionSelectorsNode = state.selectionSelectorsNode;\n    (0, removeLayerHighlights_1[\"default\"])(selectionSelectorsNode);\n    if (onScroll) {\n        window.removeEventListener('scroll', onScroll);\n    }\n    if (onDragEnd) {\n        window.removeEventListener('mouseup', onDragEnd);\n        window.removeEventListener('touchend', onDragEnd);\n        onDragEnd = null;\n    }\n    if (onDragMove) {\n        window.removeEventListener('mousemove', onDragMove);\n        window.removeEventListener('touchmove', onDragMove);\n        onDragMove = null;\n    }\n};\nexports.removeExtensors = removeExtensors;\nexports[\"default\"] = drawExtensors;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/drawExtensors.js?");

/***/ }),

/***/ "./dist/utils/highlights/drawHighlights.js":
/*!*************************************************!*\
  !*** ./dist/utils/highlights/drawHighlights.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar clientToContentWrapperCoordinates_1 = __importDefault(__webpack_require__(/*! ./clientToContentWrapperCoordinates */ \"./dist/utils/highlights/clientToContentWrapperCoordinates.js\"));\nvar deduplicateRects_1 = __importDefault(__webpack_require__(/*! ./deduplicateRects */ \"./dist/utils/highlights/deduplicateRects.js\"));\nvar removeLayerHighlights_1 = __importDefault(__webpack_require__(/*! ./removeLayerHighlights */ \"./dist/utils/highlights/removeLayerHighlights.js\"));\n/**\n * Transforms provided selection ranges into coordinates to render highlights inside provided\n * container\n * @param container DOM Element that will contain highlights\n * @param ranges Selection ranges that will be turned into highlights\n * @param keepExisting Keep existing highlights in container\n */\nvar drawHighlights = function (container, ranges, keepExisting, key) {\n    if (keepExisting === void 0) { keepExisting = false; }\n    var resultRects = new Array();\n    ranges.forEach(function (selectionRange) {\n        var rects = selectionRange.getClientRects();\n        resultRects = resultRects.concat((0, deduplicateRects_1[\"default\"])(rects));\n    });\n    if (!keepExisting) {\n        (0, removeLayerHighlights_1[\"default\"])(container);\n    }\n    var highlights = new Array();\n    for (var i = 0; i < resultRects.length; i++) {\n        var rect = resultRects[i];\n        var highlight = document.createElement('div');\n        highlight.classList.add('olectio-highlight');\n        var zoomPanelCoordinates = (0, clientToContentWrapperCoordinates_1[\"default\"])({\n            x: rect.left,\n            y: rect.top\n        });\n        var zoomPanelEndCoordinates = (0, clientToContentWrapperCoordinates_1[\"default\"])({\n            x: rect.right,\n            y: rect.bottom\n        });\n        var left = zoomPanelCoordinates.x - 2.5;\n        var width = zoomPanelEndCoordinates.x - zoomPanelCoordinates.x + 5;\n        var top_1 = zoomPanelCoordinates.y;\n        var height = zoomPanelEndCoordinates.y - zoomPanelCoordinates.y;\n        var heightMargin = Math.min(Math.round(height * 0.35), 8);\n        var topMargin = Math.round(heightMargin / 2);\n        top_1 -= topMargin;\n        height += heightMargin;\n        highlight.style.left = \"\".concat(left, \"px\");\n        highlight.style.width = \"\".concat(width, \"px\");\n        highlight.style.top = \"\".concat(top_1, \"px\");\n        highlight.style.height = \"\".concat(height, \"px\");\n        if (key) {\n            highlight.dataset.key = key;\n        }\n        container.append(highlight);\n        highlights.push(highlight);\n    }\n    return highlights;\n};\nexports[\"default\"] = drawHighlights;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/drawHighlights.js?");

/***/ }),

/***/ "./dist/utils/highlights/extendSelection.js":
/*!**************************************************!*\
  !*** ./dist/utils/highlights/extendSelection.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar isPreviousThanSelection = function (range, initialSelection, isLeftExtensor) {\n    if (range.startContainer === initialSelection.startContainer) {\n        if (isLeftExtensor && range.endContainer === initialSelection.endContainer) {\n            return range.endOffset <= initialSelection.endOffset;\n        }\n        return range.startOffset <= initialSelection.startOffset;\n    }\n    return !!(range.startContainer.compareDocumentPosition(initialSelection.startContainer) &\n        Node.DOCUMENT_POSITION_FOLLOWING);\n};\nvar extendSelection = function (wordSelection, initialSelection, isLeftExtensor, isRightExtensor) {\n    if (isLeftExtensor === void 0) { isLeftExtensor = false; }\n    if (isRightExtensor === void 0) { isRightExtensor = false; }\n    var isPrevious = isPreviousThanSelection(wordSelection, initialSelection, isLeftExtensor);\n    var startContainer = initialSelection.startContainer, startOffset = initialSelection.startOffset, endContainer = initialSelection.endContainer, endOffset = initialSelection.endOffset;\n    var hasInverted = false;\n    if (isPrevious) {\n        if (isRightExtensor) {\n            if (startContainer === wordSelection.startContainer &&\n                startOffset === wordSelection.startOffset) {\n                // Word selection is not previous and starts like current selection, so we don't change it\n            }\n            else {\n                wordSelection.setStart(wordSelection.startContainer, wordSelection.startOffset);\n                wordSelection.setEnd(startContainer, startOffset > 1 ? startOffset - 1 : startOffset);\n                hasInverted = true;\n            }\n        }\n        else {\n            wordSelection.setEnd(endContainer, endOffset);\n        }\n    }\n    else if (isLeftExtensor) {\n        try {\n            wordSelection.setStart(endContainer, endOffset + 1);\n        }\n        catch (_a) {\n            wordSelection.setStart(endContainer, endOffset);\n        }\n        wordSelection.setEnd(wordSelection.endContainer, wordSelection.endOffset);\n        hasInverted = true;\n    }\n    else {\n        wordSelection.setStart(startContainer, startOffset);\n    }\n    return { hasInverted: hasInverted, range: wordSelection };\n};\nexports[\"default\"] = extendSelection;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/extendSelection.js?");

/***/ }),

/***/ "./dist/utils/highlights/extendToWord.js":
/*!***********************************************!*\
  !*** ./dist/utils/highlights/extendToWord.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar getSelection_1 = __importDefault(__webpack_require__(/*! ../../lib/animation/getSelection */ \"./dist/lib/animation/getSelection.js\"));\nvar getLastTextNode_1 = __importDefault(__webpack_require__(/*! ../getLastTextNode */ \"./dist/utils/getLastTextNode.js\"));\n/**\n * Extends provided selection to get the\n * @param selection Selection\n */\nvar extendToWord = function (selection, contentWrapper) {\n    if (!selection || !selection.rangeCount) {\n        return;\n    }\n    var backupRange = selection.getRangeAt(0);\n    selection.modify('extend', 'forward', 'word');\n    var candidate = (0, getSelection_1[\"default\"])().getRangeAt(0);\n    if (contentWrapper !== candidate.endContainer &&\n        !contentWrapper.contains(candidate.endContainer)) {\n        var textNode = (0, getLastTextNode_1[\"default\"])(contentWrapper);\n        if (textNode) {\n            candidate.setEnd(textNode, textNode.length);\n            if (backupRange.endOffset !== candidate.endOffset ||\n                backupRange.endContainer !== candidate.endContainer) {\n                selection.removeAllRanges();\n                selection.addRange(candidate);\n                return;\n            }\n        }\n    }\n    if (!selection.toString().endsWith(' ')) {\n        selection.modify('extend', 'forward', 'character');\n    }\n    var iteration = 0;\n    while (++iteration < 25 &&\n        (contentWrapper === candidate.endContainer ||\n            contentWrapper.contains(candidate.endContainer)) &&\n        candidate.toString() !== selection.toString() &&\n        !selection.toString().match(/[.,/#!?$%^&*;:{}=\\-_`~()\\][ \\n]+$/)) {\n        candidate = (0, getSelection_1[\"default\"])().getRangeAt(0);\n        selection.modify('extend', 'forward', 'character');\n    }\n    selection.removeAllRanges();\n    selection.addRange(candidate);\n};\nexports[\"default\"] = extendToWord;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/extendToWord.js?");

/***/ }),

/***/ "./dist/utils/highlights/getClickedLink.js":
/*!*************************************************!*\
  !*** ./dist/utils/highlights/getClickedLink.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar state_1 = __webpack_require__(/*! ../../lib/state */ \"./dist/lib/state/index.js\");\n/**\n * Link margin in pixels\n */\nvar linkMargin = 5;\nvar detectLinkInFixedPage = function (element, syntheticEvent) {\n    var linkNodes = element.querySelectorAll('a div');\n    for (var i = 0; i < linkNodes.length; i++) {\n        var linkNode = linkNodes[i];\n        var rects = linkNode.getClientRects();\n        for (var j = 0; j < rects.length; j++) {\n            var rect = rects[j];\n            if (rect) {\n                if (rect.left - linkMargin <= syntheticEvent.clientX &&\n                    rect.right + linkMargin >= syntheticEvent.clientX &&\n                    rect.top - linkMargin <= syntheticEvent.clientY &&\n                    rect.bottom + linkMargin >= syntheticEvent.clientY) {\n                    return linkNode.parentElement;\n                }\n            }\n        }\n    }\n    return null;\n};\nvar getClickedLink = function (syntheticEvent, state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    var contentPlaceholderNode = state.contentPlaceholderNode;\n    var clickedLink = null;\n    try {\n        var element = document.elementFromPoint(syntheticEvent.clientX, syntheticEvent.clientY);\n        while (!clickedLink && element && element.parentElement && element !== contentPlaceholderNode) {\n            if (element.nodeName === 'A') {\n                clickedLink = element;\n            }\n            else if (element.classList.contains('olectio-fixed-content-container')) {\n                clickedLink = detectLinkInFixedPage(element, syntheticEvent);\n            }\n            element = element.parentElement;\n        }\n        return clickedLink;\n    }\n    catch (err) {\n        console.error(err);\n        return null;\n    }\n};\nexports[\"default\"] = getClickedLink;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/getClickedLink.js?");

/***/ }),

/***/ "./dist/utils/highlights/getConfirmationDialog.js":
/*!********************************************************!*\
  !*** ./dist/utils/highlights/getConfirmationDialog.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar getMenuPositions_1 = __importDefault(__webpack_require__(/*! ./getMenuPositions */ \"./dist/utils/highlights/getMenuPositions.js\"));\nvar getConfirmationDialog = function (onDelete, onCancel, state, highlightKey, currentSelection, confirmationMessage, confirmationOkText, confirmationCancelText) {\n    var _a = (0, getMenuPositions_1[\"default\"])(state, 180, highlightKey, currentSelection), left = _a.left, top = _a.top, arrowDown = _a.arrowDown;\n    var menu = document.createElement('div');\n    menu.classList.add('olectio-confirmation-dialog');\n    menu.classList.add(\"olectio-\".concat(arrowDown ? 'bottom' : 'top', \"-arrow\"));\n    menu.style.top = \"\".concat(top, \"px\");\n    menu.style.left = \"\".concat(left, \"px\");\n    var onMouseDown = function (e) {\n        e.stopImmediatePropagation();\n        e.stopPropagation();\n    };\n    menu.onmousedown = onMouseDown;\n    menu.ontouchstart = onMouseDown;\n    menu.onclick = onMouseDown;\n    var wrapper = document.createElement('div');\n    wrapper.classList.add('olectio-confirmation-dialog-wrapper');\n    menu.appendChild(wrapper);\n    var holder = document.createElement('div');\n    holder.classList.add('olectio-confirmation-dialog-holder');\n    wrapper.appendChild(holder);\n    var form = document.createElement('form');\n    form.setAttribute('novalidate', '');\n    holder.appendChild(form);\n    var onSubmit = function (e) {\n        e.preventDefault();\n    };\n    form.onsubmit = onSubmit;\n    var fieldset = document.createElement('fieldset');\n    form.appendChild(fieldset);\n    var container = document.createElement('div');\n    container.classList.add('olectio-confirmation-dialog-holder');\n    fieldset.appendChild(container);\n    var message = document.createElement('p');\n    message.innerText = confirmationMessage || 'Realmente deseas eliminar esta nota?';\n    container.appendChild(message);\n    var buttons = document.createElement('div');\n    buttons.classList.add('olectio-confirmation-dialog-buttons');\n    container.appendChild(buttons);\n    var deleteButton = document.createElement('button');\n    deleteButton.innerText = confirmationOkText || 'Eliminar';\n    deleteButton.onclick = onDelete;\n    buttons.appendChild(deleteButton);\n    var cancelButton = document.createElement('button');\n    cancelButton.innerText = confirmationCancelText || 'Cancelar';\n    cancelButton.onclick = onCancel;\n    buttons.appendChild(cancelButton);\n    return menu;\n};\nexports[\"default\"] = getConfirmationDialog;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/getConfirmationDialog.js?");

/***/ }),

/***/ "./dist/utils/highlights/getFixedContentContainer.js":
/*!***********************************************************!*\
  !*** ./dist/utils/highlights/getFixedContentContainer.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar getFixedContentContainer = function (node) {\n    var _a, _b;\n    var current = node;\n    while (current.parentElement && !((_a = current.dataset) === null || _a === void 0 ? void 0 : _a.slug)) {\n        current = current.parentElement;\n    }\n    if ((_b = current.dataset) === null || _b === void 0 ? void 0 : _b.slug) {\n        return current;\n    }\n    return null;\n};\nexports[\"default\"] = getFixedContentContainer;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/getFixedContentContainer.js?");

/***/ }),

/***/ "./dist/utils/highlights/getMenuPositions.js":
/*!***************************************************!*\
  !*** ./dist/utils/highlights/getMenuPositions.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar model_1 = __webpack_require__(/*! ../../model */ \"./dist/model/index.js\");\nvar clientToContentWrapperCoordinates_1 = __webpack_require__(/*! ./clientToContentWrapperCoordinates */ \"./dist/utils/highlights/clientToContentWrapperCoordinates.js\");\nvar getMenuPositions = function (state, menuNeededSpace, highlightKey, currentSelection) {\n    var arrowDown = true;\n    var x = 0;\n    var y = 0;\n    var finalTop = 0;\n    var top = Infinity;\n    var right = 0;\n    var bottom = 0;\n    var left = Infinity;\n    var minLeft = 0;\n    var maxLeft = Infinity;\n    if (state.layout === model_1.LayoutTypes.Flow &&\n        state.scrollMode === 'horizontal' &&\n        state.lastClickCoords) {\n        var clickLeft = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(state.lastClickCoords.x);\n        minLeft = Math.floor(clickLeft / state.totalColumnWidth) * state.totalColumnWidth;\n        maxLeft = minLeft + state.totalColumnWidth;\n    }\n    // TODO: Max left and max right for fixed\n    if (highlightKey) {\n        var domHighlights = state.currentUserDomHighlights.get(highlightKey);\n        if (domHighlights) {\n            for (var i = 0, l = domHighlights.length; i < l; i++) {\n                var rect = domHighlights[i].getBoundingClientRect();\n                var rectLeft = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(rect.left);\n                if (rectLeft < maxLeft && rectLeft >= minLeft) {\n                    var rectRight = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(rect.right);\n                    left = Math.min(left, rectLeft);\n                    top = Math.min(top, rect.top);\n                    right = Math.max(right, rectRight);\n                    bottom = Math.max(bottom, rect.bottom);\n                }\n            }\n            x = left + (right - left) / 2;\n            finalTop = top - 15;\n            y = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperTop)(top);\n        }\n    }\n    else if (currentSelection) {\n        var rects = currentSelection.getClientRects();\n        for (var i = 0, l = rects.length; i < l; i++) {\n            var rect = rects[i];\n            var rectLeft = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(rect.left);\n            if (rectLeft < maxLeft && rectLeft >= minLeft) {\n                var rectRight = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(rect.right);\n                left = Math.min(left, rectLeft);\n                top = Math.min(top, rect.top);\n                right = Math.max(right, rectRight);\n                bottom = Math.max(bottom, rect.bottom);\n            }\n        }\n        x = left + (right - left) / 2;\n        finalTop = top - 15;\n    }\n    if (finalTop < menuNeededSpace) {\n        if (state.containerHeight - bottom >= menuNeededSpace) {\n            arrowDown = false;\n            finalTop = bottom;\n        }\n        else {\n            finalTop = menuNeededSpace;\n        }\n    }\n    y = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperTop)(finalTop);\n    return {\n        left: x,\n        top: y,\n        arrowDown: arrowDown\n    };\n};\nexports[\"default\"] = getMenuPositions;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/getMenuPositions.js?");

/***/ }),

/***/ "./dist/utils/highlights/getScrollLeftPosition.js":
/*!********************************************************!*\
  !*** ./dist/utils/highlights/getScrollLeftPosition.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Returns left scroll position in pixels\n */\nvar getScrollLeftPosition = function (state) { return state.scrollLeft * -1; };\nexports[\"default\"] = getScrollLeftPosition;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/getScrollLeftPosition.js?");

/***/ }),

/***/ "./dist/utils/highlights/getScrollTopPosition.js":
/*!*******************************************************!*\
  !*** ./dist/utils/highlights/getScrollTopPosition.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Returns top scroll position in pixels\n */\nvar getScrollTopPosition = function (state) { return state.scrollTop * -1; };\nexports[\"default\"] = getScrollTopPosition;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/getScrollTopPosition.js?");

/***/ }),

/***/ "./dist/utils/highlights/index.js":
/*!****************************************!*\
  !*** ./dist/utils/highlights/index.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.getScrollTopPosition = exports.getScrollLeftPosition = exports.clientToContentWrapperCoordinates = exports.deduplicateRects = exports.drawHighlights = void 0;\nvar drawHighlights_1 = __webpack_require__(/*! ./drawHighlights */ \"./dist/utils/highlights/drawHighlights.js\");\n__createBinding(exports, drawHighlights_1, \"default\", \"drawHighlights\");\nvar deduplicateRects_1 = __webpack_require__(/*! ./deduplicateRects */ \"./dist/utils/highlights/deduplicateRects.js\");\n__createBinding(exports, deduplicateRects_1, \"default\", \"deduplicateRects\");\nvar clientToContentWrapperCoordinates_1 = __webpack_require__(/*! ./clientToContentWrapperCoordinates */ \"./dist/utils/highlights/clientToContentWrapperCoordinates.js\");\n__createBinding(exports, clientToContentWrapperCoordinates_1, \"default\", \"clientToContentWrapperCoordinates\");\nvar getScrollLeftPosition_1 = __webpack_require__(/*! ./getScrollLeftPosition */ \"./dist/utils/highlights/getScrollLeftPosition.js\");\n__createBinding(exports, getScrollLeftPosition_1, \"default\", \"getScrollLeftPosition\");\nvar getScrollTopPosition_1 = __webpack_require__(/*! ./getScrollTopPosition */ \"./dist/utils/highlights/getScrollTopPosition.js\");\n__createBinding(exports, getScrollTopPosition_1, \"default\", \"getScrollTopPosition\");\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/index.js?");

/***/ }),

/***/ "./dist/utils/highlights/redrawUserHighlights.js":
/*!*******************************************************!*\
  !*** ./dist/utils/highlights/redrawUserHighlights.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar drawHighlights_1 = __importDefault(__webpack_require__(/*! ../../lib/actions/drawHighlights */ \"./dist/lib/actions/drawHighlights.js\"));\nvar model_1 = __webpack_require__(/*! ../../model */ \"./dist/model/index.js\");\nvar redrawUserHighlights = function (state) { return __awaiter(void 0, void 0, void 0, function () {\n    var currentUserHighlights, actions;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                currentUserHighlights = state.currentUserHighlights;\n                actions = new Map();\n                currentUserHighlights.forEach(function (highlightInfo) {\n                    var drawAction = actions.get(highlightInfo.highlighterKey);\n                    if (!drawAction) {\n                        drawAction = {\n                            type: 'drawHighlights',\n                            color: highlightInfo.color,\n                            key: highlightInfo.highlighterKey,\n                            highlights: [],\n                            clear: state.layout === model_1.LayoutTypes.Flow\n                        };\n                        actions.set(highlightInfo.highlighterKey, drawAction);\n                    }\n                    drawAction.highlights.push({\n                        key: highlightInfo.key,\n                        start: highlightInfo.start,\n                        end: highlightInfo.end,\n                        obfuscatedText: highlightInfo.obfuscatedText\n                    });\n                });\n                return [4 /*yield*/, Promise.all(Array.from(actions.values()).map(function (action) { return (0, drawHighlights_1[\"default\"])({ action: action, state: state }); }))];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n}); };\nexports[\"default\"] = redrawUserHighlights;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/redrawUserHighlights.js?");

/***/ }),

/***/ "./dist/utils/highlights/removeLayerHighlights.js":
/*!********************************************************!*\
  !*** ./dist/utils/highlights/removeLayerHighlights.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Removes highlights from provided container\n * @param container DOM Element containing highlights\n */\nvar removeLayerHighlights = function (container) {\n    // eslint-disable-next-line no-param-reassign\n    container.innerHTML = '';\n};\nexports[\"default\"] = removeLayerHighlights;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/removeLayerHighlights.js?");

/***/ }),

/***/ "./dist/utils/highlights/removeNotesDialog.js":
/*!****************************************************!*\
  !*** ./dist/utils/highlights/removeNotesDialog.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar state_1 = __webpack_require__(/*! ../../lib/state */ \"./dist/lib/state/index.js\");\nvar removeNotesDialog = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    if (state.notesDialog) {\n        state.notesDialog.remove();\n    }\n    if (state.confirmationDialog) {\n        state.confirmationDialog.remove();\n    }\n    (0, state_1.updateState)({\n        notesDialog: undefined,\n        confirmationDialog: undefined\n    });\n};\nexports[\"default\"] = removeNotesDialog;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/removeNotesDialog.js?");

/***/ }),

/***/ "./dist/utils/highlights/removeSelectionMenu.js":
/*!******************************************************!*\
  !*** ./dist/utils/highlights/removeSelectionMenu.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar state_1 = __webpack_require__(/*! ../../lib/state */ \"./dist/lib/state/index.js\");\nvar removeSelectionMenu = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    if (state.selectionMenu) {\n        state.selectionMenu.remove();\n    }\n    (0, state_1.updateState)({\n        selectionMenu: undefined\n    });\n};\nexports[\"default\"] = removeSelectionMenu;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/removeSelectionMenu.js?");

/***/ }),

/***/ "./dist/utils/highlights/removeUserHighlights.js":
/*!*******************************************************!*\
  !*** ./dist/utils/highlights/removeUserHighlights.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar state_1 = __webpack_require__(/*! ../../lib/state */ \"./dist/lib/state/index.js\");\nvar removeLayerHighlights_1 = __importDefault(__webpack_require__(/*! ./removeLayerHighlights */ \"./dist/utils/highlights/removeLayerHighlights.js\"));\nvar removeUserHighlights = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    state.highlightersLayers.forEach(function (value) {\n        (0, removeLayerHighlights_1[\"default\"])(value);\n        value.remove();\n    });\n    state.highlightersLayers.clear();\n};\nexports[\"default\"] = removeUserHighlights;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/removeUserHighlights.js?");

/***/ }),

/***/ "./dist/utils/highlights/search/clean.js":
/*!***********************************************!*\
  !*** ./dist/utils/highlights/search/clean.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar state_1 = __webpack_require__(/*! ../../../lib/state */ \"./dist/lib/state/index.js\");\nvar removeLayerHighlights_1 = __importDefault(__webpack_require__(/*! ../removeLayerHighlights */ \"./dist/utils/highlights/removeLayerHighlights.js\"));\n/**\n * Cleans search highlights\n */\nvar clean = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    if (state.searchTermsHighlightsNode) {\n        (0, removeLayerHighlights_1[\"default\"])(state.searchTermsHighlightsNode);\n    }\n    if (state.contentWrapperNode) {\n        state.contentWrapperNode.querySelectorAll('[data-highlighted]').forEach(function (element) {\n            element.removeAttribute('data-highlighted');\n        });\n    }\n};\nexports[\"default\"] = clean;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/search/clean.js?");

/***/ }),

/***/ "./dist/utils/highlights/search/cleanText.js":
/*!***************************************************!*\
  !*** ./dist/utils/highlights/search/cleanText.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Cleans text for a search\n * @param {string} text text to clear\n * @returns {string} clean text\n */\nvar cleanText = function (text) {\n    return text\n        .trim()\n        .replace(/([.,/#!$%^&*;:{}=\\-_`~()\\][])/g, ' ')\n        .replace(/  +/g, ' ');\n};\nexports[\"default\"] = cleanText;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/search/cleanText.js?");

/***/ }),

/***/ "./dist/utils/highlights/search/getRangesRecursively.js":
/*!**************************************************************!*\
  !*** ./dist/utils/highlights/search/getRangesRecursively.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar escapeRegex_1 = __importDefault(__webpack_require__(/*! ../../escapeRegex */ \"./dist/utils/escapeRegex.js\"));\nvar getSearchHighlightsRanges_1 = __importDefault(__webpack_require__(/*! ./getSearchHighlightsRanges */ \"./dist/utils/highlights/search/getSearchHighlightsRanges.js\"));\n/**\n * Traverses provided node looking for nodes with at least one text node as a child and\n * containing inside at least one of the provided terms. If that's the case, it looks for terms\n * and gets ranges for them.\n * @param container Node to traverse looking for terms and getting ranges for them\n * @param terms Terms to look for\n * @param firstCall Denotes this is the first call to method\n */\nvar getRangesRecursively = function (container, terms, firstCall) {\n    var _a;\n    if (firstCall === void 0) { firstCall = false; }\n    var termsKey = terms.join('|');\n    if (container.dataset && container.dataset.highlighted === termsKey) {\n        return [];\n    }\n    if (firstCall && container.dataset) {\n        // eslint-disable-next-line no-param-reassign\n        container.dataset.highlighted = termsKey;\n    }\n    if (!terms.length ||\n        !terms.some(function (t) { return container.innerText && container.innerText.indexOf(t) !== -1; })) {\n        return [];\n    }\n    var ranges = [];\n    var children = Array.from(container.childNodes);\n    if (children.some(function (n) { var _a; return n.nodeType === Node.TEXT_NODE && ((_a = n.nodeValue) === null || _a === void 0 ? void 0 : _a.trim()); })) {\n        return (0, getSearchHighlightsRanges_1[\"default\"])(container, terms);\n    }\n    var cleanTerms = terms.map(escapeRegex_1[\"default\"]);\n    var regex = new RegExp(cleanTerms.join('|'));\n    for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i];\n        var match = (_a = child.textContent) === null || _a === void 0 ? void 0 : _a.match(regex);\n        if (match) {\n            if (!Array.from(child.childNodes).some(function (n) { var _a; return (_a = n.textContent) === null || _a === void 0 ? void 0 : _a.match(regex); })) {\n                var globalRegex = new RegExp(cleanTerms.join('|'), 'g');\n                var foundTerms = Array.from(child.textContent.matchAll(globalRegex)).flatMap(function (t) { return t[0]; });\n                ranges.push.apply(ranges, (0, getSearchHighlightsRanges_1[\"default\"])(child, foundTerms));\n            }\n            else {\n                ranges.push.apply(ranges, getRangesRecursively(child, terms));\n            }\n        }\n    }\n    return ranges;\n};\nexports[\"default\"] = getRangesRecursively;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/search/getRangesRecursively.js?");

/***/ }),

/***/ "./dist/utils/highlights/search/getSearchHighlightsRanges.js":
/*!*******************************************************************!*\
  !*** ./dist/utils/highlights/search/getSearchHighlightsRanges.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar getSelection_1 = __importDefault(__webpack_require__(/*! ../../../lib/animation/getSelection */ \"./dist/lib/animation/getSelection.js\"));\nvar getFirstTextNode_1 = __importDefault(__webpack_require__(/*! ../../getFirstTextNode */ \"./dist/utils/getFirstTextNode.js\"));\nvar getNextSibling_1 = __importDefault(__webpack_require__(/*! ../../getNextSibling */ \"./dist/utils/getNextSibling.js\"));\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../../setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar extendToWord_1 = __importDefault(__webpack_require__(/*! ../extendToWord */ \"./dist/utils/highlights/extendToWord.js\"));\nvar cleanText_1 = __importDefault(__webpack_require__(/*! ./cleanText */ \"./dist/utils/highlights/search/cleanText.js\"));\nvar getSortedTerms_1 = __importDefault(__webpack_require__(/*! ./getSortedTerms */ \"./dist/utils/highlights/search/getSortedTerms.js\"));\nvar cleanCurrentText = function (src) {\n    return src\n        .trim()\n        .replace(/^([.,/#!?$%^&*;:{}=\\-_`~()\\][])+/g, '')\n        .replace(/([.,/#!?$%^&*;:{}=\\-_`~()\\][])+$/g, '');\n};\n/**\n * Gets ranges for every appearance of provided terms\n * @param contentWrapper DOM node containing content\n * @param terms Terms to highlight\n * @returns DOM ranges\n */\nvar getSearchHighlightsRanges = function (contentWrapper, terms) {\n    var _a, _b, _c;\n    var termsKey = terms.join('|');\n    if (contentWrapper.dataset && contentWrapper.dataset.highlighted === termsKey) {\n        return [];\n    }\n    if (contentWrapper.dataset) {\n        // eslint-disable-next-line no-param-reassign\n        contentWrapper.dataset.highlighted = termsKey;\n    }\n    if (!terms.length || !terms.some(function (t) { return contentWrapper.innerText.indexOf(t) !== -1; })) {\n        return [];\n    }\n    var sortedTerms = (0, getSortedTerms_1[\"default\"])(terms);\n    (0, setCSSProperty_1[\"default\"])('user-select', 'text');\n    (0, setCSSProperty_1[\"default\"])('user-select-end', 'auto');\n    // Reset current caret position\n    var currentSelection = (0, getSelection_1[\"default\"])();\n    var range = document.createRange();\n    var resultRanges = new Array();\n    if (currentSelection && range) {\n        currentSelection.removeAllRanges();\n        var firstTextNode = (0, getFirstTextNode_1[\"default\"])(contentWrapper) || contentWrapper;\n        range.setStart(firstTextNode, 0);\n        range.setEnd(firstTextNode, 0);\n        currentSelection.addRange(range);\n        if (!currentSelection.rangeCount) {\n            return [];\n        }\n        currentSelection.modify('extend', 'forward', 'character');\n        (0, extendToWord_1[\"default\"])(currentSelection, contentWrapper);\n        var searching = true;\n        var rangeIsOutside = false;\n        var currentText_1 = currentSelection.toString();\n        currentText_1 = cleanCurrentText(currentText_1);\n        var searchWords_1 = sortedTerms.map(function (text) { return (0, cleanText_1[\"default\"])(text).split(' '); });\n        var wordsToSearch_1 = __spreadArray([], searchWords_1.map(function (words) { return __spreadArray([], words, true); }), true);\n        var searchCurrentText_1 = function (texts) {\n            return texts.length > 0 && texts[0] === currentText_1;\n        };\n        var currentRanges_1 = searchWords_1.map(function () { return null; });\n        var iteratorLimit = 0;\n        var _loop_1 = function () {\n            if (currentText_1) {\n                var termFound_1 = false;\n                wordsToSearch_1.forEach(function (words, i) {\n                    if (!termFound_1 && searchCurrentText_1(words)) {\n                        if (wordsToSearch_1[i].length === searchWords_1[i].length) {\n                            currentRanges_1[i] = currentSelection.getRangeAt(0);\n                        }\n                        words.shift();\n                        // Complete term has been found, now we are creating the highlight\n                        if (words.length === 0) {\n                            termFound_1 = true;\n                            var endRange = currentSelection.getRangeAt(0);\n                            if (currentRanges_1[i]) {\n                                var selectionRange = currentRanges_1[i];\n                                currentRanges_1[i] = null;\n                                if (selectionRange) {\n                                    selectionRange.setEnd(endRange.endContainer, endRange.endOffset);\n                                    while (selectionRange.toString().match(/[.,/#!?$%^&*;:{}=\\-_`~()\\][ \\n]+$/)) {\n                                        if (selectionRange.endOffset < 2) {\n                                            // Special case of empty tag selection (\"[selection]<tag> \")\n                                            selectionRange.setEndBefore(selectionRange.endContainer);\n                                        }\n                                        else {\n                                            // Ending space in same node (\"[selection] \")\n                                            selectionRange.setEnd(selectionRange.endContainer, selectionRange.endOffset - 1);\n                                        }\n                                    }\n                                    while (selectionRange.toString().match(/^[.,/#!?$%^&*;:{}=\\-_`~()\\][ \\n]+/)) {\n                                        if (selectionRange.startContainer.nodeType === Node.TEXT_NODE &&\n                                            selectionRange.startContainer.length === selectionRange.startOffset) {\n                                            // Starting space in different node\n                                            var nextSibling = (0, getNextSibling_1[\"default\"])(selectionRange.startContainer);\n                                            var nextSiblingTextNode = nextSibling && (0, getFirstTextNode_1[\"default\"])(nextSibling);\n                                            if (nextSiblingTextNode) {\n                                                selectionRange.setStart(nextSiblingTextNode, 0);\n                                            }\n                                            else {\n                                                selectionRange.setStartAfter(selectionRange.startContainer);\n                                            }\n                                        }\n                                        else {\n                                            // Starting space (\" [selection]\")\n                                            selectionRange.setStart(selectionRange.startContainer, selectionRange.startOffset + 1);\n                                        }\n                                    }\n                                    resultRanges.push(selectionRange);\n                                }\n                            }\n                            wordsToSearch_1[i] = __spreadArray([], searchWords_1[i], true);\n                        }\n                    }\n                    else if (wordsToSearch_1[i].length !== searchWords_1[i].length) {\n                        currentRanges_1[i] = null;\n                        wordsToSearch_1[i] = __spreadArray([], searchWords_1[i], true);\n                    }\n                });\n            }\n            if (rangeIsOutside) {\n                searching = false;\n            }\n            else {\n                // The selected text is empty or we can find any word to highlight\n                // we must keep searching\n                var backupRange = (_a = (0, getSelection_1[\"default\"])()) === null || _a === void 0 ? void 0 : _a.getRangeAt(0);\n                currentSelection.modify('move', 'forward', 'character');\n                (0, extendToWord_1[\"default\"])(currentSelection, contentWrapper);\n                var newRange = (_b = (0, getSelection_1[\"default\"])()) === null || _b === void 0 ? void 0 : _b.getRangeAt(0);\n                if (backupRange &&\n                    newRange &&\n                    backupRange.startOffset === newRange.startOffset &&\n                    backupRange.startContainer === newRange.startContainer) {\n                    // Chrome infernal loop\n                    currentSelection.modify('move', 'forward', 'character');\n                    currentSelection.modify('move', 'forward', 'character');\n                    currentSelection.modify('extend', 'forward', 'word');\n                    newRange = (_c = (0, getSelection_1[\"default\"])()) === null || _c === void 0 ? void 0 : _c.getRangeAt(0);\n                    if (newRange &&\n                        backupRange.startOffset === newRange.startOffset &&\n                        backupRange.startContainer === newRange.startContainer) {\n                        currentSelection.modify('extend', 'forward', 'line');\n                    }\n                }\n                currentText_1 = currentSelection.toString();\n                if (iteratorLimit++ > 10000) {\n                    loglevel_1[\"default\"].warn('Iteration limit reached in getSearchHighlightsRanges');\n                    searching = false;\n                }\n                currentText_1 = cleanCurrentText(currentText_1);\n                var startContainer = currentSelection.getRangeAt(0).startContainer;\n                try {\n                    rangeIsOutside =\n                        contentWrapper === document.body ||\n                            (!contentWrapper.contains(startContainer) && contentWrapper !== startContainer);\n                }\n                catch (ex) {\n                    rangeIsOutside = true;\n                }\n            }\n        };\n        while (searching) {\n            _loop_1();\n        }\n        currentSelection.removeAllRanges();\n    }\n    (0, setCSSProperty_1[\"default\"])('user-select-end', 'none');\n    return resultRanges;\n};\nexports[\"default\"] = getSearchHighlightsRanges;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/search/getSearchHighlightsRanges.js?");

/***/ }),

/***/ "./dist/utils/highlights/search/getSortedTerms.js":
/*!********************************************************!*\
  !*** ./dist/utils/highlights/search/getSortedTerms.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Sorts search terms to always highlight longest coincidences. Method doesn't modify original\n * array, it returns a new array.\n * @param terms Search terms\n * @returns Sorted search terms\n */\nvar getSortedTerms = function (terms) { return terms.slice().sort(function (a, b) {\n    var aLength = a.split(' ').length;\n    var bLength = b.split(' ').length;\n    if (aLength === 1 && bLength === 1) {\n        return b[0].length - a[0].length;\n    }\n    return bLength - aLength;\n}); };\nexports[\"default\"] = getSortedTerms;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/search/getSortedTerms.js?");

/***/ }),

/***/ "./dist/utils/highlights/search/highlightTerms.js":
/*!********************************************************!*\
  !*** ./dist/utils/highlights/search/highlightTerms.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar state_1 = __webpack_require__(/*! ../../../lib/state */ \"./dist/lib/state/index.js\");\nvar drawHighlights_1 = __importDefault(__webpack_require__(/*! ../drawHighlights */ \"./dist/utils/highlights/drawHighlights.js\"));\nvar getRangesRecursively_1 = __importDefault(__webpack_require__(/*! ./getRangesRecursively */ \"./dist/utils/highlights/search/getRangesRecursively.js\"));\n/**\n * Looks for appearances of terms and draws highlights\n * @param terms Terms to highlight\n */\nvar highlightTerms = function (terms) {\n    var _a = (0, state_1.getState)(), contentPlaceholderNode = _a.contentPlaceholderNode, searchTermsHighlightsNode = _a.searchTermsHighlightsNode, layout = _a.layout;\n    if (searchTermsHighlightsNode && terms.length) {\n        if (contentPlaceholderNode) {\n            var ranges = (0, getRangesRecursively_1[\"default\"])(contentPlaceholderNode, terms, layout !== 'fixed');\n            (0, drawHighlights_1[\"default\"])(searchTermsHighlightsNode, ranges, layout === 'fixed');\n            (0, state_1.updateState)({ searchRanges: ranges });\n        }\n    }\n};\nexports[\"default\"] = highlightTerms;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/search/highlightTerms.js?");

/***/ }),

/***/ "./dist/utils/highlights/search/index.js":
/*!***********************************************!*\
  !*** ./dist/utils/highlights/search/index.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.getRangesRecursively = exports.clean = exports.highlightTerms = exports.getSortedTerms = exports.cleanText = exports.getSearchHighlightsRanges = void 0;\nvar getSearchHighlightsRanges_1 = __webpack_require__(/*! ./getSearchHighlightsRanges */ \"./dist/utils/highlights/search/getSearchHighlightsRanges.js\");\n__createBinding(exports, getSearchHighlightsRanges_1, \"default\", \"getSearchHighlightsRanges\");\nvar cleanText_1 = __webpack_require__(/*! ./cleanText */ \"./dist/utils/highlights/search/cleanText.js\");\n__createBinding(exports, cleanText_1, \"default\", \"cleanText\");\nvar getSortedTerms_1 = __webpack_require__(/*! ./getSortedTerms */ \"./dist/utils/highlights/search/getSortedTerms.js\");\n__createBinding(exports, getSortedTerms_1, \"default\", \"getSortedTerms\");\nvar highlightTerms_1 = __webpack_require__(/*! ./highlightTerms */ \"./dist/utils/highlights/search/highlightTerms.js\");\n__createBinding(exports, highlightTerms_1, \"default\", \"highlightTerms\");\nvar clean_1 = __webpack_require__(/*! ./clean */ \"./dist/utils/highlights/search/clean.js\");\n__createBinding(exports, clean_1, \"default\", \"clean\");\nvar getRangesRecursively_1 = __webpack_require__(/*! ./getRangesRecursively */ \"./dist/utils/highlights/search/getRangesRecursively.js\");\n__createBinding(exports, getRangesRecursively_1, \"default\", \"getRangesRecursively\");\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/highlights/search/index.js?");

/***/ }),

/***/ "./dist/utils/loadContentsInBackground.js":
/*!************************************************!*\
  !*** ./dist/utils/loadContentsInBackground.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\n/**\n * Loads contents in background. Meant for fixed viewer in scroll mode\n */\nvar loadContentsInBackground = function (state, currentContentSlug) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n        throw new Error('Loading contents in background is not available in flow layout');\n    }\n    if (!state.unmounted && !state.loadingContent) {\n        var contentSlug = state.contentSlug, contentsByOrder_1 = state.contentsByOrder, contentsBySlug = state.contentsBySlug, fixedViewerPreloadOrder = state.config.fixedViewerPreloadOrder;\n        var slugContent = contentsBySlug.get(currentContentSlug || contentSlug);\n        if (!slugContent) {\n            throw new Error(\"Couldn't find content by slug: \".concat(JSON.stringify({ currentContentSlug: currentContentSlug, contentSlug: contentSlug })));\n        }\n        var currentContentIndex_1 = slugContent.order;\n        var indexToLoad = fixedViewerPreloadOrder.find(function (i) {\n            var index = currentContentIndex_1 + i;\n            if (index < 0) {\n                return false;\n            }\n            var content = contentsByOrder_1.get(index);\n            if (!content) {\n                return false;\n            }\n            return !content.html;\n        });\n        if (indexToLoad !== undefined) {\n            var content = contentsByOrder_1.get(currentContentIndex_1 + indexToLoad);\n            if (state.config.eventHandler && content) {\n                var event_1 = {\n                    type: 'loadNewContent',\n                    slug: state.slug,\n                    productSlug: state.productSlug,\n                    contentSlug: content.slug\n                };\n                (0, state_1.updateState)({ loadingContent: content.slug });\n                state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                    var _a = ex, stack = _a.stack, message = _a.message;\n                    console.error('Error at event handler', stack || message);\n                });\n            }\n        }\n    }\n};\nexports[\"default\"] = loadContentsInBackground;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/loadContentsInBackground.js?");

/***/ }),

/***/ "./dist/utils/navigateToContentSlug.js":
/*!*********************************************!*\
  !*** ./dist/utils/navigateToContentSlug.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar navigateToContentSlug = function (contentSlug, state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    if (state.scrollMode === 'horizontal' || state.scrollMode === 'vertical') {\n        var positionBySlug = state.positionBySlug;\n        var position = positionBySlug.get(contentSlug);\n        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n            (0, state_1.updateState)({ contentSlug: contentSlug });\n        }\n        if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n            if (position) {\n                (0, state_1.updateState)({ contentSlug: contentSlug });\n            }\n            else if (state.config.eventHandler) {\n                var event_1 = {\n                    type: 'loadNewContent',\n                    slug: state.slug,\n                    productSlug: state.productSlug,\n                    contentSlug: contentSlug\n                };\n                /**\n                 * Es posible que durante la integracin tengamos que cambiar o aadir informacin a estos\n                 * eventos. Como hemos avisado ya en otros puntos del cdigo, no es lo mismo `contentSlug`\n                 * que `label`, por lo que es probable que se necesiten cambios.\n                 */\n                state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                    var _a = ex, stack = _a.stack, message = _a.message;\n                    console.error('Error at event handler', stack || message);\n                });\n            }\n        }\n    }\n    if (state.scrollMode === 'fixed') {\n        loglevel_1[\"default\"].warn('Page navigation not implemented in fixed mode, it should be controlled by appending new content');\n    }\n};\nexports[\"default\"] = navigateToContentSlug;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/navigateToContentSlug.js?");

/***/ }),

/***/ "./dist/utils/processFixedContents.js":
/*!********************************************!*\
  !*** ./dist/utils/processFixedContents.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ./setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar getContainer = function (info, previousInfo) {\n    if (previousInfo === null || previousInfo === void 0 ? void 0 : previousInfo.container) {\n        return previousInfo.container;\n    }\n    var order = info.order, width = info.width, height = info.height, slug = info.slug, label = info.label;\n    var container = document.createElement('div');\n    container.classList.add('olectio-fixed-content-container');\n    container.style.width = \"\".concat(width, \"px\");\n    container.style.height = \"\".concat(height - 1, \"px\");\n    container.dataset.order = \"\".concat(order);\n    container.dataset.slug = slug;\n    container.dataset.label = label;\n    container.style.setProperty('--page-width', \"\".concat(width, \"px\"));\n    container.style.setProperty('--page-height', \"\".concat(height - 1, \"px\"));\n    return container;\n};\nvar processFixedContents = function (info, state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var contentPlaceholderNode, _a, gapMode, gapSize, oldContentsByOrder, totalWidth, totalHeight, maxWidth, maxHeight, lastPosition, prev, previousContent, contentsBySlug, contentsByOrder, positionBySlug, slugByPosition, contentsInfo, containers, unaffected, pageOne, pairOrder, i, l, content, width, height, label, slug, order, html, cssURL, previousInfo, left, top_1, container, position, contentInfo;\n        return __generator(this, function (_b) {\n            contentPlaceholderNode = state.contentPlaceholderNode;\n            _a = state, gapMode = _a.gapMode, gapSize = _a.gapSize, oldContentsByOrder = _a.contentsByOrder;\n            totalWidth = 0;\n            totalHeight = 0;\n            maxWidth = 0;\n            maxHeight = 0;\n            lastPosition = 0;\n            contentsBySlug = new Map();\n            contentsByOrder = new Map();\n            positionBySlug = new Map();\n            slugByPosition = new Map();\n            contentsInfo = new Array();\n            containers = [];\n            unaffected = new Set(state.config.themeUnaffectedSlugs || []);\n            pageOne = info.find(function (i) { return i.label === '1'; });\n            pairOrder = pageOne ? pageOne.order % 2 : undefined;\n            for (i = 0, l = info.length; i < l; i++) {\n                content = info[i];\n                width = content.width, height = content.height, label = content.label, slug = content.slug, order = content.order, html = content.html, cssURL = content.cssURL;\n                previousInfo = oldContentsByOrder === null || oldContentsByOrder === void 0 ? void 0 : oldContentsByOrder.get(order);\n                left = Math.max(totalWidth - 1, 0);\n                top_1 = Math.max(totalHeight - 1, 0);\n                totalHeight += height - 3;\n                totalWidth += width;\n                if (gapMode !== viewerSettings_1.GapMode.None) {\n                    totalHeight += gapSize;\n                    if (gapMode === viewerSettings_1.GapMode.All || !pageOne || order % 2 === pairOrder) {\n                        totalWidth += gapSize;\n                    }\n                }\n                maxWidth = Math.max(maxWidth, width);\n                maxHeight = Math.max(maxHeight, height);\n                container = getContainer(content, previousInfo);\n                container.style.setProperty('--page-top', \"\".concat(top_1, \"px\"));\n                container.style.setProperty('--page-left', \"\".concat(left, \"px\"));\n                if (unaffected.has(slug)) {\n                    container.classList.add('olectio-avoid-invert');\n                }\n                containers.push(container);\n                position = state.scrollMode === 'horizontal' ? left : top_1;\n                positionBySlug.set(slug, position);\n                slugByPosition.set(position, slug);\n                contentInfo = {\n                    width: width,\n                    height: height,\n                    label: label,\n                    slug: slug,\n                    order: order,\n                    container: container,\n                    html: (previousInfo === null || previousInfo === void 0 ? void 0 : previousInfo.html) || html,\n                    cssURL: (previousInfo === null || previousInfo === void 0 ? void 0 : previousInfo.cssURL) || cssURL,\n                    left: left,\n                    top: top_1,\n                    maxLeft: totalWidth,\n                    maxTop: totalHeight,\n                    prev: prev\n                };\n                contentsByOrder.set(order, contentInfo);\n                contentsBySlug.set(slug, contentInfo);\n                contentsInfo.push(contentInfo);\n                lastPosition = position;\n                prev = slug;\n                if (previousContent) {\n                    previousContent.next = slug;\n                }\n                previousContent = contentInfo;\n            }\n            if (previousContent) {\n                previousContent.next = prev;\n            }\n            (0, setCSSProperty_1[\"default\"])('total-width', \"\".concat(totalWidth, \"px\"));\n            (0, setCSSProperty_1[\"default\"])('total-height', \"\".concat(totalHeight, \"px\"));\n            (0, setCSSProperty_1[\"default\"])('max-width', \"\".concat(maxWidth, \"px\"));\n            (0, setCSSProperty_1[\"default\"])('max-height', \"\".concat(maxHeight, \"px\"));\n            contentPlaceholderNode.append.apply(contentPlaceholderNode, containers);\n            return [2 /*return*/, new Promise(function (resolve) {\n                    window.requestAnimationFrame(function () {\n                        window.requestAnimationFrame(function () {\n                            for (var i = 0, l = info.length; i < l; i++) {\n                                var content = contentsByOrder.get(i);\n                                if (content && content.slug !== state.contentSlug) {\n                                    contentPlaceholderNode.removeChild(content.container);\n                                }\n                            }\n                            window.requestAnimationFrame(function () {\n                                window.requestAnimationFrame(function () {\n                                    // setCSSProperty('viewer-margin-top', '0');\n                                    resolve({\n                                        fixedInfo: info,\n                                        layout: viewerSettings_1.LayoutTypes.Fixed,\n                                        totalHeight: totalHeight,\n                                        totalWidth: totalWidth,\n                                        maxWidth: maxWidth,\n                                        maxHeight: maxHeight,\n                                        contentsInfo: contentsInfo,\n                                        contentsBySlug: contentsBySlug,\n                                        contentsByOrder: contentsByOrder,\n                                        positionBySlug: positionBySlug,\n                                        slugByPosition: slugByPosition,\n                                        lastPosition: lastPosition,\n                                        wrapperReady: true\n                                    });\n                                });\n                            });\n                        });\n                    });\n                })];\n        });\n    });\n};\nexports[\"default\"] = processFixedContents;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/processFixedContents.js?");

/***/ }),

/***/ "./dist/utils/removeAllChildren.js":
/*!*****************************************!*\
  !*** ./dist/utils/removeAllChildren.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\nvar removeAllChildren = function (parent) {\n    while (parent.firstChild) {\n        parent.removeChild(parent.firstChild);\n    }\n};\nexports[\"default\"] = removeAllChildren;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/removeAllChildren.js?");

/***/ }),

/***/ "./dist/utils/removeCSSProperty.js":
/*!*****************************************!*\
  !*** ./dist/utils/removeCSSProperty.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Removes CSS property in document element style\n * @param property Property name (without `--`)\n */\nvar removeCSSProperty = function (property) {\n    document.documentElement.style.removeProperty(\"--\".concat(property));\n};\nexports[\"default\"] = removeCSSProperty;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/removeCSSProperty.js?");

/***/ }),

/***/ "./dist/utils/setCSSProperty.js":
/*!**************************************!*\
  !*** ./dist/utils/setCSSProperty.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nexports.__esModule = true;\n/**\n * Sets CSS property in document element style\n * @param property Property name (without `--`)\n * @param value Property desired value\n */\nvar setCSSProperty = function (property, value) {\n    document.documentElement.style.setProperty(\"--\".concat(property), value);\n};\nexports[\"default\"] = setCSSProperty;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/setCSSProperty.js?");

/***/ }),

/***/ "./dist/utils/setupHandlers.js":
/*!*************************************!*\
  !*** ./dist/utils/setupHandlers.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar loadContentsInBackground_1 = __importDefault(__webpack_require__(/*! ./loadContentsInBackground */ \"./dist/utils/loadContentsInBackground.js\"));\nvar layoutSetup_1 = __importDefault(__webpack_require__(/*! ../viewer/layoutSetup */ \"./dist/viewer/layoutSetup.js\"));\nvar redrawUserHighlights_1 = __importDefault(__webpack_require__(/*! ./highlights/redrawUserHighlights */ \"./dist/utils/highlights/redrawUserHighlights.js\"));\nvar setupHandlers = function (state, dispatch) { return __awaiter(void 0, void 0, void 0, function () {\n    var action, loadNewContent, onPageChange;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!state.config.initialContent) return [3 /*break*/, 2];\n                action = __assign({ type: 'appendNewContent' }, state.config.initialContent);\n                return [4 /*yield*/, dispatch(action)];\n            case 1:\n                _a.sent();\n                return [3 /*break*/, 3];\n            case 2:\n                if (state.config.eventHandler && state.layout === viewerSettings_1.LayoutTypes.Flow) {\n                    loadNewContent = {\n                        type: 'loadNewContent',\n                        slug: state.config.slug,\n                        productSlug: state.productSlug,\n                        contentSlug: state.config.contentSlug\n                    };\n                    state.config.eventHandler(loadNewContent)[\"catch\"](function (ex) {\n                        var _a = ex, stack = _a.stack, message = _a.message;\n                        console.error('Error at event handler', stack || message);\n                    });\n                }\n                else if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                    (0, layoutSetup_1[\"default\"])(state);\n                }\n                _a.label = 3;\n            case 3:\n                if (!(state.layout === viewerSettings_1.LayoutTypes.Fixed)) return [3 /*break*/, 5];\n                onPageChange = {\n                    type: 'addOnChangeEvent',\n                    propertyName: 'contentSlug',\n                    event: function () {\n                        (0, loadContentsInBackground_1[\"default\"])(state);\n                        (0, redrawUserHighlights_1[\"default\"])(state)[\"catch\"](function (ex) {\n                            var _a = ex, stack = _a.stack, message = _a.message;\n                            console.error('Error redrawing user highlights', stack || message);\n                        });\n                    }\n                };\n                return [4 /*yield*/, dispatch(onPageChange)];\n            case 4:\n                _a.sent();\n                _a.label = 5;\n            case 5: return [2 /*return*/];\n        }\n    });\n}); };\nexports[\"default\"] = setupHandlers;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/setupHandlers.js?");

/***/ }),

/***/ "./dist/utils/unmount.js":
/*!*******************************!*\
  !*** ./dist/utils/unmount.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar animationController_1 = __webpack_require__(/*! ../lib/animation/animationController */ \"./dist/lib/animation/animationController.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar stateChangeEvents_1 = __webpack_require__(/*! ../lib/state/stateChangeEvents */ \"./dist/lib/state/stateChangeEvents.js\");\nvar cleanStyles_1 = __importDefault(__webpack_require__(/*! ./cleanStyles */ \"./dist/utils/cleanStyles.js\"));\nvar createBasicDOMElements_1 = __webpack_require__(/*! ./createBasicDOMElements */ \"./dist/utils/createBasicDOMElements.js\");\nvar globalEvents_1 = __webpack_require__(/*! ./globalEvents */ \"./dist/utils/globalEvents.js\");\nvar removeCSSProperty_1 = __importDefault(__webpack_require__(/*! ./removeCSSProperty */ \"./dist/utils/removeCSSProperty.js\"));\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ./setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar unmount = function (state) {\n    if (state === void 0) { state = (0, state_1.getState)(); }\n    (0, setCSSProperty_1[\"default\"])('viewer-margin-top', '200vh');\n    (0, state_1.updateState)({ unmounted: true });\n    (0, globalEvents_1.removeGlobalEvents)(state);\n    (0, stateChangeEvents_1.removeAllChangeEvents)();\n    (0, createBasicDOMElements_1.cleanDOM)(state);\n    (0, cleanStyles_1[\"default\"])(state);\n    (0, animationController_1.unmountAnimations)();\n    (0, removeCSSProperty_1[\"default\"])('viewer-margin-top');\n};\nexports[\"default\"] = unmount;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/unmount.js?");

/***/ }),

/***/ "./dist/utils/updatePositionsMaps.js":
/*!*******************************************!*\
  !*** ./dist/utils/updatePositionsMaps.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\n/**\n * Updates positions maps for if fixed layout (meant to be used on scroll mode change)\n * @param state Viewer state\n */\nvar updatePositionsMaps = function (state) {\n    if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n        var contentsInfo = state.contentsInfo;\n        var positionKey = state.scrollMode === 'horizontal' ? 'left' : 'top';\n        var positionBySlug = new Map();\n        var slugByPosition = new Map();\n        var lastPosition = 0;\n        for (var i = 0, l = contentsInfo.length; i < l; i++) {\n            var content = contentsInfo[i];\n            var slug = content.slug;\n            var position = content[positionKey];\n            positionBySlug.set(slug, position);\n            slugByPosition.set(position, slug);\n            lastPosition = position;\n        }\n        (0, state_1.updateState)({ positionBySlug: positionBySlug, slugByPosition: slugByPosition, lastPosition: lastPosition });\n    }\n};\nexports[\"default\"] = updatePositionsMaps;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/utils/updatePositionsMaps.js?");

/***/ }),

/***/ "./dist/viewer/index.js":
/*!******************************!*\
  !*** ./dist/viewer/index.js ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar loglevel_1 = __importDefault(__webpack_require__(/*! loglevel */ \"./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js\"));\nvar dispatch_1 = __importDefault(__webpack_require__(/*! ../lib/state/dispatch */ \"./dist/lib/state/dispatch.js\"));\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar setInitialProperties_1 = __importDefault(__webpack_require__(/*! ../lib/styles/setInitialProperties */ \"./dist/lib/styles/setInitialProperties.js\"));\nvar createBasicDOMElements_1 = __importDefault(__webpack_require__(/*! ../utils/createBasicDOMElements */ \"./dist/utils/createBasicDOMElements.js\"));\nvar globalEvents_1 = __webpack_require__(/*! ../utils/globalEvents */ \"./dist/utils/globalEvents.js\");\nvar animationController_1 = __importDefault(__webpack_require__(/*! ../lib/animation/animationController */ \"./dist/lib/animation/animationController.js\"));\nvar setupHandlers_1 = __importDefault(__webpack_require__(/*! ../utils/setupHandlers */ \"./dist/utils/setupHandlers.js\"));\nvar unmount_1 = __importDefault(__webpack_require__(/*! ../utils/unmount */ \"./dist/utils/unmount.js\"));\n/**\n * Main viewer function\n * @param config Viewer config\n * @returns API Interface\n */\nvar viewer = function (config) {\n    (0, state_1.initializeState)(config);\n    var state = (0, state_1.getState)();\n    var api = {\n        dispatch: dispatch_1[\"default\"],\n        state: state,\n        unmount: function () { return (0, unmount_1[\"default\"])(state); }\n    };\n    (0, setInitialProperties_1[\"default\"])(state);\n    (0, createBasicDOMElements_1[\"default\"])(state);\n    (0, globalEvents_1.setupGlobalEvents)(state, api.dispatch);\n    (0, animationController_1[\"default\"])(state, api.dispatch);\n    (0, setupHandlers_1[\"default\"])(state, api.dispatch)[\"catch\"](function (ex) {\n        var _a = ex, stack = _a.stack, message = _a.message;\n        console.error('Error at handlers setup', stack || message);\n    });\n    loglevel_1[\"default\"].debug('Viewer Initialized');\n    return api;\n};\nexports[\"default\"] = viewer;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/viewer/index.js?");

/***/ }),

/***/ "./dist/viewer/layoutSetup.js":
/*!************************************!*\
  !*** ./dist/viewer/layoutSetup.js ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\n/**\n * Layout setup. Every needed setup or specific initialization should happen hear for every\n * layout type. This method is not intended to return a partial state, every action should\n * be dealt with events\n * @param state Viewer state\n */\nvar layoutSetup = function (state) {\n    var contentPlaceholderNode = state.contentPlaceholderNode;\n    if (contentPlaceholderNode) {\n        contentPlaceholderNode.innerHTML = '';\n    }\n    if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n        (0, state_1.updateState)({ wrapperReady: false });\n        var event_1 = {\n            type: 'getContentsInfo',\n            slug: state.slug,\n            productSlug: state.productSlug\n        };\n        if (state.config.eventHandler) {\n            state.config.eventHandler(event_1)[\"catch\"](function (ex) {\n                var _a = ex, stack = _a.stack, message = _a.message;\n                console.error('Error at event handler', stack || message);\n            });\n        }\n    }\n    else {\n        (0, state_1.updateState)({ wrapperReady: true });\n    }\n};\nexports[\"default\"] = layoutSetup;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/viewer/layoutSetup.js?");

/***/ }),

/***/ "./dist/viewer/recalculate.js":
/*!************************************!*\
  !*** ./dist/viewer/recalculate.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar viewerSettings_1 = __webpack_require__(/*! ../model/viewerSettings */ \"./dist/model/viewerSettings.js\");\nvar state_1 = __webpack_require__(/*! ../lib/state */ \"./dist/lib/state/index.js\");\nvar recalculatingHandler_1 = __webpack_require__(/*! ../lib/state/changeHandlers/recalculatingHandler */ \"./dist/lib/state/changeHandlers/recalculatingHandler.js\");\nvar clientToContentWrapperCoordinates_1 = __webpack_require__(/*! ../utils/highlights/clientToContentWrapperCoordinates */ \"./dist/utils/highlights/clientToContentWrapperCoordinates.js\");\nvar setCSSProperty_1 = __importDefault(__webpack_require__(/*! ../utils/setCSSProperty */ \"./dist/utils/setCSSProperty.js\"));\nvar updatePositionsMaps_1 = __importDefault(__webpack_require__(/*! ../utils/updatePositionsMaps */ \"./dist/utils/updatePositionsMaps.js\"));\nvar getColumnGap_1 = __importDefault(__webpack_require__(/*! ../utils/getColumnGap */ \"./dist/utils/getColumnGap.js\"));\nvar checkImagesHeight_1 = __importDefault(__webpack_require__(/*! ../utils/checkImagesHeight */ \"./dist/utils/checkImagesHeight.js\"));\nvar charWidthFactor = 1.65;\n/**\n * Recalculates viewer layout\n * @param state Viewer state\n */\nvar recalculate = function (state) { return __awaiter(void 0, void 0, void 0, function () {\n    var ex_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!state.recalculating) return [3 /*break*/, 4];\n                _a.label = 1;\n            case 1:\n                _a.trys.push([1, 3, , 4]);\n                return [4 /*yield*/, (0, recalculatingHandler_1.onRecalculateFinish)()];\n            case 2:\n                _a.sent();\n                return [3 /*break*/, 4];\n            case 3:\n                ex_1 = _a.sent();\n                return [2 /*return*/, {}];\n            case 4:\n                (0, state_1.updateState)({ recalculating: true });\n                return [2 /*return*/, new Promise(function (resolve) {\n                        var _a, _b, _c;\n                        var olectioContainerNode = state.olectioContainerNode, olectioViewerNode = state.olectioViewerNode, contentPlaceholderNode = state.contentPlaceholderNode;\n                        var containerRect = olectioContainerNode.getBoundingClientRect();\n                        var containerWidth = containerRect.width, containerHeight = containerRect.height;\n                        var globalUpdate = {\n                            containerWidth: containerWidth,\n                            containerHeight: containerHeight,\n                            recalculating: false\n                        };\n                        if (state.layout === viewerSettings_1.LayoutTypes.Flow) {\n                            (0, setCSSProperty_1[\"default\"])('total-width', \"0px\");\n                            (0, setCSSProperty_1[\"default\"])('total-column-width', '0px');\n                            (0, setCSSProperty_1[\"default\"])('column-width', '0px');\n                            (0, setCSSProperty_1[\"default\"])('column-gap', \"\".concat(state.config.columnGap, \"px\"));\n                            (0, setCSSProperty_1[\"default\"])('column-count', '2');\n                            var fontSize = state.fontSize, pagesLabelsNode_1 = state.pagesLabelsNode, _d = state.config, minCharsPerColumn = _d.minCharsPerColumn, maxCharsPerColumn = _d.maxCharsPerColumn, desiredColumnGap = _d.columnGap, endOfChapterCalculatorNode = state.endOfChapterCalculatorNode;\n                            pagesLabelsNode_1.innerHTML = '';\n                            var charWidth = fontSize / charWidthFactor;\n                            var minWidth = Math.min(minCharsPerColumn * charWidth, containerWidth);\n                            var maxWidth = Math.min(maxCharsPerColumn * charWidth + desiredColumnGap, containerWidth);\n                            if (state.scrollMode === 'horizontal') {\n                                var doubleColumnWidth = containerWidth / 2 - desiredColumnGap;\n                                var columnsInViewport = doubleColumnWidth < minWidth ? 1 : 2;\n                                var totalColumnWidth_1 = containerWidth / columnsInViewport;\n                                var columnGap = Math.max((0, getColumnGap_1[\"default\"])(totalColumnWidth_1, maxWidth, minWidth, desiredColumnGap), state.config.minColumnGap);\n                                var columnWidth = totalColumnWidth_1 - columnGap;\n                                (0, setCSSProperty_1[\"default\"])('column-count', \"\".concat(columnsInViewport));\n                                (0, setCSSProperty_1[\"default\"])('column-gap', \"\".concat(columnGap, \"px\"));\n                                (0, setCSSProperty_1[\"default\"])('column-width', \"\".concat(columnWidth, \"px\"));\n                                (0, setCSSProperty_1[\"default\"])('total-column-width', \"\".concat(totalColumnWidth_1, \"px\"));\n                                var endChapterRawPosition = endOfChapterCalculatorNode.getBoundingClientRect().left;\n                                var endChapterPosition = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(endChapterRawPosition);\n                                var lastColumnPosition = Math.round(endChapterPosition / totalColumnWidth_1) * totalColumnWidth_1;\n                                var totalWidth = lastColumnPosition + totalColumnWidth_1;\n                                var totalColumns = totalWidth / totalColumnWidth_1;\n                                (0, setCSSProperty_1[\"default\"])('total-width', \"\".concat(totalWidth, \"px\"));\n                                (0, setCSSProperty_1[\"default\"])('scroll-width', \"\".concat(Math.ceil(totalColumns / columnsInViewport) * columnsInViewport * totalColumnWidth_1 - 15, \"px\"));\n                                var columnsPositions_1 = Array(totalColumns)\n                                    .fill(0)\n                                    .map(function (_, i) { return i * totalColumnWidth_1; })\n                                    .reverse();\n                                var positionBySlug_1 = new Map();\n                                var slugByPosition_1 = new Map();\n                                var lastPosition_1 = null;\n                                var labelsCount_1 = 0;\n                                var lastLabel_1 = '';\n                                var minTotalWidth_1 = 0;\n                                contentPlaceholderNode.querySelectorAll('[data-page]').forEach(function (item) {\n                                    var element = item;\n                                    var rawPosition = element.getBoundingClientRect().left;\n                                    var contentWrapperPosition = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperLeft)(rawPosition);\n                                    var position = columnsPositions_1.find(function (p) { return p < contentWrapperPosition; });\n                                    var page = element.dataset.page;\n                                    positionBySlug_1.set(page, position);\n                                    lastLabel_1 = page;\n                                    if (lastPosition_1 !== position) {\n                                        if (lastPosition_1 === null) {\n                                            slugByPosition_1.set(position, page);\n                                            var label = document.createElement('div');\n                                            label.classList.add('olectio-label');\n                                            var labelP = document.createElement('p');\n                                            label.appendChild(labelP);\n                                            labelP.innerText = page;\n                                            pagesLabelsNode_1.appendChild(label);\n                                            labelsCount_1++;\n                                        }\n                                        else {\n                                            var labelPosition = lastPosition_1 + totalColumnWidth_1;\n                                            while (labelPosition <= position) {\n                                                slugByPosition_1.set(labelPosition, page);\n                                                var label = document.createElement('div');\n                                                label.classList.add('olectio-label');\n                                                var labelP = document.createElement('p');\n                                                label.appendChild(labelP);\n                                                labelP.innerText = page;\n                                                pagesLabelsNode_1.appendChild(label);\n                                                labelsCount_1++;\n                                                labelPosition += totalColumnWidth_1;\n                                            }\n                                        }\n                                    }\n                                    lastPosition_1 = position;\n                                    minTotalWidth_1 = Math.max(minTotalWidth_1, position);\n                                });\n                                if (lastLabel_1) {\n                                    var position = lastPosition_1;\n                                    for (var i = labelsCount_1 + 1, l = totalColumns; i <= l; i++) {\n                                        position += totalColumnWidth_1;\n                                        var label = document.createElement('div');\n                                        label.classList.add('olectio-label');\n                                        var labelP = document.createElement('p');\n                                        label.appendChild(labelP);\n                                        labelP.innerText = lastLabel_1;\n                                        pagesLabelsNode_1.appendChild(label);\n                                        slugByPosition_1.set(position, lastLabel_1);\n                                    }\n                                    lastPosition_1 = position;\n                                }\n                                if ((_a = document.scrollingElement) === null || _a === void 0 ? void 0 : _a.scrollTop) {\n                                    document.scrollingElement.scrollTop = 0;\n                                }\n                                var images = contentPlaceholderNode.querySelectorAll('img');\n                                if (images.length) {\n                                    Array.from(images).map(function (i) { return (0, checkImagesHeight_1[\"default\"])([i], state); });\n                                }\n                                resolve(__assign(__assign({}, globalUpdate), { totalWidth: totalWidth, totalColumnWidth: totalColumnWidth_1, totalColumns: totalColumns, columnsInViewport: columnsInViewport, columnWidth: columnWidth, columnGap: columnGap, positionBySlug: positionBySlug_1, slugByPosition: slugByPosition_1, lastPosition: lastPosition_1 }));\n                                var pageSpan = contentPlaceholderNode.querySelector('[data-page]');\n                                if (pageSpan) {\n                                    var siblings = (_b = pageSpan.parentNode) === null || _b === void 0 ? void 0 : _b.childNodes;\n                                    for (var i = 0, l = (siblings === null || siblings === void 0 ? void 0 : siblings.length) || 0; i < l; i++) {\n                                        var node = siblings === null || siblings === void 0 ? void 0 : siblings.item(i);\n                                        if ((_c = node.innerText) === null || _c === void 0 ? void 0 : _c.trim()) {\n                                            node.classList.add('olectio-text-cursor');\n                                        }\n                                    }\n                                }\n                                return;\n                            }\n                            if (state.scrollMode === 'vertical') {\n                                var columnGap = Math.max((0, getColumnGap_1[\"default\"])(containerWidth, maxWidth, minWidth, desiredColumnGap), state.config.minColumnGap);\n                                (0, setCSSProperty_1[\"default\"])('column-gap', \"\".concat(columnGap, \"px\"));\n                                (0, setCSSProperty_1[\"default\"])('vertical-translate', '0');\n                                (0, state_1.updateState)({ scrollTop: 0 });\n                                var marginTop_1 = parseInt(window.getComputedStyle(olectioViewerNode).marginTop, 10) || 0;\n                                var positionBySlug_2 = new Map();\n                                var slugByPosition_2 = new Map();\n                                var lastPosition_2 = 0;\n                                contentPlaceholderNode.querySelectorAll('[data-page]').forEach(function (item) {\n                                    var element = item;\n                                    var rawPosition = element.getBoundingClientRect().top - marginTop_1;\n                                    var position = (0, clientToContentWrapperCoordinates_1.clientToContentWrapperTop)(rawPosition);\n                                    var page = element.dataset.page;\n                                    positionBySlug_2.set(page, position);\n                                    slugByPosition_2.set(position, page);\n                                    lastPosition_2 = position;\n                                });\n                                var totalHeight = contentPlaceholderNode.getBoundingClientRect().height / state.scale;\n                                resolve(__assign(__assign({}, globalUpdate), { columnGap: columnGap, totalHeight: totalHeight, lastPosition: lastPosition_2, positionBySlug: positionBySlug_2, slugByPosition: slugByPosition_2 }));\n                                (0, setCSSProperty_1[\"default\"])('scroll-height', \"\".concat(totalHeight, \"px\"));\n                                return;\n                            }\n                            resolve(globalUpdate);\n                            return;\n                        }\n                        if (state.layout === viewerSettings_1.LayoutTypes.Fixed) {\n                            (0, updatePositionsMaps_1[\"default\"])(state);\n                        }\n                        resolve(globalUpdate);\n                    })];\n        }\n    });\n}); };\nexports[\"default\"] = recalculate;\n\n\n//# sourceURL=webpack://olectio-viewer/./dist/viewer/recalculate.js?");

/***/ }),

/***/ "./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js ***!
  \*********************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      defaultLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = level;\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          self.setLevel(defaultLevel, false);\n          clearPersistedLevel();\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/loglevel@1.8.0/node_modules/loglevel/lib/loglevel.js?");

/***/ }),

/***/ "./node_modules/.pnpm/nanoid@2.1.11/node_modules/nanoid/format.browser.js":
/*!********************************************************************************!*\
  !*** ./node_modules/.pnpm/nanoid@2.1.11/node_modules/nanoid/format.browser.js ***!
  \********************************************************************************/
/***/ ((module) => {

eval("// This file replaces `format.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nmodule.exports = function (random, alphabet, size) {\n  // We cant use bytes bigger than the alphabet. To make bytes values closer\n  // to the alphabet, we apply bitmask on them. We look for the closest\n  // `2 ** x - 1` number, which will be bigger than alphabet size. If we have\n  // 30 symbols in the alphabet, we will take 31 (00011111).\n  // We do not use faster Math.clz32, because it is not available in browsers.\n  var mask = (2 << Math.log(alphabet.length - 1) / Math.LN2) - 1\n  // Bitmask is not a perfect solution (in our example it will pass 31 bytes,\n  // which is bigger than the alphabet). As a result, we will need more bytes,\n  // than ID size, because we will refuse bytes bigger than the alphabet.\n\n  // Every hardware random generator call is costly,\n  // because we need to wait for entropy collection. This is why often it will\n  // be faster to ask for few extra bytes in advance, to avoid additional calls.\n\n  // Here we calculate how many random bytes should we call in advance.\n  // It depends on ID length, mask / alphabet size and magic number 1.6\n  // (which was selected according benchmarks).\n\n  // -~f => Math.ceil(f) if n is float number\n  // -~i => i + 1 if n is integer number\n  var step = -~(1.6 * mask * size / alphabet.length)\n  var id = ''\n\n  while (true) {\n    var bytes = random(step)\n    // Compact alternative for `for (var i = 0; i < step; i++)`\n    var i = step\n    while (i--) {\n      // If random byte is bigger than alphabet even after bitmask,\n      // we refuse it by `|| ''`.\n      id += alphabet[bytes[i] & mask] || ''\n      // More compact than `id.length + 1 === size`\n      if (id.length === +size) return id\n    }\n  }\n}\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/nanoid@2.1.11/node_modules/nanoid/format.browser.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/index.js ***!
  \*************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nmodule.exports = __webpack_require__(/*! ./lib/index */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/index.js\");\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/index.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/alphabet.js":
/*!********************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/alphabet.js ***!
  \********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar randomFromSeed = __webpack_require__(/*! ./random/random-from-seed */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/random/random-from-seed.js\");\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nfunction get () {\n  return alphabet || ORIGINAL;\n}\n\nmodule.exports = {\n    get: get,\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/alphabet.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/build.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/build.js ***!
  \*****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar generate = __webpack_require__(/*! ./generate */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/generate.js\");\nvar alphabet = __webpack_require__(/*! ./alphabet */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/alphabet.js\");\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1567752802062;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 7;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + generate(version);\n    str = str + generate(clusterWorkerId);\n    if (counter > 0) {\n        str = str + generate(counter);\n    }\n    str = str + generate(seconds);\n    return str;\n}\n\nmodule.exports = build;\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/build.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/generate.js":
/*!********************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/generate.js ***!
  \********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar alphabet = __webpack_require__(/*! ./alphabet */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/alphabet.js\");\nvar random = __webpack_require__(/*! ./random/random-byte */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/random/random-byte-browser.js\");\nvar format = __webpack_require__(/*! nanoid/format */ \"./node_modules/.pnpm/nanoid@2.1.11/node_modules/nanoid/format.browser.js\");\n\nfunction generate(number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + format(random, alphabet.get(), 1);\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = generate;\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/generate.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/index.js ***!
  \*****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar alphabet = __webpack_require__(/*! ./alphabet */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/alphabet.js\");\nvar build = __webpack_require__(/*! ./build */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/build.js\");\nvar isValid = __webpack_require__(/*! ./is-valid */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/is-valid.js\");\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = __webpack_require__(/*! ./util/cluster-worker-id */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/util/cluster-worker-id-browser.js\") || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.isValid = isValid;\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/index.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/is-valid.js":
/*!********************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/is-valid.js ***!
  \********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nvar alphabet = __webpack_require__(/*! ./alphabet */ \"./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/alphabet.js\");\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var nonAlphabetic = new RegExp('[^' +\n      alphabet.get().replace(/[|\\\\{}()[\\]^$+*?.-]/g, '\\\\$&') +\n    ']');\n    return !nonAlphabetic.test(id);\n}\n\nmodule.exports = isShortId;\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/is-valid.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/random/random-byte-browser.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/random/random-byte-browser.js ***!
  \**************************************************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nvar randomByte;\n\nif (!crypto || !crypto.getRandomValues) {\n    randomByte = function(size) {\n        var bytes = [];\n        for (var i = 0; i < size; i++) {\n            bytes.push(Math.floor(Math.random() * 256));\n        }\n        return bytes;\n    };\n} else {\n    randomByte = function(size) {\n        return crypto.getRandomValues(new Uint8Array(size));\n    };\n}\n\nmodule.exports = randomByte;\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/random/random-byte-browser.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/random/random-from-seed.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/random/random-from-seed.js ***!
  \***********************************************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/random/random-from-seed.js?");

/***/ }),

/***/ "./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/util/cluster-worker-id-browser.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/util/cluster-worker-id-browser.js ***!
  \******************************************************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nmodule.exports = 0;\n\n\n//# sourceURL=webpack://olectio-viewer/./node_modules/.pnpm/shortid@2.2.16/node_modules/shortid/lib/util/cluster-worker-id-browser.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./dist/index.js");
/******/ 	
/******/ })()
;